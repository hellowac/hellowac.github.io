
<!DOCTYPE html>

<html class="no-js" lang="zh">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="hellowac的工作学习生活笔记" name="description"/>
<link href="../etl/" rel="prev"/>
<link href="../understand_computer_system/" rel="next"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-9.0.13" name="generator"/>
<title>数据传输和对接 - 我的工作学习生活笔记</title>
<link href="../../../assets/stylesheets/main.ffa9267a.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.a0c5b2b5.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src="../../../assets/javascripts/glightbox.min.js"></script></head>
<body data-md-color-accent="red" data-md-color-primary="default" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#_1">
          跳转至
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--lifted" data-md-component="header">
<nav aria-label="页眉" class="md-header__inner md-grid">
<a aria-label="我的工作学习生活笔记" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="我的工作学习生活笔记">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            我的工作学习生活笔记
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              数据传输和对接
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="搜索" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="搜索" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="查找" class="md-search__options">
<button aria-label="清空当前内容" class="md-search__icon md-icon" tabindex="-1" title="清空当前内容" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/hellowac/hellowac.github.io/" title="前往仓库">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    hellowac的个人博客
  </div>
</a>
</div>
</nav>
<nav aria-label="标签" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../..">
      首页
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="../../python/">
        技术
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../read/english/bluelevel/">
        阅读
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../invest/webs/">
        理财
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../tools/repos/">
        工具
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../documents/docs/">
        文档
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../e-book/">
      电子书
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../other/front_links/">
        其他
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../about/">
      关于
    </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="导航栏" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="我的工作学习生活笔记" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="我的工作学习生活笔记">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    我的工作学习生活笔记
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/hellowac/hellowac.github.io/" title="前往仓库">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    hellowac的个人博客
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
        首页
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          技术
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          技术
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
          Python
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_1">
<span class="md-nav__icon md-icon"></span>
          Python
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/">
        安装
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/pip/">
        pip
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/stringio/">
        StringIO
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/flask/">
        flask
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/logging/">
        logging
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/importlib/">
        importlib
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/pycrypto/">
        crypto
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/petl/">
        petl
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/psutil/">
        psutil
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/docx/">
        Docx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/excel/">
        Excel
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/reportlab/">
        reportlab
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/alembic/">
        alembic
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/sqlalchemy/">
        sqlalchemy
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/useful_functions/">
        常用函数合集
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          Linux
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
          Linux
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../linux/usage_source/">
        常用资源
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../linux/port/">
        端口占用查找
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../linux/disk-mount/">
        linux磁盘挂载
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../linux/shell-scripts/">
        shell脚本实战
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          C
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
          C
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../C/c/">
        C基础
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
          前端知识
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
          前端知识
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../front/base/">
        基础
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../front/project/">
        工程化流程
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../front/version/">
        包版本知识
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../front/package/">
        package.json知识
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../front/webassembly/">
        WebAssembly
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
          服务组件
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_5">
<span class="md-nav__icon md-icon"></span>
          服务组件
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/zookeeper/">
        zookeeper
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/nginx/">
        nginx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/supervisor/">
        supervisor
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/rabbitmq/">
        rabbitmq
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/kafka/">
        kafka
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_5_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_5_6" id="__nav_2_5_6_label" tabindex="0">
          无头浏览器
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_5_6_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_5_6">
<span class="md-nav__icon md-icon"></span>
          无头浏览器
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../unheadchrome/openchrome/">
        openchrome
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../unheadchrome/build_env/">
        环境搭建
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
          数据库
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_6">
<span class="md-nav__icon md-icon"></span>
          数据库
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../database/clickhouse/">
        ClickHouse
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_6_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_6_2" id="__nav_2_6_2_label" tabindex="0">
          MySQL
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_6_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_6_2">
<span class="md-nav__icon md-icon"></span>
          MySQL
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../database/mysql8_install/">
        mysql8
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../database/mysql/">
        常用操作
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_6_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_6_3" id="__nav_2_6_3_label" tabindex="0">
          ElasticSearch
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_6_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_6_3">
<span class="md-nav__icon md-icon"></span>
          ElasticSearch
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../database/elasticsearch_py/">
        elasticsearch-py
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../database/es_dsl/">
        elasticsearch-dsl
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../database/es_aggs/">
        elasticsearch-aggs
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
          安全渗透
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_7_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_7">
<span class="md-nav__icon md-icon"></span>
          安全渗透
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../security/thc-hydra/">
        hydra
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../security/sqlmap/">
        sqlmap
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
          RFC标准
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_8_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_8">
<span class="md-nav__icon md-icon"></span>
          RFC标准
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../rfc/oauth2/">
        oauth2学习笔记
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../rfc/rfc6749/">
        Oauth2-RFC6749翻译
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../rfc/rfc6750/">
        Oauth2-RFC6750翻译
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
          知识概念
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_9_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_9">
<span class="md-nav__icon md-icon"></span>
          知识概念
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../xaas/">
        xaas概念
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../xaas2/">
        一文搞懂什么是SaaS、BaaS、PaaS和IaaS
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../users/">
        统一用户管理
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../etl/">
        ETL数据处理
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          数据传输和对接
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        数据传输和对接
      </a>
<nav aria-label="目录" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      目录
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
    导语
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_3">
    一、 数据传输的场景和意义
  </a>
<nav aria-label="一、 数据传输的场景和意义" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1">
    1. 数据传输的应用场景
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2">
    2. 数据传输的意义
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_4">
    二、数据传输的方式
  </a>
<nav aria-label="二、数据传输的方式" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1_1">
    1. 接口
  </a>
<nav aria-label="1. 接口" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1_2">
    1）接口的作用
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2_1">
    2）哪一方负责创建接口？
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3">
    3）什么是定义接口
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4">
    4）数据在哪一方做转义？
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5">
    5）是主动获取还是对方推送
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#6">
    6）接口定义是开发的事情，但产品经理需要给出轮廓
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#7">
    7）数据流转的时效
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#8">
    8）接口的优缺点
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#9">
    9）相关概念扩展
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2_2">
    2. 数据库对库同步
  </a>
<nav aria-label="2. 数据库对库同步" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1_3">
    1）使用中间表
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2_3">
    2）直接调取对方数据表
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3_1">
    3）同步对方的数据表
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3_2">
    3. 文件包共享方式
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-mqmessage-queue">
    4. 消息队列MQ（Message Queue）
  </a>
<nav aria-label="4. 消息队列MQ（Message Queue）" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1mq">
    1）MQ概念
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2_4">
    2）以异步处理举例说明
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#mq">
    MQ、文件包共享、接口的对比
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5_1">
    5. 其他手段
  </a>
<nav aria-label="5. 其他手段" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1_4">
    1）导入导出
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2_5">
    2）爬取
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_5">
    三、数据传输的处理机制
  </a>
<nav aria-label="三、数据传输的处理机制" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1_5">
    1. 数据同步的触发机制
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2_6">
    2. 是否异步执行数据处理
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3_3">
    3. 判重机制
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4_1">
    4. 获取到数据之后，如果使用?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5_2">
    5. 处理日志
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_6">
    四、数据传输的注意事项
  </a>
<nav aria-label="四、数据传输的注意事项" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1_6">
    1. 目标数据表最好和中间表的维度一致
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2_7">
    2. 不同入口写入同一类型数据时，如何互相去重？
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3_4">
    3. 同步基础数据的时候是否提前过滤
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../understand_computer_system/">
        深入理解计算机系统
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_10" id="__nav_2_10_label" tabindex="0">
          其他
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_10_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_10">
<span class="md-nav__icon md-icon"></span>
          其他
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../other/embedded_industry/">
        嵌入式行业
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../other/apache_license2/">
        apache license2.0开源协议
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          阅读
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          阅读
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
          英语
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_1">
<span class="md-nav__icon md-icon"></span>
          英语
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/english/bluelevel/">
        BlueLevel
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/english/redlevel/">
        RedLevel
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/howtoreadbook/">
        如何阅读一本书
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/howtoavoid/">
        如何避免愚蠢的见识
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/placeofsoul/">
        灵魂的最高处
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/maliciousmatch/">
        恶意匹配
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
          沟通的艺术
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_6">
<span class="md-nav__icon md-icon"></span>
          沟通的艺术
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication01/">
        沟通入门
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication02/">
        看入人里:自我
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication03/">
        看入人里:知觉
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication04/">
        看入人里:情绪
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication05/">
        看出人外:语言
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication06/">
        看出人外:非语言沟通
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication07/">
        看出人外:倾听
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication08/">
        看人之间:沟通和关系的演变
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication09/">
        看人之间:人际沟通中的亲密关系
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication10/">
        看人之间:增进沟通气氛
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication11/">
        看人之间:处理人际冲突
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication12/">
        阅读总结
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          理财
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          理财
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../invest/webs/">
        理财网站
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          工具
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          工具
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/repos/">
        仓库合集
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/git1/">
        git 起步
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/git2/">
        git 基础
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/git3/">
        git 分支
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/git4/">
        git 服务器
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/git5/">
        git 分布式
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/git6/">
        git hub
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/git7/">
        git 工具
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/git8/">
        git 自定义
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/git9/">
        git 与其他系统
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/git10/">
        git 内部原理
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/gita1/">
        git 其他环境中使用
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/gita2/">
        git 应用中嵌入
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/gita3/">
        git 命令
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          文档
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          文档
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../documents/docs/">
        文档合集
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../e-book/">
        电子书
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
          其他
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
          其他
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../other/front_links/">
        前端常用地址
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../other/back_links/">
        后端常用地址
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../other/other_links/">
        其他常用地址
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../other/become_leader/">
        成为高手秘籍
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../other/zym_weibo/">
        张一鸣微博
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../other/dynamic_business/">
        动态商业环境
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../other/honeypot_list/">
        蜜罐资源列表
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../other/bigdata_links/">
        大数据资源列表
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../about/">
        关于
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="目录" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      目录
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
    导语
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_3">
    一、 数据传输的场景和意义
  </a>
<nav aria-label="一、 数据传输的场景和意义" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1">
    1. 数据传输的应用场景
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2">
    2. 数据传输的意义
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_4">
    二、数据传输的方式
  </a>
<nav aria-label="二、数据传输的方式" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1_1">
    1. 接口
  </a>
<nav aria-label="1. 接口" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1_2">
    1）接口的作用
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2_1">
    2）哪一方负责创建接口？
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3">
    3）什么是定义接口
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4">
    4）数据在哪一方做转义？
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5">
    5）是主动获取还是对方推送
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#6">
    6）接口定义是开发的事情，但产品经理需要给出轮廓
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#7">
    7）数据流转的时效
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#8">
    8）接口的优缺点
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#9">
    9）相关概念扩展
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2_2">
    2. 数据库对库同步
  </a>
<nav aria-label="2. 数据库对库同步" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1_3">
    1）使用中间表
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2_3">
    2）直接调取对方数据表
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3_1">
    3）同步对方的数据表
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3_2">
    3. 文件包共享方式
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-mqmessage-queue">
    4. 消息队列MQ（Message Queue）
  </a>
<nav aria-label="4. 消息队列MQ（Message Queue）" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1mq">
    1）MQ概念
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2_4">
    2）以异步处理举例说明
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#mq">
    MQ、文件包共享、接口的对比
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5_1">
    5. 其他手段
  </a>
<nav aria-label="5. 其他手段" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1_4">
    1）导入导出
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2_5">
    2）爬取
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_5">
    三、数据传输的处理机制
  </a>
<nav aria-label="三、数据传输的处理机制" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1_5">
    1. 数据同步的触发机制
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2_6">
    2. 是否异步执行数据处理
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3_3">
    3. 判重机制
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4_1">
    4. 获取到数据之后，如果使用?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5_2">
    5. 处理日志
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_6">
    四、数据传输的注意事项
  </a>
<nav aria-label="四、数据传输的注意事项" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1_6">
    1. 目标数据表最好和中间表的维度一致
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2_7">
    2. 不同入口写入同一类型数据时，如何互相去重？
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3_4">
    3. 同步基础数据的时候是否提前过滤
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="_1">数据传输和对接</h1>
<h2 id="_2">导语</h2>
<p>一个孤立的系统即使录入了再多的数据，其本身的作用也是有限的，只有和其他系统产生关联，互相之间进行数据对接和传输，才能发挥其真正的功能和作用。本篇文章中，作者为我们分析总结了数据传输的场景和意义、数据传输的方式、数据传输的处理机制以及数据传输的注意事项。</p>
<p>一个系统装再多数据，不与其他系统交互，那也是孤岛系统。一个系统若很外向，不断撩拨周围的系统，也乐意被撩拨，成为了众系统中的“交际花”，那么这货基本就是中台的性质。</p>
<p>而更多的系统是介于上述两种极端之间的，像人一样，自己搞生产，也要参与社交——就是系统之间的数据对接。对接的本质是为了实现数据信息的传输，在后端产品的世界里，各子系统之间，或与外部系统之间的对接非常常见。</p>
<p>本文尝试聊聊如下话题：</p>
<p>数据传输的场景和意义
  数据传输的方式
  数据传输的处理机制
  数据传输的注意事项</p>
<!-- more -->
<h2 id="_3">一、 数据传输的场景和意义</h2>
<h3 id="1">1. 数据传输的应用场景</h3>
<ol>
<li>前端和后端本身无时不刻的数据互动；</li>
<li>公司的各个系统之间的信息共享：比如，系统部署之后，就需要各个系统模块之间进行数据的配合，比如订单系统的库存扣减数据要同步给备货系统进行采购；</li>
<li>与第三方平台的对接：比如入驻第三方销售平台亚马逊之后，店家可能自己需要管理自己的订单，这时候就要从亚马逊平台获取订单数据，也就是抓取；</li>
<li>调用现成的公共插件：避免重复造轮子，市场上很多开放性的功能插件可以调用或接入，比如接入百度地图的API，接入微信小程序的二次开发。</li>
</ol>
<h3 id="2">2. 数据传输的意义</h3>
<ol>
<li>不重复生产数据库，避免资源和功能的浪费；</li>
<li>统一数据的维护或生产源头，避免数据不同步：比如同一个公司的两个系统都要用人员信息架构数据，如果各自都能维护，势必出现不一致，也浪费资源；</li>
<li>别人家的数据，自己没办法生产；</li>
<li>复用现成的轮子，API或SDK共享（可能自己也发明不出来）。</li>
</ol>
<h2 id="_4">二、数据传输的方式</h2>
<p>数据传输的方式，这里将其分为：<code>接口传输</code>、<code>中间件传输</code>、<code>message方式传输</code>等。散开了说，比如：<code>MQ</code>（队列）、<code>HTTP接口</code>、<code>otter</code>、<code>文件共享传输</code>等，每一种又有细分的方式和适合的场景。</p>
<h3 id="1_1">1. 接口</h3>
<p>这是一种传统的问答式的传输方式，是典型才<code>c/s</code>交互模式。相当于一台客户机，一台服务器（注：这里的客户机或服务器根据数据的提供方和接收方相对而言的，并不一定是实际的）。</p>
<p>目前常用的<code>http调用</code>、<code>java远程调用``、webserivces</code> 都属于这种方式，只不过，不同的就是传输协议以及报文格式的区别。</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../imgs/20211206-http%E6%8E%A5%E5%8F%A3%E4%BC%A0%E8%BE%93.png"><img alt="http接口传输" src="../imgs/20211206-http%E6%8E%A5%E5%8F%A3%E4%BC%A0%E8%BE%93.png"/></a></p>
<h4 id="1_2">1）接口的作用</h4>
<p>通过接口，可以调用成熟的第三方功能插件为我所用（一般就是API接口），也可以根据实际需求由开发写具体的接口代码解决具体场合的信息传输问题（一般所说的<code>http接口</code>）。</p>
<p>对后端产品经理来说，http接口的使用场景最多。比如：公司先上线了OA系统，后上线了订单系统，订单系统需要同步OA系统的人员组织结构信息。那么一个可行做法就是OA系统创建一个接口，订单系统请求，获取最新的人员结构信息。
2021
这个笼统的方案描述中，包含了这么些信息：<code>创建接口</code>、<code>请求接口</code>、<code>获取最新信息</code>等，那么分别是什么以及有什么原则呢？下面分别讨论。</p>
<h4 id="2_1">2）哪一方负责创建接口？</h4>
<p>在讨论需求的时候，开发会问哪方创建接口呢？有时候只知道需要建接口，不知道哪个系统来建。可以这样理解，如果把数据源比成一缸水，那么接口就像是凿的一个口，口只能是在缸上面的。所以接口必须是在被请求的数据源这边，由被请求的一方定义接口。</p>
<p>注意，这里的数据源是相对的数据源，就是被请求的一方就是数据源方。实际上可能目标数据在请求方。比如例子中也可以是OA系统请求订单系统，但是如果这样的话，接口就是订单系统创建了，因此确切说是被请求的一方创建接口。</p>
<h4 id="3">3）什么是定义接口</h4>
<p>定义接口，其实就是定义缸上的出水口。口的大小、滤网、放水的频率等…就是个规则。这个规则约定了哪些数据是需要流过去，以及流过去的条件（像门禁密码一样）。</p>
<p>定义接口就是<code>设定口令</code>、<code>数据范围</code>、<code>推送前的筛选</code>、<code>转化运算规则</code>等，这是接口的核心内容。</p>
<h4 id="4">4）数据在哪一方做转义？</h4>
<p>某些时候，数据从源头到应用端不是原封不动的，而是转化了。比如80分、90分都是及格，可能使用者只需要两个值：及格or不及格。</p>
<p>那么这就涉及到<strong>是在接收之前就转化为是否及格，还是接收之后自己转化的问题</strong>。考虑的依据主要是：<strong>该数据获取之后是否还有其他用处，只要有可能被二次使用，最好是取原数据</strong>。</p>
<p>提前转化的好处是，流转的数据会变得简单直接。但是需要注意的是转化后数据量不一定会少，比如：数据源是订单维度的，而目标是转化为订单+商品维度的数据，这就可能一条变多条了。</p>
<h4 id="5">5）是主动获取还是对方推送</h4>
<p>有时候开发还会问是对方推，还是我们主动去取，这就是接口的<code>post/get</code>方式问题。</p>
<p><strong>get是从服务器方请求数据</strong>，<strong>post是向服务器方传送数据</strong>。前面也提到了，接口交互数据可以是<code>主动推送</code>，也可以是<code>请求获取</code>。</p>
<ul>
<li><code>主动推送</code>一般是数据生产方一旦更新，则触发推送，将所需字段对应值传递过去；</li>
<li><code>请求获取</code>就是数据需求方传递请求参数（请求参数一般是若干条件，比如：账号+密码）。数据生产方则按照协议响应，给出满足条件的数据到请求方（也就是返回参数）。</li>
</ul>
<p>所以可以看出来，<strong>如果对时效要求高的，则建议生产方主动推</strong>。比如产生一个新用户，那么就可以理解把用户的信息主动推送给运营方使用。</p>
<p>如果是时效不高或者数据量大，则可以按一定频率主动请求，有利于系统负荷压力稳定。</p>
<p>在具体使用的时候，如果你对接的系统比较多，那么建议做一个公共接口，以后谁想用他们自己来对接就好了，不然就要来一个对接一次，麻烦还有风险。</p>
<p>另外，选择<code>post/get</code>，最终由双方开发权衡决定，但是一般而言：</p>
<ul>
<li>get传送的数据量较小，不能大于2KB。post传送的数据量较大，一般被默认为不受限制。</li>
<li>get安全性非常低，post安全性较高。</li>
</ul>
<h4 id="6">6）接口定义是开发的事情，但产品经理需要给出轮廓</h4>
<p>在输出方案的时候，接口定义的规则是什么？传参和返回参数是什么？重复传参时是跳过还是再次获取（一般都再获取）？必传参数是什么？是否回传接收结果给数据生产方？这些都是要有大致明确并传达给开发测试的。</p>
<p>比如：每小时/次取对方表中第一页最新的50条数据。超过的数据下个小时继续取，可以这样设计：</p>
<ul>
<li><strong>接口名称：</strong> 赔偿单转销售单接口</li>
<li><strong>接口描述：</strong> 用于供给给OMS/海淘oms调用赔偿但信息,当调用时, 返回状态为已完成的赔偿单数据。</li>
<li><strong>请求参数：</strong></li>
</ul>
<table>
<thead>
<tr>
<th>字段名称</th>
<th>字段描述</th>
<th>示例</th>
<th>逻辑验证规则</th>
</tr>
</thead>
<tbody>
<tr>
<td>Page</td>
<td>页码</td>
<td>2</td>
<td>必填，不可为空</td>
</tr>
<tr>
<td>Per_page</td>
<td>每一页记录数</td>
<td>30</td>
<td>必填，不可为空</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<td>* <strong>返回参数：</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>字段名称</th>
<th>字段描述</th>
<th>示例</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>msg</td>
<td>结果描述</td>
<td>请求数据成功</td>
<td>发生错误时为错误描述</td>
</tr>
<tr>
<td>total</td>
<td>总记录数</td>
<td>19000</td>
<td>发生错误时为<code>-1</code></td>
</tr>
<tr>
<td>data</td>
<td>本次请求记录数</td>
<td>[]</td>
<td>数据记录数组</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
</tbody>
</table>
<p>因为一些关键参数牵扯到业务的唯一性维度，这些都在产品经理调研的时候获知的，而这些可能开发根本不知道，因此产品经理要给出轮廓和大概方向。</p>
<h4 id="7">7）数据流转的时效</h4>
<p>接口创建之后，如果是接收的对方数据库中的信息，那么上线之后，要考虑先进行数据的初始化（保持基础数据一致），然后确保后续双方是同步的。</p>
<p>同步的机制和要求是在定义方案的时候就确定的，那么怎么确保同步呢？方法是两种：<code>触发式</code>和<code>定时任务</code>。</p>
<ul>
<li><strong>触发式</strong>：就是一旦一个参数值满足条件，则触发同步；</li>
<li><strong>定时任务式</strong>：一般用在不知道数据源什么时候更新，需求方就要设置一个定时任务的脚本，隔一段时间查询一次，请求的频率需要与更新的频率相协调。</li>
</ul>
<h4 id="8">8）接口的优缺点</h4>
<ul>
<li><strong>优点</strong>：时效性强，可以触发式实时问答。容易控制权限，通过传输层协议https，加密传输的数据，使得安全性提高。<strong>通用性比较强</strong>，无论客户端是<code>.net架构</code>，<code>java</code>，<code>python</code> 都是可以的。</li>
<li><strong>缺点</strong>：服务器和客户端必须同时工作，当服务器端不可用的时候，整个数据交互是不可进行。当传输数据量比较大的时候，严重占用网络带宽，可能导致连接超时。使得在数据量交互的时候，服务变的很不可靠。</li>
</ul>
<h4 id="9">9）相关概念扩展</h4>
<ul>
<li><strong>API</strong>：即“<code>应用程序编程接口</code>”，是一些预先定义的函数，无需访问源码或理解内部工作机制的细节，即可调用的对象。比如和<code>Windows</code>系统沟通，需要调用<code>Windows</code>提供的<code>API</code>。和新浪微博进行沟通，需要调用新浪微博提供得<code>Api</code>，其实它就是一个软件系统对其他软件系统提供得服务。</li>
<li><strong>open api</strong>：是指<code>对外开发的接口</code>，比如<code>百度地图API</code>、<code>facebook API</code>等。</li>
<li><strong>SDK</strong>：即“<code>软体开发工具包</code>”, 可以理解为<code>api</code>的集合，也就是封装后的<code>API包</code>，功能更完善。</li>
<li><strong>http接口</strong>：是基于接口的传输方式（<code>HTTP</code>协议）来命名的，当然也有基于其他协议传输的接口。</li>
</ul>
<p>比如：</p>
<ul>
<li>和<code>Windows系统</code>沟通，需要调用<code>Windows的API</code>（<code>CreateWindowEx</code>, <code>bitblt</code>,等等），是<code>C语言函数形式的接口</code>。</li>
<li>和<code>.Net框架</code>进行沟通，需要调用<code>.Net</code>提供得<code>Api</code>，是以<code>C#</code>，<code>VB函数/类形式</code>的接口。和新浪微博进行沟通，需要调用新浪微博提供得<code>Api</code>，是以<code>Http请求形式</code>的接口。</li>
<li><code>API接口</code>的叫法相对<code>http接口</code>叫法更笼统和概念化一些。因此在写方案的时候，<code>http接口</code>和<code>API接口</code>都可以，在具体的场景开发都可以理解的。</li>
</ul>
<h3 id="2_2">2. 数据库对库同步</h3>
<p>接口完成的是信息的传输，相对来说比较保守，易于保护敏感信息。而数据库同步实际就是表对表的共享，相对接口就大方多了，因此多发生在企业内部两小无猜的系统之间。</p>
<p>数据库同步有这么几种办法：</p>
<h4 id="1_3">1）使用中间表</h4>
<p>例如：B系统要用A系统的数据，可以新建一个数据库DB，A系统将数据写入DB，B系统再到数据库中读取数据。</p>
<p>也就是将数据放进一个<code>中间表</code>中，A、B两个系统都对这个表有访问权限，这样的好处就是<strong>选择性地将一大批数据共享出去</strong>。</p>
<h4 id="2_3">2）直接调取对方数据表</h4>
<p>这个方式就是在B系统在开发时，在代码中加载A系统的数据表，直接从数据表中取数据。这就是<strong>实时拉取对方的数据</strong>，B系统自己本地不做表保存。比较省事, 但是<strong>耦合性较大</strong>，数据量大的时候不建议。</p>
<h4 id="3_1">3）同步对方的数据表</h4>
<p>直接将对方的数据表copy一份过来，并保持<code>实时同步</code>，<code>otter</code>技术就是常用的一个方法。</p>
<p><code>otter</code>可以将<code>mysql</code>的数据同步至另外<code>mysql</code>或者<code>oracle</code>，也支持双向同步（即A库同步给B库，B库也同步给A库）、<code>文件同步</code>等，<strong>主要应用是多数据中心、BI系统抽取数据、灾备</strong>。</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../imgs/20211206-otter%E7%A4%BA%E4%BE%8B.png"><img alt="otter示例" src="../imgs/20211206-otter%E7%A4%BA%E4%BE%8B.png"/></a></p>
<p>该方式需要<code>DB</code>协助配置。也就是做了一个<code>mysql</code>的同步平台（带WEB管理界面），在界面上，你可以定义相应的映射规则，<code>otter进程</code>就会根据你定义的规则<code>读取binlog</code>，并更新到目标库中去。</p>
<p>该方式<strong>主要用于内部系统之间库对库的传输</strong>（一般只有公司内部才这样做），可以实现数据的相互同步更新。建议应用在数据量大的时候，或者基础数据对周边兄弟系统提供基础支持的时候。优点是占用资源少，交互更加简单可靠。</p>
<p>当连接B的系统越来越多的时候，由于数据库的连接池是有限的，导致每个系统分配到的连接不会很多，当系统越来越多的时候，可能导致无可用的数据库连接。</p>
<p>这时候<code>otter</code>比较适合。而两个不同公司的系统，不太会开放自己的数据库给对方连接，因为这样会有安全性影响。</p>
<h3 id="3_2">3. 文件包共享方式</h3>
<p>一些第三方公司为了保密，不愿意提供接口，那么会把文件存在类似网盘或网页上，供需求方下载。</p>
<p>双方系统约定文件<code>服务器地址</code>、<code>密码</code>、<code>文件命名规则</code>、<code>文件内容格式</code>等，通过上传文件到文件服务器，进行数据交互，对大数据量的也很适合。这就是一种<code>异步</code>的上传下载机制，双方的操作割裂开，并且一旦上传可以被<code>多个需求方</code>使用。</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../imgs/20211206-SFTP%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB.jpg"><img alt="SFTP文件共享" src="../imgs/20211206-SFTP%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB.jpg"/></a></p>
<p>比如：第三方支付公司与需求方约定好<code>SFTP服务器</code>（一种文件服务器，可以理解为网盘）的账号密码，然后支付公司将账单数据上传到<code>SFTP服务器</code>上，那么需求方就可以登陆<code>SFTP客户端</code>，进行<code>下载</code>、<code>解析</code>，然后保存使用。这也实现了数据在服务器之间的传输。</p>
<p>实际上这些数据本身也是加密的，所以只有协议的公司才能拿到解码钥匙。长期合作的公司就会持续更新，授权的公司就可以持续下载和解析。这里就有一个<code>下载频率</code>的问题，一般使用定时任务按一定频率去下载。并且要考虑丢包的机制。</p>
<p>案例：</p>
<p>到<code>SFTP服务器``抓取并解析``WP支付平台</code>的账单明细，方案如下：到<code>SFTP服务器</code>找到文件路径，筛选出需要的类型文件，打开文件，按规则解析所需的字段，对应写入本地数据表。</p>
<p>脚本执行逻辑：每次<code>抓取</code>路径下‘修改时间’为前一天的文件。（这里有个隐患：如果出了故障，可能某天的数据就漏了）。</p>
<p>问题：怎么防止丢抓呢？</p>
<p>分析：因为是外部数据，所以这里无法对源数据做“是否被抓取过”的标注，因此建议防丢方案是增加<code>断抓补抓机制</code>。</p>
<p><strong>断抓补抓机制</strong>：比如4号抓了修改时间为3号的数据。5号断抓，则6号继续抓取4、5号的数据。<code>断抓补抓机制</code>就是说一旦某一天的数据中断了，发现不连续，那么系统就自动在下次重新抓一次，看看是否能补上。直到三次都未取到，则不再补救。</p>
<p>该方案可以降低我方抓取故障导致的抓空情况。有时候开发人员懒省事不愿意考虑这么多，这时候产品经理要提醒他。</p>
<h3 id="4-mqmessage-queue">4. 消息队列MQ（Message Queue）</h3>
<h4 id="1mq">1）MQ概念</h4>
<p><code>消息队列</code>技术是<code>分布式应用间交换信息</code>的一种技术。目前市场上有很多开源的<code>jms</code>消息中间件，比如<code>ActiveMQ</code>, <code>OpenJMS</code>。</p>
<p>简单说就是<strong>一方不断把信息推到队列中，像排队进隧道一样，另一方依次消费这些信息</strong>。消息队列可驻留在内存或磁盘上，队列存储消息直到它们被应用程序读走。</p>
<p>该方式更<strong>适用于公司内部，数据量大，规律性强，批量往来的数据</strong>。<strong>主要解决应用解耦，异步消息，<code>流量削锋</code>等问题</strong>。</p>
<h4 id="2_4">2）以异步处理举例说明</h4>
<p>用户注册后，需要发注册邮件和注册短信。传统的做法有两种：</p>
<ul>
<li><strong>串行方式</strong>：将注册信息写入数据库成功后，发送注册邮件，再发送注册短信。以上三个任务全部完成后，返回给客户端。
  <a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../imgs/20211206-%E4%BC%A0%E7%BB%9F%E4%B8%B2%E8%A1%8C%E6%96%B9%E5%BC%8F.png"><img alt="传统串行方式" src="../imgs/20211206-%E4%BC%A0%E7%BB%9F%E4%B8%B2%E8%A1%8C%E6%96%B9%E5%BC%8F.png"/></a></li>
<li><strong>并行方式</strong>：将注册信息写入数据库成功后，发送注册邮件的同时，发送注册短信。以上三个任务完成后，返回给客户端。与串行的差别是，并行的方式可以<code>提高处理时间</code>。
  <a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../imgs/20211206-%E4%BC%A0%E7%BB%9F%E5%B9%B6%E8%A1%8C%E6%96%B9%E5%BC%8F.png"><img alt="传统并行方式" src="../imgs/20211206-%E4%BC%A0%E7%BB%9F%E5%B9%B6%E8%A1%8C%E6%96%B9%E5%BC%8F.png"/></a></li>
</ul>
<p>假设三个业务节点每个使用50毫秒钟，不考虑网络等其他开销，则串行方式的时间是150毫秒，并行的时间可能是100毫秒。</p>
<p>因为CPU在单位时间内处理的请求数是一定的，假设CPU1秒内吞吐量是100次。则串行方式1秒内CPU可处理的请求量是7次（1000/150）。并行方式处理的请求量是10次（1000/100）</p>
<p><strong>小结</strong>：如以上案例描述，传统的方式系统的性能（并发量，吞吐量，响应时间）会有瓶颈，如何解决这个问题呢？</p>
<p>引入消息队列，异步处理，改造后的架构如下：</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../imgs/20211206-%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E6%96%B9%E5%BC%8F.jpg"><img alt="消息队列方式" src="../imgs/20211206-%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E6%96%B9%E5%BC%8F.jpg"/></a></p>
<p>按照以上约定，用户的响应时间相当于是注册信息写入数据库的时间，也就是50毫秒。</p>
<p>注册邮件，发送短信写入消息队列后，直接返回，因此写入消息队列的速度很快，基本可以忽略，因此用户的响应时间可能是50毫秒。因此架构改变后，系统的吞吐量提高到每秒20QPS。比串行提高了3倍，比并行提高了两倍。</p>
<p>在设计方案的时候要注意异常情况的处理机制，比如：首次消费失败？</p>
<p>如果第一次数据消费的时候，无法识别没有匹配上，但是又想下次再消费一次看是否匹配的上怎么办？可以设定机制：无法识别的则重新插到队列后面继续推送。</p>
<p>如果一直循环仍消费不掉信息积压怎么办？</p>
<p>设定处理机制：超过一定积压数据量或者循环时间过长则进行报警。</p>
<h4 id="mq">MQ、文件包共享、接口的对比</h4>
<p><code>MQ</code>推送过去之后，是否推送成功无需对方再用<code>MQ</code>返回，因为推到中间站就意味着我方能做的事情已经做完。</p>
<p>而接口是一来一往才知道是否成功的，也就是要返回一个信息。这点与<code>MQ</code>是不一样的。但是如果非要对方再返回是否接受成功的话，那么就要做<code>反向MQ</code>，这相当于另一个<code>独立的MQ</code>。</p>
<p>文件包共享也不需要反馈机制，因此传到了文件服务器之后，数据方的事情就做完了。队列的一个信息只能被消费一次，不同系统不能共同消费一个队列。因此如果对接多个系统则要多次创建<code>MQ</code>。而接口可以创建一个，让其他很多系统调取。</p>
<p>在订单系统对接各个销售网站和平台的时候就可以采用这样的机制，避免多次对接。文件包共享也是可以上传一次，供多个需求方下载。这点和接口有相似之处，是<code>MQ</code>所不具备的。</p>
<h3 id="5_1">5. 其他手段</h3>
<p>数据传输包含了数据信息的获取和写入，其实除了线上的自动机制，还有很多土办法，在后端产品系统中也是常使用的。</p>
<h4 id="1_4">1）导入导出</h4>
<p>场景：</p>
<blockquote>
<p>没有办法做系统之间的对接，但是线下能获得数据。
数据量不太大，且有规则数据，则可以通过导入的方式。</p>
</blockquote>
<p>文档一般用<code>csv</code>格式，该格式文件较小，兼容性好，然后需要定义好<code>excel</code>表格对应字段的关系，比如A列对应字段‘name’，B列对应字段’age’。</p>
<p>上传时需要对<code>文件检验</code>，比如格式不对、必填项为空等，建议一旦一处错误，就全部不予导入。并返回错误提示，修改后继续导入。</p>
<p>若数据太大（与服务器的性能也有关系，比如超过一万条），可以采用异步上传机制，就是上传之后不立即执行写入，而是后台自动分批写入。</p>
<h4 id="2_5">2）爬取</h4>
<p>作为数据需求方，获取数据可以通过<code>协商接口的方式</code>、<code>SFTP解析</code>的方式、或者<code>直接爬取</code>的方式。</p>
<p>比如需要获取第三方网站商标库中最新商标名称、注册地、<code>logo</code>、授权期限等信息，如果该网站不给于开放的接口授权，可能就需要我们开发写爬虫代码爬取（当然有的商业数据也是带有反爬机制的，这就看谁道高一尺魔高一丈了）。</p>
<h2 id="_5">三、数据传输的处理机制</h2>
<h3 id="1_5">1. 数据同步的触发机制</h3>
<p>前面提到了数据获取的方式，那么数据获取频次或者触发机制是怎么样的呢？这要<strong>根据<code>应用场景</code>来设定方案，但是一般都是要求持续获取的</strong>。</p>
<p>一种方式是<code>操作事件触发</code>，这种的<code>时效性比较高</code>，但是也会由于并发而增加系统负荷。比如页面的按钮点击则触发传递最新状态。</p>
<p>另一种方式是<code>采用异步机制</code>。这种<code>对时效要求不高</code>。比如使用脚本监控，设定脚本的运行频率，当读取到更新时间为频宽内的数据，则将其捕获并传输。定时脚本也叫<code>定时任务</code>等，定时脚本在后端是很常用的。</p>
<p>比如说每次获取A系统6小时内更新的数据，那么每2小时取一次的话是没问题的。但是若每7小时获取一次就会漏掉1小时的数据。因此一定是每次获取的数据时间区间，要高于数据获取的时间间隔。</p>
<p>当然用时间是一种维度，更安全的是用<code>标示性字段</code>。比如每次获取is_got为0的数据。前台是is_got做表索引（索引前面讲到过），这样遍历（遍历约等于全表查询）数据库的时候就不会太慢。</p>
<h3 id="2_6">2. 是否异步执行数据处理</h3>
<p>如果获取后还要在本地进行规则运算，则最好先落地到<code>中间表</code>，再由<code>中间表</code>写入最终表，也就是异步写入。</p>
<p>比如：按照订单+包裹号维度，从物流系统获取运费到财务系统，然后财务系统再将其分摊到包裹的商品上面，算出每个商品分摊的运费金额。</p>
<p>这时候就很容易出错，因为分摊规则是个算法，算法就带有规则的可变动性。一旦分摊规则的参数不准确，或者算法结构变化，都会导致最终分摊的运费金额错误，那么这时候追查错误原因并修复数据就很麻烦。</p>
<p>所以在进行分摊之前，先落地到财务系统的临时表（<code>中间表</code>）中，然后获取数据完成，再进行写入分摊运费的操作。</p>
<p>除了上述方便查错误原因外（有种数据清洗的意思），这种异步操作同时也确保了较少的<code>偶联</code>，不至于一个环节出错，则联动出错。同时它作为一个基础数据，也可以被其他功能调用。若数据量万级以上的，必须这样做。</p>
<h3 id="3_3">3. 判重机制</h3>
<p>数据通道搭建好之后，数据流往往是持续获的。而数据源在别人那里，可能会被增删改，因此常常有相似或相关的数据进来。在写入本地表的时候，不管是覆盖、更新还是插入，都是以确定若干字段做为<code>判重</code>的标示为前题的。</p>
<p>比如职工信息表：（姓名+手机号+性别+家乡+身份证号）。（姓名+手机号+性别+家乡）这几个字段对一个职工不一定唯一，但是身份证号就是唯一的。因此如果我们更新这里的数据，就以身份证号为唯一标示。</p>
<p>比如获取到同一个身份证号的手机号与我们的数据库的不同，则更新。遇到我们的数据库不存在的身份证号码则插入。</p>
<p>某些时候无法确定那几个是唯一字段，则可以添加一个备用字段，人为定义其取值规则，然后作为去重字段，比如这个字段叫<code>unique_code</code>，取数据源表的<code>主键+日期</code>，（或者直接就取源表的<code>id</code>，也就是外键）。</p>
<p>有了<code>判重</code>字段（也就是数据唯一的字段），就可以进行更新、插入或者跳过规则设定了。</p>
<p><strong>注意</strong>：若一段时间之后，改变了表的去重规则，则需要考虑到历史数据对新数据的影响，因为二者的判重维度不一样，可能会进来和以前的历史数据冲突的交叉数据。</p>
<h3 id="4_1">4. 获取到数据之后，如果使用?</h3>
<p>一种是直接在页面展示，<code>不保存在本地数据库中</code>。相当于每刷新一次页面则通过接口调取一次对方的数据展示。但这种从性能和场景上都是比较少的，一般都是先保存到本地数据库上，自己本地各种调用。</p>
<p>另一种对于<code>保存到本地的情况</code>，有两个问题要考虑：是否异步保存，和如何确保同源同步。</p>
<h3 id="5_2">5. 处理日志</h3>
<p><strong>数据日志</strong>：目的是记录数据的来龙去脉，追溯以分析问题，日志要记录三个主要事项：<code>数据源系统是否提供数据</code>、<code>目标系统是否接收到数据</code>、<code>目标系统是否写入了数据</code>。</p>
<p>产品经理告诉开发加数据捕获日志的时候，需要告知是否存到表里，因为系统一般都有一个类似缓存一样的日记，只是会定期清理的，只有保存下来才能一直记录和追溯。</p>
<p>开发后台本身是有数据<code>log日志</code>的，因为<code>log4j</code>开源代码定义了5个主要级别的<code>log</code>：<code>FATAL</code>、<code>ERROR</code>、<code>WARN</code>、<code>INFO</code>、<code>DEBUG</code>，一般情况下，开发都会自觉配置<code>INFO</code>或<code>DEBUG</code>级别的日志，以方便查数据。</p>
<p>但是代码中的<code>log</code>保存时间不会太长，比如一个月就会清除了。因此如果需要保留的时间长，则可以将其保存到本地数据库。</p>
<p>根据实际需要，存了数据库就可以做成页面，展示给用户看，比如可以从以下维度展示：</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../imgs/20211206-%E6%95%B0%E6%8D%AE%E5%AF%B9%E6%8E%A5%E6%97%A5%E5%BF%97%E5%B1%95%E7%A4%BA%E7%BA%AC%E5%BA%A6.jpg"><img alt="数据对接日志展示纬度" src="../imgs/20211206-%E6%95%B0%E6%8D%AE%E5%AF%B9%E6%8E%A5%E6%97%A5%E5%BF%97%E5%B1%95%E7%A4%BA%E7%BA%AC%E5%BA%A6.jpg"/></a></p>
<h2 id="_6">四、数据传输的注意事项</h2>
<h3 id="1_6">1. 目标数据表最好和中间表的维度一致</h3>
<p>假设从<code>A系统</code>获取的数据存入<code>B系统</code>，先落地到<code>中间表b</code>，然后经过一些列运算后将数据<code>从b写入到b'</code>表。注意<code>b和b’表</code>的<code>去重字段</code>要对应起来，并传递下去。因为维度相同，做到一对一，方便实现异常数据溯源。</p>
<h3 id="2_7">2. 不同入口写入同一类型数据时，如何互相去重？</h3>
<p><strong>案例</strong>：有新旧两个不同的写入程序，写数据到利润表，写入的都是‘退件入库’利润类型，是殊途同归。不巧的是两个写入入口各自有本身的<code>去重规则</code>，彼此去重的规则不能通用：假设<code>入口1</code>对应的去重字段是<code>A+B</code>，<code>入口2</code>写入的去重字段是<code>B+C</code>。</p>
<p>这就意味着同一个数据如果分多次写入，有可能从两个入口都会写入。如何<code>实现避免重复写入</code>是核心问题。</p>
<p><strong>首先</strong>我们考虑的是，如果一条源信息从一个入口已经写入了利润表，那么就不能从另一个入口再写。</p>
<p><strong>其次</strong>，如果从<code>入口1</code>写入一次，那么后面源数据更新再次触发写入的时候（判重，确定是插入还是更新），就还要从<code>入口1</code>写。也就是一旦从一个入口写入，后面该数据的变更触发的再次写入也只能从这个入口继续变更。</p>
<p>只有这样才能保证这个数据不重复。好比先找到是哪家的孩子，再确定是第几个孩子，且只能是基于这家内部去确认。</p>
<p><strong>方案一</strong>：比如<code>入口1</code>遇到一个待写入的数据，则先按自己的去重字段<code>A+B</code>校验。如果发现不存在该数据，则再按照<code>入口2</code>的去重字段<code>B+C</code>（这个事先是知道的）判断是否存在，若也不存在，则回到<code>入口1</code>写入。若存在，则<code>入口1</code>不在写入，且结束进程（因为入口2会触发写入该数据的）。</p>
<p><strong>方案二</strong>：比如<code>入口1</code>遇到一个待写入的数据，则先按<code>入口2</code>的去重字段<code>B+C</code>校验。</p>
<p>查看<code>对方入口</code>下是否有重复数据，有，则本入口不写（继续按对方的路径写）；无，则自己的路径写。显然方案二的判断路径更短，相对好一点。</p>
<h3 id="3_4">3. 同步基础数据的时候是否提前过滤</h3>
<p>这个在上面内容中也提到过。比如：A系统维护了员工的基础信息，其中有个状态为【是否有效】，只有有效状态的才能在整个系统中看得到才是生效的。B系统要取用员工信息的数据，但不做数据维护。那么是否只取启用状态的数据到B，还是不区分状态都取呢？</p>
<p>答案是：在数据量差异不大的情况下，取<code>全量</code>。</p>
<p>原因之一就是，若启用状态的用户忽然被A系统禁用，那么可能该用户在B系统的生产数据报错，这时候到中间表看状态就可以看出来问题，而不需跨系统或跨部门沟通查证。</p>
<p>参考自: <a href="http://www.woshipm.com/data-analysis/4345387.html" target="_blank">系统之间的数据对接和传输，产品经理视角的万字总结</a></p>
<hr/>
<div class="md-source-file">
<small>
    
      最后更新:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2023年2月23日</span>
<br/>
        创建日期:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2023年2月23日</span>
</small>
</div>
</article>
</div>
</div>
<a class="md-top md-icon" data-md-component="top" hidden="" href="#">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
            回到页面顶部
          </a>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "toc.follow"], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
<script src="../../../assets/javascripts/bundle.2a6f1dda.min.js"></script>
<script src="../../../javascripts/mathjax.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="https://unpkg.com/mermaid@9.4.0/dist/mermaid.min.js"></script>
<script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>
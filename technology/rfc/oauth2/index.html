
<!DOCTYPE html>

<html class="no-js" lang="zh">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="hellowac的工作学习生活笔记" name="description"/>
<link href="../../security/sqlmap/" rel="prev"/>
<link href="../rfc6749/" rel="next"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-9.0.13" name="generator"/>
<title>oauth2学习笔记 - 我的工作学习生活笔记</title>
<link href="../../../assets/stylesheets/main.ffa9267a.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.a0c5b2b5.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src="../../../assets/javascripts/glightbox.min.js"></script></head>
<body data-md-color-accent="red" data-md-color-primary="default" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#oauth2">
          跳转至
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--lifted" data-md-component="header">
<nav aria-label="页眉" class="md-header__inner md-grid">
<a aria-label="我的工作学习生活笔记" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="我的工作学习生活笔记">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            我的工作学习生活笔记
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              oauth2学习笔记
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="搜索" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="搜索" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="查找" class="md-search__options">
<button aria-label="清空当前内容" class="md-search__icon md-icon" tabindex="-1" title="清空当前内容" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/hellowac/hellowac.github.io/" title="前往仓库">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    hellowac的个人博客
  </div>
</a>
</div>
</nav>
<nav aria-label="标签" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../..">
      首页
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="../../python/">
        技术
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../read/english/bluelevel/">
        阅读
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../invest/webs/">
        理财
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../tools/repos/">
        工具
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../documents/docs/">
        文档
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../e-book/">
      电子书
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../other/front_links/">
        其他
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../about/">
      关于
    </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="导航栏" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="我的工作学习生活笔记" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="我的工作学习生活笔记">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    我的工作学习生活笔记
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/hellowac/hellowac.github.io/" title="前往仓库">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    hellowac的个人博客
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
        首页
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          技术
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          技术
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
          Python
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_1">
<span class="md-nav__icon md-icon"></span>
          Python
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/">
        安装
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/pip/">
        pip
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/stringio/">
        StringIO
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/flask/">
        flask
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/django/">
        django
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/logging/">
        logging
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/importlib/">
        importlib
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/pycrypto/">
        crypto
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/petl/">
        petl
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/psutil/">
        psutil
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/docx/">
        Docx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/excel/">
        Excel
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/reportlab/">
        reportlab
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/alembic/">
        alembic
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/sqlalchemy/">
        sqlalchemy
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/useful_functions/">
        常用函数合集
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          Linux
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
          Linux
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../linux/usage_source/">
        常用资源
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../linux/port/">
        端口占用查找
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../linux/disk-mount/">
        linux磁盘挂载
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../linux/shell-scripts/">
        shell脚本实战
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          C
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
          C
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../C/c/">
        C基础
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
          前端知识
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
          前端知识
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../front/base/">
        基础
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../front/project/">
        工程化流程
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../front/version/">
        包版本知识
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../front/package/">
        package.json知识
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../front/webassembly/">
        WebAssembly
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
          服务组件
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_5">
<span class="md-nav__icon md-icon"></span>
          服务组件
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/zookeeper/">
        zookeeper
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/nginx/">
        nginx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/supervisor/">
        supervisor
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/rabbitmq/">
        rabbitmq
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/kafka/">
        kafka
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_5_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_5_6" id="__nav_2_5_6_label" tabindex="0">
          无头浏览器
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_5_6_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_5_6">
<span class="md-nav__icon md-icon"></span>
          无头浏览器
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../unheadchrome/openchrome/">
        openchrome
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../unheadchrome/build_env/">
        环境搭建
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
          数据库
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_6">
<span class="md-nav__icon md-icon"></span>
          数据库
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../database/clickhouse/">
        ClickHouse
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_6_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_6_2" id="__nav_2_6_2_label" tabindex="0">
          MySQL
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_6_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_6_2">
<span class="md-nav__icon md-icon"></span>
          MySQL
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../database/mysql8_install/">
        mysql8
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../database/mysql/">
        常用操作
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_6_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_6_3" id="__nav_2_6_3_label" tabindex="0">
          ElasticSearch
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_6_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_6_3">
<span class="md-nav__icon md-icon"></span>
          ElasticSearch
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../database/elasticsearch_py/">
        elasticsearch-py
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../database/es_dsl/">
        elasticsearch-dsl
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../database/es_aggs/">
        elasticsearch-aggs
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
          安全渗透
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_7_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_7">
<span class="md-nav__icon md-icon"></span>
          安全渗透
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../security/thc-hydra/">
        hydra
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../security/sqlmap/">
        sqlmap
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
          RFC标准
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_8_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_8">
<span class="md-nav__icon md-icon"></span>
          RFC标准
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          oauth2学习笔记
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        oauth2学习笔记
      </a>
<nav aria-label="目录" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      目录
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#_1">
    参考资料
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
    初识
  </a>
<nav aria-label="初识" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_3">
    基本流程
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_4">
    密码与令牌
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_5">
    四种方式
  </a>
<nav aria-label="四种方式" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#authorization-code-grant">
    第一种方式: 授权码 (Authorization Code Grant)
  </a>
<nav aria-label="第一种方式: 授权码 (Authorization Code Grant)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_6">
    流程图
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_7">
    授权请求
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_8">
    授权响应
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_9">
    授权异常响应
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_10">
    访问令牌请求
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_11">
    访问令牌响应
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_12">
    访问令牌异常响应
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#implicit-grant">
    第二种方式: 隐藏式 (Implicit Grant)
  </a>
<nav aria-label="第二种方式: 隐藏式 (Implicit Grant)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_13">
    流程图
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_14">
    授权请求
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_15">
    请求令牌响应
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_16">
    错误响应
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_17">
    第三方示例
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#oauth-20">
    理解oauth 2.0
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../rfc6749/">
        Oauth2-RFC6749翻译
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../rfc6750/">
        Oauth2-RFC6750翻译
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
          知识概念
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_9_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_9">
<span class="md-nav__icon md-icon"></span>
          知识概念
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../concept/pc/">
        上位机简介
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concept/xaas/">
        xaas概念
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concept/xaas2/">
        一文搞懂什么是SaaS、BaaS、PaaS和IaaS
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concept/users/">
        统一用户管理
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concept/etl/">
        ETL数据处理
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concept/data_transfer/">
        数据传输和对接
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concept/understand_computer_system/">
        深入理解计算机系统
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_10" id="__nav_2_10_label" tabindex="0">
          其他
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_10_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_10">
<span class="md-nav__icon md-icon"></span>
          其他
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../other/embedded_industry/">
        嵌入式行业
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../other/apache_license2/">
        apache license2.0开源协议
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          阅读
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          阅读
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
          英语
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_1">
<span class="md-nav__icon md-icon"></span>
          英语
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/english/bluelevel/">
        BlueLevel
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/english/redlevel/">
        RedLevel
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/howtoreadbook/">
        如何阅读一本书
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/howtoavoid/">
        如何避免愚蠢的见识
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/placeofsoul/">
        灵魂的最高处
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/maliciousmatch/">
        恶意匹配
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
          沟通的艺术
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_6">
<span class="md-nav__icon md-icon"></span>
          沟通的艺术
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication01/">
        沟通入门
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication02/">
        看入人里:自我
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication03/">
        看入人里:知觉
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication04/">
        看入人里:情绪
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication05/">
        看出人外:语言
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication06/">
        看出人外:非语言沟通
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication07/">
        看出人外:倾听
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication08/">
        看人之间:沟通和关系的演变
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication09/">
        看人之间:人际沟通中的亲密关系
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication10/">
        看人之间:增进沟通气氛
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication11/">
        看人之间:处理人际冲突
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../read/book/artofcommunication12/">
        阅读总结
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          理财
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          理财
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../invest/webs/">
        理财网站
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          工具
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          工具
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/repos/">
        仓库合集
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/git1/">
        git 起步
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/git2/">
        git 基础
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/git3/">
        git 分支
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/git4/">
        git 服务器
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/git5/">
        git 分布式
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/git6/">
        git hub
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/git7/">
        git 工具
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/git8/">
        git 自定义
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/git9/">
        git 与其他系统
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/git10/">
        git 内部原理
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/gita1/">
        git 其他环境中使用
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/gita2/">
        git 应用中嵌入
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools/gita3/">
        git 命令
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          文档
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          文档
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../documents/docs/">
        文档合集
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../e-book/">
        电子书
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
          其他
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
          其他
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../other/front_links/">
        前端常用地址
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../other/back_links/">
        后端常用地址
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../other/other_links/">
        其他常用地址
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../other/become_leader/">
        成为高手秘籍
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../other/zym_weibo/">
        张一鸣微博
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../other/dynamic_business/">
        动态商业环境
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../other/honeypot_list/">
        蜜罐资源列表
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../other/bigdata_links/">
        大数据资源列表
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../about/">
        关于
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="目录" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      目录
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#_1">
    参考资料
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
    初识
  </a>
<nav aria-label="初识" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_3">
    基本流程
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_4">
    密码与令牌
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_5">
    四种方式
  </a>
<nav aria-label="四种方式" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#authorization-code-grant">
    第一种方式: 授权码 (Authorization Code Grant)
  </a>
<nav aria-label="第一种方式: 授权码 (Authorization Code Grant)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_6">
    流程图
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_7">
    授权请求
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_8">
    授权响应
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_9">
    授权异常响应
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_10">
    访问令牌请求
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_11">
    访问令牌响应
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_12">
    访问令牌异常响应
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#implicit-grant">
    第二种方式: 隐藏式 (Implicit Grant)
  </a>
<nav aria-label="第二种方式: 隐藏式 (Implicit Grant)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_13">
    流程图
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_14">
    授权请求
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_15">
    请求令牌响应
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_16">
    错误响应
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_17">
    第三方示例
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#oauth-20">
    理解oauth 2.0
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="oauth2">oauth2学习笔记</h1>
<h2 id="_1">参考资料</h2>
<ul>
<li><a href="https://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html">理解OAuth 2.0</a> - 阮一峰</li>
<li>一、<a href="https://www.ruanyifeng.com/blog/2019/04/oauth_design.html">OAuth 2.0 的一个简单解释</a> - 阮一峰</li>
<li>二、<a href="https://www.ruanyifeng.com/blog/2019/04/oauth-grant-types.html">OAuth 2.0 的四种方式</a> - 阮一峰</li>
<li>
<p>三、<a href="http://www.ruanyifeng.com/blog/2019/04/github-oauth.html">GitHub OAuth 第三方登录示例教程</a> - 阮一峰</p>
</li>
<li>
<p><a href="https://datatracker.ietf.org/doc/html/rfc6749#page-43">RFC6749</a> - Oauth 2.0 RFC标准</p>
</li>
<li>
<p><a href="https://github.com/jeansfish/RFC6749.zh-cn/blob/master/TableofContents.md">RFC6749-中文翻译</a> - github仓库</p>
</li>
<li>
<p><a href="https://github.com/pearzl/HTTP11_chinese">RFC7230-7237 - HTTP/1.1</a> - github仓库</p>
</li>
<li><a href="https://github.com/duoani/HTTP-RFCs.zh-cn">HTTP 相关的 RFCs 中英文对照</a> - github仓库 - 推荐</li>
</ul>
<!-- more -->
<h2 id="_2">初识</h2>
<h3 id="_3">基本流程</h3>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="http://www.plantuml.com/plantuml/png/SoWkIImgAStDuIh9BCb9jLB8Bot9CD8pUBcgvyNwngVpTpsRi-RPriRdAxgvk6gUhrdpP4Vdisaxds_U_Npt_1eki6Okg-TJDhzOl_rPNyUpkStMN3NAZdabcOMbgU4PcIMfDKztJNa-PGLCXzMplgLF-wU3b6ziikQoWZ0GMjFpSr9gWEgVTMol0HgySDsBTKlWYfzsjBrixGMgV3bpWZKNYibmnH1PkE8dkvSyx-onHd8xmYLJjZtjs01JK5oINy3ba9gN0WmB0000"><img alt="outh验证基本流程" src="http://www.plantuml.com/plantuml/png/SoWkIImgAStDuIh9BCb9jLB8Bot9CD8pUBcgvyNwngVpTpsRi-RPriRdAxgvk6gUhrdpP4Vdisaxds_U_Npt_1eki6Okg-TJDhzOl_rPNyUpkStMN3NAZdabcOMbgU4PcIMfDKztJNa-PGLCXzMplgLF-wU3b6ziikQoWZ0GMjFpSr9gWEgVTMol0HgySDsBTKlWYfzsjBrixGMgV3bpWZKNYibmnH1PkE8dkvSyx-onHd8xmYLJjZtjs01JK5oINy3ba9gN0WmB0000"/></a></p>
<p>powered by <a href="https://plantuml.com/zh/activity-diagram-beta">platuml</a>(活动图)</p>
<h3 id="_4">密码与令牌</h3>
<p>令牌（token）与密码（password）的作用是一样的，都可以进入系统，但是有三点差异。</p>
<ol>
<li>令牌<code>是短期的</code>，到期会自动失效，用户自己无法修改。密码一般长期有效，用户不修改，就不会发生变化。</li>
<li>令牌<code>可以被数据所有者撤销</code>，会立即失效。以上例而言，用户可以随时取消第三方系统的令牌。密码一般不允许被他人撤销。</li>
<li>令牌<code>有权限范围</code>（scope），比如只能进行读取，不能写入，不能操作。对于网络服务来说，只读令牌就比读写令牌更安全。密码一般是完整权限。</li>
</ol>
<p>上面这些设计，保证了令牌既可以让<strong>第三方应用获得权限，同时又随时可控，不会危及系统安全</strong>。这就是 <code>OAuth 2.0</code> 的3个 <code>优点</code>。</p>
<h2 id="_5">四种方式</h2>
<p>RFC 定义:</p>
<div class="admonition info">
<p class="admonition-title">RFC6749</p>
<p>The OAuth 2.0 authorization framework enables a third-party application to obtain limited access to an HTTP service, either on behalf of a resource owner by orchestrating an approval interaction between the resource owner and the HTTP service, or by allowing the third-party application to obtain access on its own behalf.  This specification replaces and obsoletes the OAuth 1.0 protocol described in <a href="https://datatracker.ietf.org/doc/html/rfc5849">RFC 5849</a>.</p>
<p>翻译:</p>
<p>OAuth 2.0 授权框架 使 第三方应用程序 能够代表 资源所有者 通过 协调资源所有者 和 HTTP服务之间 的批准交互，或允许第三方应用程序获得对 HTTP 服务的有限访问 以自己的名义获取访问权限。 该规范取代并废弃了 <a href="https://datatracker.ietf.org/doc/html/rfc5849">RFC 5849</a> 中描述的 OAuth 1.0 协议。</p>
</div>
<p>同时 <code>RFC 6749</code> 定义了 四种获取令牌的方式</p>
<ol>
<li>授权码（<a href="https://datatracker.ietf.org/doc/html/rfc6749#page-24">authorization-code</a>）</li>
<li>隐藏式（<a href="https://datatracker.ietf.org/doc/html/rfc6749#page-31">implicit</a>）</li>
<li>密码式（<a href="https://datatracker.ietf.org/doc/html/rfc6749#page-37">password</a>）</li>
<li>客户端凭证（<a href="https://datatracker.ietf.org/doc/html/rfc6749#page-40">client credentials</a>）</li>
</ol>
<p>同时该协议还强调：</p>
<p>不管哪一种授权方式，第三方应用申请令牌之前，都必须先到系统备案，说明自己的身份，然后会拿到两个身份识别码：<code>客户端ID</code>（client ID）和<code>客户端密钥</code>（client secret）。这是为了防止令牌被滥用，没有备案过的第三方应用，是不会拿到令牌的。 参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#page-13">Client Registration</a></p>
<h3 id="authorization-code-grant">第一种方式: 授权码 (Authorization Code Grant)</h3>
<p><strong>授权码（<code>authorization code</code>）方式，指的是第三方应用先申请一个授权码，然后再用该码获取令牌。</strong> 标准参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#page-13">Authorization Code Grant</a></p>
<p>这种方式是最常用的流程，<code>安全性</code>也最高，它适用于那些有<code>后端</code>的 <code>Web应用</code>。授权码通过前端传送，令牌则是储存在后端，而且所有与资源服务器的通信都在后端完成。这样的前后端分离，可以避免令牌泄漏。</p>
<div class="admonition info">
<p class="admonition-title">RFC6749 - Authorization Code Grant <a href="https://datatracker.ietf.org/doc/html/rfc6749#page-13">https://datatracker.ietf.org/doc/html/rfc6749#page-13</a></p>
<p>原文:</p>
<p>The authorization code grant type is used to obtain both access tokens and refresh tokens and is optimized for confidential clients. Since this is a redirection-based flow, the client must be capable of interacting with the resource owner's user-agent (typically a web browser) and capable of receiving incoming requests (via redirection) from the authorization server.</p>
<p>翻译:</p>
<p>授权代码授予类型用于获取访问令牌和刷新令牌，并针对机密客户端进行了优化。 由于这是基于重定向的流程，因此客户端必须能够与资源所有者的用户代理（通常是 Web 浏览器）交互，并能够从授权服务器接收传入请求（通过重定向）。</p>
</div>
<h4 id="_6">流程图</h4>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../../svg/2021-12-07-Oauth2%E6%8E%88%E6%9D%83%E7%A0%81%E9%AA%8C%E8%AF%81%E6%B5%81%E7%A8%8B%E5%9B%BE.svg"><img alt="Oauth2.0授权码验证流程图" src="../../svg/2021-12-07-Oauth2%E6%8E%88%E6%9D%83%E7%A0%81%E9%AA%8C%E8%AF%81%E6%B5%81%E7%A8%8B%E5%9B%BE.svg"/></a></p>
<p>该流程图包含如下步骤:</p>
<div class="admonition info">
<p>原文:</p>
<ul>
<li>(A) The client initiates the flow by directing the resource owner's user-agent to the authorization endpoint.  The client includesits client identifier, requested scope, local state, and a redirection URI to which the authorization server will send the user-agent back once access is granted (or denied).</li>
<li>(B) The authorization server authenticates the resource owner (via the user-agent) and establishes whether the resource owner grants or denies the client's access request.</li>
<li>(C)  Assuming the resource owner grants access, the authorization server redirects the user-agent back to the client using the redirection URI provided earlier (in the request or during client registration).  The redirection URI includes an authorization code and any local state provided by the client earlier.</li>
<li>(D)  The client requests an access token from the authorization server's token endpoint by including the authorization code received in the previous step.  When making the request, the client authenticates with the authorization server.  The client includes the redirection URI used to obtain the authorization code for verification.</li>
<li>(E)  The authorization server authenticates the client, validates the authorization code, and ensures that the redirection URI received matches the URI used to redirect the client in step (C).  If valid, the authorization server responds back with an access token and, optionally, a refresh token.</li>
</ul>
<p>翻译:</p>
<ul>
<li>(A) <code>客户端</code>通过将<code>资源拥有者</code>的用户代理定向到授权端点来启动流程。 客户端包括其<code>客户端标识符</code>、<code>请求的范围</code>、<code>本地状态</code>和<code>重定向 URI</code>，一旦授予（或拒绝）访问权限，<code>授权服务器</code>会将用户代理发送回该 <code>URI</code>。</li>
<li>(B) <code>授权服务器</code>验证<code>资源拥有者</code>（通过<code>用户代理</code>）并确定<code>资源拥有者</code>是<code>授予</code>还是<code>拒绝</code>客户端的<code>访问请求</code>。</li>
<li>(C) 假设<code>资源拥有者``授予</code>访问权限，<code>授权服务器</code>使用之前提供的<code>重定向 URI</code>（在请求中或客户端注册期间）将用户代理重定向回<code>客户端</code>。 <code>重定向 URI</code>包括<code>授权码</code>和<code>客户端</code>之前提供的任何<code>本地状态</code>。</li>
<li>(D) 客户端通过包含在上一步中收到的<code>授权码</code>，从<code>授权服务器</code>的令牌端点<code>请求``访问令牌</code>。 发出请求时，<code>客户端</code>向<code>授权服务器</code>进行<code>身份验证</code>。 <code>客户端</code>包含用于获取通过验证的<code>授权码</code>的<code>重定向 URI</code>。</li>
<li>(E) <code>授权服务器</code>对<code>客户端</code>进行身份验证，验证<code>授权码</code>，并确保收到的<code>重定向 URI</code> 与<code>步骤 (C)</code> 中用于<code>重定向客户端的URI</code> 匹配。 如果有效，<code>授权服务器</code>将使用访问令牌和可选的<code>刷新令牌</code>进行响应。</li>
</ul>
</div>
<p>概括来说分为4个步骤：</p>
<ol>
<li>获取授权码</li>
<li>用户允许(或拒绝)授权</li>
<li>携带授权码请求令牌(拒绝授权后结束)</li>
<li>携带令牌请求数据或更新令牌</li>
</ol>
<h4 id="_7">授权请求</h4>
<p>原文参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-4.1.1" target="_blank">RFC6749</a></p>
<p>请求示例:</p>
<div class="highlight"><pre><span></span><code>GET<span class="w"> </span>/authorize?response_type<span class="o">=</span>code<span class="p">&amp;</span><span class="nv">client_id</span><span class="o">=</span>s6BhdRkqt3<span class="p">&amp;</span><span class="nv">state</span><span class="o">=</span>xyz<span class="p">&amp;</span><span class="nv">redirect_uri</span><span class="o">=</span>https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb<span class="w"> </span>HTTP/1.1
Host:<span class="w"> </span>server.example.com
</code></pre></div>
<p>参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>必须</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>response_type</td>
<td>是</td>
<td>值必须为 <code>code</code></td>
</tr>
<tr>
<td>client_id</td>
<td>是</td>
<td>客户端标识, 参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-2.2" target="_blank">Client Identifier</a></td>
</tr>
<tr>
<td>redirect_uri</td>
<td>否</td>
<td>重定向地址, 参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-3.1.2" target="_blank">Redirection Endpoint</a></td>
</tr>
<tr>
<td>scope</td>
<td>否</td>
<td>范围描述, 参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-3.3" target="_blank">Access Token Scope</a></td>
</tr>
<tr>
<td>state</td>
<td>否(推荐)</td>
<td>客户端用于维护请求和回调之间的状态的不透明值。 授权服务器在将用户代理重定向回客户端时包含此值。 该参数应该用于防止跨站点请求伪造，参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-10.12" target="_blank">Cross-Site Request Forgery</a></td>
</tr>
</tbody>
</table>
<h4 id="_8">授权响应</h4>
<p>原文参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-4.1.2" target="_blank">RFC6749</a></p>
<p>响应示例:</p>
<div class="highlight"><pre><span></span><code>HTTP/1.1<span class="w"> </span><span class="m">302</span><span class="w"> </span>Found
Location:<span class="w"> </span>https://client.example.com/cb?code<span class="o">=</span>SplxlOBeZQQYbYS6WxSbIA<span class="p">&amp;</span><span class="nv">state</span><span class="o">=</span>xyz
</code></pre></div>
<p>参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>必须</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>code</td>
<td>是</td>
<td>授权服务器生成的授权码。 授权代码必须在发布后不久到期，以降低泄漏风险。 推荐的最长授权代码生命周期为 10 分钟。 客户端不得多次使用授权码。 如果一个授权码被多次使用，授权服务器必须拒绝该请求并且应该撤销（如果可能）之前基于该授权码发出的所有令牌。 授权码绑定到客户端标识符和重定向 URI。</td>
</tr>
<tr>
<td>state</td>
<td>是</td>
<td>如果客户端授权请求中存在“state”参数。 从客户端收到的确切值。</td>
</tr>
</tbody>
</table>
<h4 id="_9">授权异常响应</h4>
<p>原文参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-4.1.2.1">RFC6749</a></p>
<p>响应示例:</p>
<div class="highlight"><pre><span></span><code>HTTP/1.1<span class="w"> </span><span class="m">302</span><span class="w"> </span>Found
Location:<span class="w"> </span>https://client.example.com/cb?error<span class="o">=</span>access_denied<span class="p">&amp;</span><span class="nv">state</span><span class="o">=</span>xyz
</code></pre></div>
<p>响应体包含:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>必须</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>error</td>
<td>是</td>
<td>一个单独的 ASCII编码的错误码，可选值: <code>invalid_request</code> 、<code>unauthorized_client</code> 、<code>access_denied</code> 、<code>unsupported_response_type</code> 、<code>invalid_scope</code> 、<code>server_error</code> 、<code>temporarily_unavailable</code></td>
</tr>
<tr>
<td>error_description</td>
<td>可选</td>
<td>可读的错误描述，用于协助客户端开发人员了解发生的错误。</td>
</tr>
<tr>
<td>error_uri</td>
<td>可选</td>
<td>可读的网页错误详细描述，用于向客户端提供开发人员提供有关错误的其他信息。</td>
</tr>
<tr>
<td>state</td>
<td>可选</td>
<td>如果客户端请求存在<code>state</code>参数，并且被服务器收到。</td>
</tr>
</tbody>
</table>
<h4 id="_10">访问令牌请求</h4>
<p>原文参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-4.1.2.1">RFC6749</a></p>
<p>请求示例:</p>
<div class="highlight"><pre><span></span><code>POST<span class="w"> </span>/token<span class="w"> </span>HTTP/1.1
Host:<span class="w"> </span>server.example.com
Authorization:<span class="w"> </span>Basic<span class="w"> </span>czZCaGRSa3F0MzpnWDFmQmF0M2JW
Content-Type:<span class="w"> </span>application/x-www-form-urlencoded

<span class="nv">grant_type</span><span class="o">=</span>authorization_code<span class="p">&amp;</span><span class="nv">code</span><span class="o">=</span>SplxlOBeZQQYbYS6WxSbIA
<span class="p">&amp;</span><span class="nv">redirect_uri</span><span class="o">=</span>https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb
</code></pre></div>
<p>请求体包含:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>必须</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>grant_type</td>
<td>是</td>
<td>值必须是 <code>authorization_code</code></td>
</tr>
<tr>
<td>code</td>
<td>是</td>
<td>从授权服务器收到的授权码。</td>
</tr>
<tr>
<td>redirect_uri</td>
<td>是</td>
<td>如果<code>redirect_uri</code>参数包含在<code>授权请求</code>中，并且它们的值必须相同。</td>
</tr>
<tr>
<td>client_id</td>
<td>是</td>
<td>如果客户端没有使用授权服务器进行身份验证时提供。</td>
</tr>
</tbody>
</table>
<h4 id="_11">访问令牌响应</h4>
<p>原文参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-4.1.2.1">RFC6749</a></p>
<p>响应示例:</p>
<div class="highlight"><pre><span></span><code>HTTP/1.1<span class="w"> </span><span class="m">200</span><span class="w"> </span>OK
Content-Type:<span class="w"> </span>application/json<span class="p">;</span><span class="nv">charset</span><span class="o">=</span>UTF-8
Cache-Control:<span class="w"> </span>no-store
Pragma:<span class="w"> </span>no-cache

<span class="o">{</span>
<span class="w">  </span><span class="s2">"access_token"</span>:<span class="s2">"2YotnFZFEjr1zCsicMWpAA"</span>,
<span class="w">  </span><span class="s2">"token_type"</span>:<span class="s2">"example"</span>,
<span class="w">  </span><span class="s2">"expires_in"</span>:3600,
<span class="w">  </span><span class="s2">"refresh_token"</span>:<span class="s2">"tGzv3JOkF0XG5Qx2TlKWIA"</span>,
<span class="w">  </span><span class="s2">"example_parameter"</span>:<span class="s2">"example_value"</span>
<span class="o">}</span>
</code></pre></div>
<p>请求体包含:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>必须</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>access_token</td>
<td>是</td>
<td>授权服务器颁发的访问令牌。</td>
</tr>
<tr>
<td>token_type</td>
<td>是</td>
<td>发行的令牌类型，值不区分大小写。参考:  <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-7.1">Access Token Types</a></td>
</tr>
<tr>
<td>expires_in</td>
<td>是(推荐)</td>
<td>访问令牌的生命周期（以秒为单位）。 例如，值“3600”表示访问令牌将在响应生成后的一小时内到期。 如果省略，授权服务器应该通过其他方式提供过期时间或记录默认值。</td>
</tr>
<tr>
<td>refresh_token</td>
<td>是</td>
<td>刷新令牌，可使用于相同授权的获取新的访问令牌。 参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-6">Refreshing an Access Token</a></td>
</tr>
<tr>
<td>scope</td>
<td>可选</td>
<td>如果与客户要求的范围相同； 否则，需要。 参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-3.3">Access Token Scope</a></td>
</tr>
</tbody>
</table>
<h4 id="_12">访问令牌异常响应</h4>
<p>原文参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-5.1">Error Response</a></p>
<p>响应示例:</p>
<div class="highlight"><pre><span></span><code>HTTP/1.1<span class="w"> </span><span class="m">400</span><span class="w"> </span>Bad<span class="w"> </span>Request
Content-Type:<span class="w"> </span>application/json<span class="p">;</span><span class="nv">charset</span><span class="o">=</span>UTF-8
Cache-Control:<span class="w"> </span>no-store
Pragma:<span class="w"> </span>no-cache

<span class="o">{</span>
<span class="w">  </span><span class="s2">"error"</span>:<span class="s2">"invalid_request"</span>
<span class="o">}</span>
</code></pre></div>
<p>响应体包含:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>必须</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>error</td>
<td>是</td>
<td>一个单独的 ASCII编码的错误码，可选值: <code>invalid_request</code> 、<code>invalid_client</code> 、<code>invalid_grant</code> 、<code>unauthorized_client</code> 、<code>unsupported_grant_type</code> 、<code>invalid_scope</code></td>
</tr>
<tr>
<td>error_description</td>
<td>可选</td>
<td>可读的错误描述，用于协助客户端开发人员了解发生的错误。</td>
</tr>
<tr>
<td>error_uri</td>
<td>可选</td>
<td>可读的网页错误详细描述，用于向客户端提供开发人员提供有关错误的其他信息。</td>
</tr>
<tr>
<td>state</td>
<td>可选</td>
<td>如果客户端请求存在<code>state</code>参数，并且被服务器收到。</td>
</tr>
</tbody>
</table>
<p><a href="https://www.ruanyifeng.com/blog/2019/04/oauth-grant-types.html" target="_blank">https://www.ruanyifeng.com/blog/2019/04/oauth-grant-types.html</a></p>
<h3 id="implicit-grant">第二种方式: 隐藏式 (Implicit Grant)</h3>
<p>有些 Web 应用是纯前端应用，没有后端。这时就不能用上面的方式了，必须将令牌储存在前端。<code>RFC 6749</code> 就规定了第二种方式，允许直接向前端颁发令牌。这种方式没有授权码这个中间步骤，所以称为（授权码）"隐藏式"（<code>implicit</code>）。</p>
<div class="admonition info">
<p class="admonition-title">@RFC6749 - Authorization Code Grant <a href="https://datatracker.ietf.org/doc/html/rfc6749#page-13" target="_blank">https://datatracker.ietf.org/doc/html/rfc6749#page-13</a></p>
<p>原文:</p>
<p>The implicit grant type is used to obtain access tokens (it does notsupport the issuance of refresh tokens) and is optimized for publicclients known to operate a particular redirection URI.  These clientsare typically implemented in a browser using a scripting languagesuch as JavaScript.</p>
<p>Since this is a redirection-based flow, the client must be capable ofinteracting with the resource owner's user-agent (typically a webbrowser) and capable of receiving incoming requests (via redirection)from the authorization server.</p>
<p>Unlike the authorization code grant type, in which the client makesseparate requests for authorization and for an access token, theclient receives the access token as the result of the authorizationrequest.</p>
<p>The implicit grant type does not include client authentication, andrelies on the presence of the resource owner and the registration ofthe redirection URI.  Because the access token is encoded into theredirection URI, it may be exposed to the resource owner and otherapplications residing on the same device.</p>
<p>翻译:</p>
<p>隐式授权类型用于获取访问令牌（它不支持发布刷新令牌），并针对已知操作特定重定向 URI 的公共客户端进行了优化。 这些客户端通常使用 JavaScript 等脚本语言在浏览器中实现。</p>
<p>由于这是基于重定向的流程，因此客户端必须能够与资源所有者的用户代理（通常是 Web 浏览器）交互，并能够从授权服务器接收传入请求（通过重定向）。</p>
<p>与客户端发出单独的授权请求和访问令牌请求的授权代码授予类型不同，客户端接收访问令牌作为授权请求的结果。</p>
<p>隐式授权类型不包括客户端身份验证，并且依赖于资源所有者的存在和重定向 URI 的注册。 由于访问令牌被编码到重定向 URI 中，因此它可能会暴露给资源所有者和驻留在同一设备上的其他应用程序。</p>
</div>
<h4 id="_13">流程图</h4>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../../svg/2021-12-08-oauth2%E9%9A%90%E8%97%8F%E5%BC%8F%E6%8E%88%E6%9D%83%E6%B5%81%E7%A8%8B%E5%9B%BE.svg"><img alt="Oauth2.0隐藏式验证流程图" src="../../svg/2021-12-08-oauth2%E9%9A%90%E8%97%8F%E5%BC%8F%E6%8E%88%E6%9D%83%E6%B5%81%E7%A8%8B%E5%9B%BE.svg"/></a></p>
<p>该流程图包含如下步骤:</p>
<p>原文:</p>
<ul>
<li>(A)  The client initiates the flow by directing the resource owner'suser-agent to the authorization endpoint.  The client includesits client identifier, requested scope, local state, and aredirection URI to which the authorization server will send theuser-agent back once access is granted (or denied).</li>
<li>(B)  The authorization server authenticates the resource owner (viathe user-agent) and establishes whether the resource ownergrants or denies the client's access request.</li>
<li>(C)  Assuming the resource owner grants access, the authorizationserver redirects the user-agent back to the client using theredirection URI provided earlier.  The redirection URI includesthe access token in the URI fragment.</li>
<li>(D)  The user-agent follows the redirection instructions by making arequest to the web-hosted client resource (which does notinclude the fragment per <a href="https://datatracker.ietf.org/doc/html/rfc2616">RFC2616</a>).  The user-agent retains thefragment information locally.</li>
<li>(E)  The web-hosted client resource returns a web page (typically anHTML document with an embedded script) capable of accessing thefull redirection URI including the fragment retained by theuser-agent, and extracting the access token (and otherparameters) contained in the fragment.</li>
<li>(F)  The user-agent executes the script provided by the web-hostedclient resource locally, which extracts the access token.</li>
<li>(G)  The user-agent passes the access token to the client.</li>
</ul>
<p>翻译:</p>
<ul>
<li>(A) 客户端通过将资源所有者的用户代理定向到授权端点来启动流程。 客户端包括其客户端标识符、请求的范围、本地状态以及授权服务器将在访问被授予（或拒绝）后将用户代理发送回的方向 URI。</li>
<li>(B) 授权服务器验证资源所有者（通过用户代理）并确定资源所有者是授予还是拒绝客户端的访问请求。</li>
<li>(C) 假设资源所有者授予访问权限，授权服务器使用之前提供的重定向 URI 将用户代理重定向回客户端。 重定向 URI 包括 URI 片段中的访问令牌。</li>
<li>(D) 用户代理通过向 Web 托管的客户端资源（不包括每个 <a href="https://datatracker.ietf.org/doc/html/rfc2616">RFC2616</a> 的片段）发出请求来遵循重定向指令。 用户代理在本地保留片段信息。</li>
<li>(E) <code>授权服务器</code>对<code>客户端</code>进行身份验证，验证<code>授权码</code>，并确保收到的<code>重定向 URI</code> 与<code>步骤 (C)</code> 中用于<code>重定向客户端的URI</code> 匹配。 如果有效，<code>授权服务器</code>将使用访问令牌和可选的<code>刷新令牌</code>进行响应。</li>
<li>(F) 用户代理在本地执行由 Web 托管客户端资源提供的脚本，该脚本提取访问令牌。</li>
<li>(G) 用户代理将访问令牌传递给客户端。</li>
</ul>
<h4 id="_14">授权请求</h4>
<p>原文参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-4.2.1">RFC6749</a></p>
<p>请求示例:</p>
<div class="highlight"><pre><span></span><code>GET<span class="w"> </span>/authorize?response_type<span class="o">=</span>token<span class="p">&amp;</span><span class="nv">client_id</span><span class="o">=</span>s6BhdRkqt3<span class="p">&amp;</span><span class="nv">state</span><span class="o">=</span>xyz<span class="p">&amp;</span><span class="nv">redirect_uri</span><span class="o">=</span>https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb<span class="w"> </span>HTTP/1.1
Host:<span class="w"> </span>server.example.com
</code></pre></div>
<p>参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>必须</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>response_type</td>
<td>是</td>
<td>值必须为 <code>token</code></td>
</tr>
<tr>
<td>client_id</td>
<td>是</td>
<td>客户端标识, 参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-2.2">Client Identifier</a></td>
</tr>
<tr>
<td>redirect_uri</td>
<td>否</td>
<td>重定向地址, 参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-3.1.2">Redirection Endpoint</a></td>
</tr>
<tr>
<td>scope</td>
<td>否</td>
<td>范围描述, 参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-3.3">Access Token Scope</a></td>
</tr>
<tr>
<td>state</td>
<td>否(推荐)</td>
<td>客户端用于维护请求和回调之间的状态的不透明值。 授权服务器在将用户代理重定向回客户端时包含此值。 该参数应该用于防止跨站点请求伪造，参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-10.12">Cross-Site Request Forgery</a></td>
</tr>
</tbody>
</table>
<h4 id="_15">请求令牌响应</h4>
<p>原文参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-4.2.2">RFC6749 - 4.2.2</a></p>
<p>请求示例:</p>
<div class="highlight"><pre><span></span><code>GET<span class="w"> </span>/authorize?response_type<span class="o">=</span>token<span class="p">&amp;</span><span class="nv">client_id</span><span class="o">=</span>s6BhdRkqt3<span class="p">&amp;</span><span class="nv">state</span><span class="o">=</span>xyz<span class="p">&amp;</span><span class="nv">redirect_uri</span><span class="o">=</span>https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb<span class="w"> </span>HTTP/1.1
Host:<span class="w"> </span>server.example.com
</code></pre></div>
<p>参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>必须</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>access_token</td>
<td>是</td>
<td>授权服务器颁发的访问令牌。</td>
</tr>
<tr>
<td>token_type</td>
<td>是</td>
<td>发行的令牌类型，值不区分大小写。 参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-7.1">Client Identifier</a></td>
</tr>
<tr>
<td>expires_in</td>
<td>可选(推荐返回)</td>
<td>访问令牌的生命周期（以秒为单位）。 例如，值“3600”表示访问令牌将在响应生成后的一小时内到期。 如果省略，授权服务器应该通过其他方式提供过期时间或记录默认值。</td>
</tr>
<tr>
<td>scope</td>
<td>可选</td>
<td>如果与客户端请求的范围相同，则必须返回。 参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-3.3">Access Token Scope</a></td>
</tr>
<tr>
<td>state</td>
<td>是(推荐)</td>
<td>如果客户端授权请求中存在“状态”参数。 从客户端收到的确切值。</td>
</tr>
</tbody>
</table>
<p>授权服务器不得发出刷新令牌。</p>
<h4 id="_16">错误响应</h4>
<p>原文参考: <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-4.2.2.1">RFC6749 - 4.2.2.1</a></p>
<p>响应示例:</p>
<div class="highlight"><pre><span></span><code>HTTP/1.1<span class="w"> </span><span class="m">302</span><span class="w"> </span>Found
Location:<span class="w"> </span>https://client.example.com/cb#error<span class="o">=</span>access_denied<span class="p">&amp;</span><span class="nv">state</span><span class="o">=</span>xyz
</code></pre></div>
<p>响应体包含:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>必须</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>error</td>
<td>是</td>
<td>一个单独的 ASCII编码的错误码，可选值: <code>invalid_request</code> 、<code>unauthorized_client</code> 、<code>access_denied</code> 、<code>unsupported_response_type</code> 、<code>invalid_scope</code> 、<code>server_error</code> 、<code>temporarily_unavailable</code></td>
</tr>
<tr>
<td>error_description</td>
<td>可选</td>
<td>可读的错误描述，用于协助客户端开发人员了解发生的错误。</td>
</tr>
<tr>
<td>error_uri</td>
<td>可选</td>
<td>可读的网页错误详细描述，用于向客户端提供开发人员提供有关错误的其他信息。</td>
</tr>
<tr>
<td>state</td>
<td>可选</td>
<td>如果客户端请求存在<code>state</code>参数，并且被服务器收到。</td>
</tr>
</tbody>
</table>
<h2 id="_17">第三方示例</h2>
<p><a href="http://www.ruanyifeng.com/blog/2019/04/github-oauth.html">http://www.ruanyifeng.com/blog/2019/04/github-oauth.html</a></p>
<h2 id="oauth-20">理解oauth 2.0</h2>
<p><a href="https://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html">https://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html</a></p>
<hr/>
<div class="md-source-file">
<small>
    
      最后更新:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2023年2月22日</span>
<br/>
        创建日期:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2023年2月22日</span>
</small>
</div>
<h2 id="__comments">评论</h2>
<!-- Insert generated snippet here -->
<script async="" crossorigin="anonymous" data-category="Announcements" data-category-id="DIC_kwDOJA8zGM4CUYTL" data-emit-metadata="0" data-input-position="bottom" data-lang="zh-CN" data-mapping="pathname" data-reactions-enabled="1" data-repo="hellowac/hellowac.github.io" data-repo-id="R_kgDOJA8zGA" data-strict="0" data-theme="preferred_color_scheme" src="https://giscus.app/client.js">
</script>
<!-- Synchronize Giscus theme with palette -->
<script>
    var giscus = document.querySelector("script[src*=giscus]")

    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate" ? "dark" : "light"
      giscus.setAttribute("data-theme", theme) 
    }

    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate" ? "dark" : "light"

          /* Instruct Giscus to change theme */
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>
</article>
</div>
</div>
<a class="md-top md-icon" data-md-component="top" hidden="" href="#">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
            回到页面顶部
          </a>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "toc.follow"], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
<script src="../../../assets/javascripts/bundle.2a6f1dda.min.js"></script>
<script src="../../../javascripts/mathjax.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="https://unpkg.com/mermaid@9.4.0/dist/mermaid.min.js"></script>
<script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>
{"config":{"lang":["ja"],"separator":"[\\s\\-,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u7b80\u4ecb","text":"<p>\u8fd9\u662f\u6211\u7684\u4e2a\u4eba\u535a\u5ba2</p>"},{"location":"#_2","title":"\u642d\u5efa\u65b9\u5f0f","text":"<p>\u4e3b\u8981\u4f7f\u7528\u57fa\u4e8epython\u7684mkdocs\u5de5\u5177</p> <ul> <li>\u4e2d\u6587\u6587\u6863: mkdocs-docs-zh</li> <li>\u82f1\u6587\u6587\u6863: https://www.mkdocs.org/</li> </ul>"},{"location":"#_3","title":"\u4e3b\u9898","text":"<p>\u8be5\u535a\u5ba2\u4e3b\u9898\u4e3b\u8981\u4f7f\u7528mkdocs-matertial</p> <ul> <li>\u82f1\u6587\u6587\u6863: https://squidfunk.github.io/mkdocs-material/</li> <li>github\u5730\u5740: https://github.com/squidfunk/mkdocs-material</li> </ul>"},{"location":"#_4","title":"\u76f8\u5173\u6709\u7528\u7684\u63d2\u4ef6","text":"<ul> <li>github\u5730\u5740: best-of-mkdocs *</li> </ul>"},{"location":"e-book/","title":"\u7535\u5b50\u4e66","text":""},{"location":"e-book/#sicp","title":"SICP","text":"<p>SICP \u662f Structure and Interpretation of Computer Programs \u7684\u7f29\u5199\uff0c\u610f\u4e3a: \u8ba1\u7b97\u673a\u7a0b\u5e8f\u7684\u7ed3\u6784\u548c\u89e3\u91ca</p> <p>\u8fd9\u91cc\u6709\u4e00\u672c\u4f7f\u7528Python\u8fdb\u884c\u89e3\u91ca\u7684\u4e66\uff1a</p> <p>\u6574\u7406\u81ea https://github.com/wizardforcel/sicp-py-zh</p> <p>\u89e3\u91ca\u8bf4\u660e\u53c2\u8003: https://zhuanlan.zhihu.com/p/102408596</p> <ul> <li>github: https://github.com/hellowac/sicp_py_doc</li> <li>\u6587\u6863: https://hellowac.github.io/sicp_py_doc/</li> </ul>"},{"location":"e-book/#python","title":"Python\u6700\u4f73\u5b9e\u8df5\u6307\u5357","text":"<p>\u8fd9\u91cc\u6709\u6211\u6574\u7406Python\u4e66\u7c4d</p> <ul> <li>github: https://github.com/hellowac/Python-Guide-CN</li> <li>\u6587\u6863: https://hellowac.github.io/Python-Guide-CN/</li> </ul>"},{"location":"e-book/#_2","title":"\u9886\u57df\u9a71\u52a8\u8bbe\u8ba1","text":"<p>\u8fd9\u91cc\u6709\u6211\u6574\u7406\u7684\u9886\u57df\u9a71\u52a8\u8bbe\u8ba1\u6587\u6863</p> <ul> <li>github: https://github.com/hellowac/ddd_doc</li> <li>\u6587\u6863: https://hellowac.github.io/ddd_doc/</li> </ul>"},{"location":"e-book/#_3","title":"\u7edf\u8ba1\u5b66\u6307\u5357","text":"<p>\u8be5\u5b58\u50a8\u5e93\u5305\u542b python \u4e2d\u201c\u7edf\u8ba1\u5b66\u4e60\u7b80\u4ecb\u201d\u4e00\u4e66\u4e2d\u5305\u542b\u7684\u7ec3\u4e60\u53ca\u5176\u89e3\u51b3\u65b9\u6848\u3002</p> <ul> <li>github: https://github.com/hellowac/An-Introduction-to-Statistical-Learning</li> </ul>"},{"location":"e-book/#docker","title":"docker\u4ece\u5165\u95e8\u5230\u5b9e\u8df5","text":"<p>\u672c\u4e66\u65e2\u9002\u7528\u4e8e\u5177\u5907\u57fa\u7840 Linux \u77e5\u8bc6\u7684 Docker \u521d\u5b66\u8005\uff0c\u4e5f\u5e0c\u671b\u53ef\u4f9b\u7406\u89e3\u539f\u7406\u548c\u5b9e\u73b0\u7684\u9ad8\u7ea7\u7528\u6237\u53c2\u8003\u3002\u540c\u65f6\uff0c\u4e66\u4e2d\u7ed9\u51fa\u7684\u5b9e\u8df5\u6848\u4f8b\uff0c\u53ef\u4f9b\u5728\u8fdb\u884c\u5b9e\u9645\u90e8\u7f72\u65f6\u501f\u9274\u3002\u524d\u516d\u7ae0\u4e3a\u57fa\u7840\u5185\u5bb9\uff0c\u4f9b\u7528\u6237\u7406\u89e3 Docker \u7684\u57fa\u672c\u6982\u5ff5\u548c\u64cd\u4f5c\uff1b7 ~ 9 \u7ae0\u4ecb\u7ecd\u5305\u62ec\u6570\u636e\u7ba1\u7406\u3001\u7f51\u7edc\u7b49\u9ad8\u7ea7\u64cd\u4f5c\uff1b\u7b2c 10 ~ 13 \u7ae0\u4ecb\u7ecd\u4e86\u5bb9\u5668\u751f\u6001\u4e2d\u7684\u51e0\u4e2a\u6838\u5fc3\u9879\u76ee\uff1b14\u300115 \u7ae0\u8ba8\u8bba\u4e86\u5173\u4e8e Docker \u5b89\u5168\u548c\u5b9e\u73b0\u6280\u672f\u7b49\u9ad8\u7ea7\u8bdd\u9898\u3002\u540e\u7eed\u7ae0\u8282\u5219\u5206\u522b\u4ecb\u7ecd\u5305\u62ec Etcd\u3001CoreOS\u3001Kubernetes\u3001Mesos\u3001\u5bb9\u5668\u4e91\u7b49\u76f8\u5173\u70ed\u95e8\u5f00\u6e90\u9879\u76ee\u3002\u6700\u540e\uff0c\u8fd8\u5c55\u793a\u4e86\u4f7f\u7528\u5bb9\u5668\u6280\u672f\u7684\u5178\u578b\u7684\u5e94\u7528\u573a\u666f\u548c\u5b9e\u8df5\u6848\u4f8b\u3002</p> <ul> <li>github: https://github.com/hellowac/docker_practice/</li> <li>\u539f\u4ed3\u5e93: https://github.com/yeasy/docker_practice</li> <li>\u9605\u8bfb\u5730\u5740: https://vuepress.mirror.docker-practice.com/</li> </ul>"},{"location":"e-book/#python_1","title":"python\u5e76\u53d1\u7f16\u7a0b","text":"<p>\u300apython\u5e76\u53d1\u7f16\u7a0b\u300b\u7b80\u4f53\u4e2d\u6587\u7248\u514b\u9686\u81eahttps://github.com/Voidly/Parallel-Programming-with-Python{target=\"_blank\"}</p> <ul> <li>github: https://github.com/hellowac/Parallel_Programming_with_Python</li> </ul>"},{"location":"e-book/#css","title":"css\u8bbe\u8ba1\u6307\u5357","text":"<p>CSS\u8bbe\u8ba1\u6307\u5357\u5b66\u4e60\u7b14\u8bb0</p> <ul> <li>github: https://github.com/hellowac/cssdesignguide</li> </ul>"},{"location":"e-book/#_4","title":"\u7ecf\u5178\u6280\u672f\u4e66\u7c4d\u5408\u96c6","text":"<p>\ud83d\udcda  \u7ecf\u5178\u6280\u672f\u4e66\u7c4d PDF \u6587\u4ef6\uff0c\u6301\u7eed\u66f4\u65b0...</p> <ul> <li>github: https://github.com/ShineFan/awesome-programming-books-1</li> </ul>"},{"location":"documents/docs/","title":"\u6587\u6863\u5408\u96c6","text":""},{"location":"documents/docs/#alembic","title":"alembic","text":"<p>Python\u6570\u636e\u5e93\u8fc1\u79fb\u6846\u67b6Alembic\u4e2d\u6587\u6587\u6863</p> <ul> <li>github: https://github.com/hellowac/alembic_doc</li> <li>\u6587\u6863: https://hellowac.github.io/alembic_doc/</li> </ul>"},{"location":"documents/docs/#flask","title":"Flask\u4e4b\u65c5","text":"<p>\u6458\u5f55\u7684flask\u4e4b\u65c5</p> <ul> <li>github: https://github.com/hellowac/explore-flask-zh</li> <li>\u6587\u6863: https://hellowac.github.io/explore-flask-zh/</li> </ul>"},{"location":"documents/docs/#sqlalchemy","title":"sqlalchemy","text":"<p>\u7ffb\u8bd1\u7684sqlalchemy</p> <ul> <li>github: https://github.com/hellowac/sqlalchemy_doc</li> <li>\u6587\u6863: https://hellowac.github.io/sqlalchemy_doc/</li> </ul>"},{"location":"documents/docs/#pyquery","title":"pyquery","text":"<p>\u7ffb\u8bd1\u7684pyquery</p> <ul> <li>github: https://github.com/hellowac/pyquery_doc</li> <li>\u6587\u6863: https://hellowac.github.io/pyquery_doc/</li> </ul>"},{"location":"documents/docs/#mermaid","title":"mermaid","text":"<p>\u7ffb\u8bd1\u7684mermaid\uff0c \u4e00\u4e2a\u753b\u56fe\u6587\u6863\u5316\u7684\u5de5\u5177</p> <ul> <li>github: https://github.com/hellowac/mermaid_doc</li> <li>\u6587\u6863: https://hellowac.github.io/mermaid_doc/</li> <li>\u5b98\u7f51: https://mermaid.js.org/</li> </ul>"},{"location":"documents/docs/#mdbook","title":"mdbook","text":"<p>\u7ffb\u8bd1\u7684mdbook</p> <ul> <li>github: https://github.com/hellowac/mdbook_doc</li> <li>\u6587\u6863: https://hellowac.github.io/mdbook_doc/</li> </ul>"},{"location":"documents/docs/#reportlab","title":"reportlab","text":"<p>\u6574\u7406\u7684reportlab\u7ffb\u8bd1</p> <ul> <li>github: https://github.com/hellowac/reportlab-doc-zh</li> <li>\u6587\u6863: https://hellowac.github.io/reportlab-doc-zh/</li> </ul>"},{"location":"technology/components/nginx/","title":"nginx","text":"<ul> <li>\u5b98\u7f51: https://nginx.org/</li> <li>\u4e0b\u8f7d: https://nginx.org/en/download.html</li> <li>\u6587\u6863: https://nginx.org/en/docs/</li> </ul> <p>\u5b89\u88c5</p> <ul> <li>\u9996\u9875: https://nginx.org/en/docs/install.html</li> <li>\u5305\u5b89\u88c5: https://nginx.org/en/linux_packages.html</li> <li>RHEL/CentOS: https://nginx.org/en/linux_packages.html#RHEL-CentOS</li> </ul>"},{"location":"technology/components/nginx/#_1","title":"\u793a\u4f8b\u914d\u7f6e","text":"<pre><code>upstream linuxidc {\n        server localhost:8500;\n        server localhost:8501;\n        server localhost:8502;\n        server localhost:8503;\n}\n\nserver {\n    listen       80;\n    listen       [::]:80;\n    #server_name  security.cdiisp.com;\n    root         /opt/front;\n    client_max_body_size 100M;\n\n    #Load configuration files for the default server block.\n    #include /etc/nginx/default.d/*.conf;\n\n    location ^~ /api {\n        include /etc/nginx/uwsgi_params;\n        proxy_pass http://linuxidc;\n        # uwsgi_pass portal;\n        proxy_set_header REMOTE_ADDR $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n\n    error_page 404 /404.html;\n    location = /404.html {\n    }\n\n    error_page 500 502 503 504 /50x.html;\n    location = /50x.html {\n    }\n}\n</code></pre>"},{"location":"technology/components/rabbitmq/","title":"Rabbitmq \u6d88\u606f\u961f\u5217\u670d\u52a1","text":"<ul> <li>\u7f16\u5199\u65f6\u95f4: 2022\u5e7408\u670826\u65e515:21:16</li> <li>rabbitmq\u5b98\u65b9\u6587\u6863: https://www.rabbitmq.com/documentation.html</li> <li>docker hub \u5b98\u65b9\u5730\u5740: https://hub.docker.com/_/rabbitmq</li> <li>\u9ed8\u8ba4\u7aef\u53e3:<ul> <li>5672: \u901a\u4fe1\u7aef\u53e3</li> <li>15672: http\u7ba1\u7406\u7aef\u53e3</li> </ul> </li> </ul>"},{"location":"technology/components/rabbitmq/#_1","title":"\u4e0b\u8f7d\u548c\u5b89\u88c5","text":"<p>\u5b98\u65b9\u6587\u6863: https://www.rabbitmq.com/download.html</p> <pre><code># docker \u5b89\u88c5:\n# latest RabbitMQ 3.10\ndocker run -it --rm --name rabbitmq -p 5672:5672 -p 15672:15672 rabbitmq:3.10-management\n</code></pre>"},{"location":"technology/components/rabbitmq/#rpm","title":"rpm\u5b89\u88c5","text":"<p>\u539f\u6587: Install RabbitMQ Server on CentOS 7</p>"},{"location":"technology/components/rabbitmq/#_2","title":"\u4e0b\u8f7d\u5730\u5740\u548c\u8f6f\u4ef6\u66f4\u65b0","text":"<p>Erlang 23.3.4.11 \u7248\u672c\u7684\u4e0b\u8f7d\u5730\u5740\uff0c\u8bf7\u53c2\u8003\u94fe\u63a5\uff1a https://packagecloud.io/rabbitmq/erlang/packages/el/7/erlang-23.3.4.11-1.el7.x86_64.rpm</p> <p>RabbitMQ 3.9.15 \u7684\u4e0b\u8f7d\u5730\u5740\uff0c\u8bf7\u53c2\u8003\u94fe\u63a5\uff1ahttps://www.rabbitmq.com/install-rpm.html</p> <p>\u4f7f\u7528\u767b\u5f55\u4e0a\u4f60\u7684 CentOS 7 \u670d\u52a1\u5668\u540e\uff0c\u9996\u5148\u9700\u8981\u67e5\u770b\u4f60\u7684\u670d\u52a1\u5668\u662f\u5426\u5b89\u88c5\u4e86 wget\uff0c\u5982\u679c\u6ca1\u6709\u5b89\u88c5 wget\uff0c\u8bf7\u8fd0\u884c yum install wget \u8fdb\u884c\u5b89\u88c5\u3002</p> <pre><code>yum install wget\n</code></pre> <p>\u5f53 wget \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u8fd0\u884c</p> <pre><code>yum update\n</code></pre> <p>\u6765\u66f4\u65b0\u4f60\u7684\u670d\u52a1\u5668\u3002</p>"},{"location":"technology/components/rabbitmq/#erlang","title":"\u5b89\u88c5 Erlang","text":"<p>\u9996\u5148\u4f60\u9700\u8981\u4e0b\u8f7d Erlang \uff0c\u7136\u540e\u8fdb\u884c\u5b89\u88c5\uff0c\u5728\u4e0a\u9762\u63d0\u5230\u7684\u5730\u5740  https://packagecloud.io/rabbitmq/erlang/packages/el/7/erlang-23.3.4.11-1.el7.x86_64.rpm?distro_version_id=140 \u4e2d\u7684\u53f3\u4fa7\u6709\u4e00\u4e2a wget \u7684\u5730\u5740\u3002</p> <p></p> <p>\u4f60\u53ef\u4ee5\u8fd0\u884c</p> <pre><code>wget --content-disposition https://packagecloud.io/rabbitmq/erlang/packages/el/7/erlang-23.3.4.11-1.el7.x86_64.rpm/download.rpm?distro_version_id=140\n</code></pre> <p>\u6765\u8fdb\u884c\u4e0b\u8f7d\u3002</p> <p>\u5f53\u4f60\u4e0b\u8f7d\u5230\u4f60\u7684\u672c\u5730\u8ba1\u7b97\u673a\u540e\uff0c\u8fd0\u884c\u547d\u4ee4</p> <pre><code>yum localinstall rabbitmq-server-3.9.15-1.el7.noarch.rpm\n</code></pre> <p>\u6765\u5b89\u88c5\u4f60\u4e0b\u8f7d\u7684 rpm \u5305\u3002</p> <p>\u5f53\u4f60\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u4f60\u53ef\u4ee5\u8fd0\u884c\u547d\u4ee4</p> <pre><code>erl -version\n</code></pre> <p>\u6765\u67e5\u770b\u4f60\u5b89\u88c5\u7684 erl \u7248\u672c\u3002</p> <p>\u5728\u8fd9\u91cc\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\u8fd9\u663e\u793a\u7684\u7248\u672c\u4f4e Erlang emulator \u7248\u672c\uff0c\u4e0e\u4f60\u4e0b\u8f7d\u7684 Erlang \u7248\u672c\u662f\u4e0d\u540c\u7684\u3002</p>"},{"location":"technology/components/rabbitmq/#rabbitmq_1","title":"\u5b89\u88c5 RabbitMQ","text":"<p>\u8fd0\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff0c\u5c06 RabbitMQ \u4e0b\u8f7d\u5230\u4f60\u670d\u52a1\u5668\u4e0a\u3002</p> <pre><code>wget https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.9.15/rabbitmq-server-3.9.15-1.el7.noarch.rpm\n</code></pre> <p>\u5f53\u4f60\u4e0b\u8f7d\u5b8c\u6210\u540e\uff0c\u4f60\u9700\u8981\u8fd0\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u5c06 Key \u5bfc\u5165\u3002</p> <pre><code>rpm --import https://www.rabbitmq.com/rabbitmq-release-signing-key.asc\n</code></pre> <p>\u4f7f\u7528 yum \u8fdb\u884c\u672c\u5730\u5b89\u88c5\uff0c\u8fd0\u884c\u547d\u4ee4\uff1a</p> <pre><code>yum localinstall  rabbitmq-server-3.9.15-1.el7.noarch.rpm\n</code></pre> <p>\u5f53\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u6765\u542f\u52a8 rabbitmq \u670d\u52a1\u5668\uff1a</p> <pre><code>systemctl start rabbitmq-server\n</code></pre>"},{"location":"technology/components/rabbitmq/#rabbitmq_2","title":"RabbitMQ \u9632\u706b\u5899\u914d\u7f6e","text":"<p>RabbitMQ \u7684\u8fd0\u884c\u9700\u8981\u4e00\u7cfb\u5217\u7684\u7aef\u53e3\u3002\u56e0\u6b64\u4f60\u9700\u8981\u914d\u7f6e\u4f60\u7684\u9632\u706b\u5899\u5c06\u4e0b\u9762\u7684\u7aef\u53e3\u6253\u5f00\u3002</p> <p>\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f firewalld\uff0c\u90a3\u4e48\u8bf7\u4f9d\u6b21\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u3002</p> <p>\u6253\u5f00\u9632\u706b\u5899\u7aef\u53e3\uff1a</p> <pre><code>firewall-cmd --zone=public --permanent --add-port=4369/tcp\nfirewall-cmd --zone=public --permanent --add-port=25672/tcp\nfirewall-cmd --zone=public --permanent --add-port=5671-5672/tcp\nfirewall-cmd --zone=public --permanent --add-port=15672/tcp\nfirewall-cmd --zone=public --permanent --add-port=61613-61614/tcp\nfirewall-cmd --zone=public --permanent --add-port=1883/tcp\nfirewall-cmd --zone=public --permanent --add-port=8883/tcp\n</code></pre> <p>\u5c06\u9632\u706b\u5899\u914d\u7f6e\u91cd\u65b0\u8f7d\u5165\uff1a</p> <pre><code>firewall-cmd --reload\n</code></pre> <p>\u7edd\u5927\u90e8\u5206\u60c5\u51b5\uff0c\u5f53\u4f60\u6267\u884c\u5b8c\u4e0a\u9762\u7684\u547d\u4ee4\u540e\uff0c\u4f60\u7684 RabbitMQ \u5e94\u8be5\u80fd\u591f\u6b63\u5e38\u8bbf\u95ee\u4e86\u3002</p> <p>\u5982\u679c\u4f60\u7684\u670d\u52a1\u5668\u8fd8\u542f\u7528\u4e86 SELinux \u7684\u8bdd\uff0c\u4f60\u8fd8\u9700\u8981\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u8ba9\u8ba9 RabbitMQ \u670d\u52a1\u5668\u80fd\u591f\u63a5\u6536\u53d1\u9001\u7f51\u7edc\u6570\u636e\uff1a</p> <pre><code>setsebool -P nis_enabled 1\n</code></pre>"},{"location":"technology/components/rabbitmq/#rabbitmq_3","title":"RabbitMQ \u8bbe\u7f6e\u81ea\u52a8\u542f\u52a8","text":"<p>\u5728\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u6211\u4eec\u5e0c\u671b RabbitMQ \u80fd\u5f00\u673a\u81ea\u52a8\u542f\u52a8\u3002</p> <p>\u8bf7\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff0c\u6765\u8ba9 RabbitMQ \u968f\u7740\u8ba1\u7b97\u673a\u5f00\u673a\u540e\u81ea\u52a8\u542f\u52a8\uff1a</p> <pre><code>systemctl enable rabbitmq-server\n</code></pre> <p>\u4f7f\u7528\u4e0b\u9762\u547d\u4ee4\u67e5\u770b RabbitMQ \u7684\u8fdb\u7a0b\u8fd0\u884c\u72b6\u6001\uff1a</p> <pre><code>systemctl status rabbitmq-server\n</code></pre> <p>\u6839\u636e\u670d\u52a1\u5668\u7684\u4e0d\u540c\uff0c\u4f1a\u6709\u4e0d\u540c\u7684\u8f93\u51fa\uff0c\u6211\u4eec\u7684\u8f93\u51fa\u5982\u4e0b\uff0c\u8868\u793a RabbitMQ \u76ee\u524d\u662f\u6b63\u5728\u8fd0\u884c\u7684\u3002</p> <pre><code>[root@vps263579 yhu]# systemctl status rabbitmq-server\n\n\u25cf rabbitmq-server.service - RabbitMQ broker\nLoaded: loaded (/usr/lib/systemd/system/rabbitmq-server.service; enabled; vendor preset: disabled)\nActive: active (running) since Fri 2019-10-11 14:10:14 EDT; 9h ago\nMain PID: 14895 (beam.smp)\nStatus: \"Initialized\"\nCGroup: /system.slice/rabbitmq-server.service\n\u251c\u250014895 /usr/lib64/erlang/erts-10.3.5.6/bin/beam.smp -W w -A 64 -MBas ageffcbf -MHas ageffcbf -MBlmbcs 512 -MHlmbcs 512 -MMmcs 30 -P 1048576 -t 5000000 -stbt db -zdbbl 128000 -K true -- -root /usr/lib64/erlang -progn...\n\u251c\u250015123 /usr/lib64/erlang/erts-10.3.5.6/bin/epmd -daemon\n\u251c\u250015259 erl_child_setup 32768\n\u251c\u250015280 inet_gethost 4\n\u2514\u250015281 inet_gethost 4\n</code></pre>"},{"location":"technology/components/rabbitmq/#rabbitmq-web","title":"RabbitMQ \u542f\u7528 Web \u7ba1\u7406\u754c\u9762","text":"<p>\u5728\u9ed8\u8ba4\u7684\u60c5\u51b5\u4e0b RabbitMQ \u7684 Web \u7ba1\u7406\u63a7\u5236\u53f0\u662f\u6ca1\u6709\u542f\u7528\u7684\uff0c\u4f60\u9700\u8981\u901a\u8fc7\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u8fdb\u884c\u542f\u7528\u3002</p> <p>\u5b89\u88c5 Web \u7ba1\u7406\u754c\u9762\u7684\u63d2\u4ef6\uff1a</p> <pre><code>rabbitmq-plugins enable rabbitmq_management\n</code></pre> <p>\u63d0\u4f9b RabbitMQ \u7528\u6237\u548c\u5bf9\u7528\u6237\u4f7f\u7528\u7684\u6743\u9650\u8fdb\u884c\u8d4b\u6743\uff1a</p> <pre><code>chown -R rabbitmq:rabbitmq /var/lib/rabbitmq/\n</code></pre> <p>\u5206\u522b\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff1a</p> <pre><code>rabbitmqctl add_user admin StrongPassword\nrabbitmqctl set_user_tags admin administrator\nrabbitmqctl set_permissions -p / admin \".*\" \".*\" \".*\"\n</code></pre> <p>\u9488\u5bf9\u4e0a\u9762\u547d\u4ee4\u7684\u89e3\u91ca\u662f\uff0c\u7b2c\u4e00\u4e2a\u547d\u4ee4\u521b\u5efa\u4e86\u4e00\u4e2a admin \u7684\u7528\u6237\uff0c\u8fd9\u4e2a\u7528\u6237\u4f7f\u7528\u7684\u5bc6\u7801\u4e3a StrongPassword\u3002</p> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u7528\u6237\u540d\uff0c\u5728\u6211\u4eec\u6267\u884c\u7684\u4e0a\u9762\u7684\u547d\u4ee4\u4e2d\uff0c\u7528\u6237\u767b\u5f55\u4f7f\u7528\u7684\u5bc6\u7801\u4e3a\u5b57\u7b26 StrongPassword\uff0c\u4f60\u53ef\u4ee5\u5c06\u8fd9\u4e2a\u5b57\u7b26\u4fee\u6539\u4e3a\u5176\u4ed6\u7684\u5b57\u7b26\uff0c\u6216\u8005\u4f60\u4e5f\u53ef\u4ee5\u767b\u5f55\u6210\u529f\u540e\u5728 UI \u754c\u9762\u4e2d\u8fdb\u884c\u4fee\u6539\u3002</p> <p>\u540e\u9762\u7684\u8bdd\u662f\u9488\u5bf9\u8fd9\u4e2a\u7528\u6237\u8fdb\u884c\u8d4b\u6743\u3002</p> <p>\u5f53\u4e0a\u9762\u547d\u4ee4\u6267\u884c\u6210\u529f\u540e\uff0c\u4f60\u53ef\u4ee5\u91cd\u542f\u4f60\u7684 RabbitMQ\uff0c\u7136\u540e\u901a\u8fc7\u6d4f\u89c8\u5668\u8fdb\u884c\u767b\u5f55\u3002UI \u754c\u9762\u4f7f\u7528\u7684\u7aef\u53e3\u662f 15672\u3002\u56e0\u6b64\u8bbf\u95ee\u7684 URL \u4e3a\u4f60\u670d\u52a1\u5668\u7684\u5730\u5740 + 15672\u3002</p> <p>http://Your_Server_IP:15672/</p> <p>\u5982\u679c\u4e00\u5207\u6b63\u5e38\uff0c\u4f60\u5e94\u8be5\u80fd\u591f\u770b\u5230\u4e0b\u9762\u7684\u767b\u5f55\u754c\u9762\uff1a</p> <p></p> <p>\u5982\u679c\u4f60\u4e0d\u80fd\u8bbf\u95ee\u4e0b\u9762\u7684\u767b\u5f55\u754c\u9762\uff0c\u6709\u53ef\u80fd\u662f\u4f60\u7684\u670d\u52a1\u5668\u9632\u706b\u5899\u3002</p> <p>\u6700\u7b80\u5355\u7684\u529e\u6cd5\u662f\u5148\u7981\u7528\u670d\u52a1\u5668\u7684\u9632\u706b\u5899\u4ee5\u786e\u5b9a\u6240\u6709\u7684\u8fdb\u7a0b\u662f\u6b63\u5e38\u8fd0\u884c\u7684\u3002</p> <p>\u5982\u679c\u4f60\u767b\u5f55\u6210\u529f\u540e\uff0c\u4f60\u5e94\u8be5\u80fd\u591f\u770b\u5230\u4e0b\u9762 RabbitMQ \u7684\u8fd0\u884c\u754c\u9762\uff1a</p> <p></p>"},{"location":"technology/components/rabbitmq/#_3","title":"\u6d88\u606f\u961f\u5217\u6a21\u5f0f","text":"<p>\u5b98\u65b9\u6587\u6863: https://www.rabbitmq.com/getstarted.html</p> <ol> <li>\u7b80\u5355\u961f\u5217\u6a21\u5f0f: https://www.rabbitmq.com/tutorials/tutorial-one-python.html</li> <li>\u5206\u5e03\u5f0fworker\u6a21\u5f0f: https://www.rabbitmq.com/tutorials/tutorial-two-python.html</li> <li>\u53d1\u5e03/\u8ba2\u9605\u6a21\u5f0f: https://www.rabbitmq.com/tutorials/tutorial-three-python.html</li> <li>\u8def\u7531\u6a21\u5f0f: https://www.rabbitmq.com/tutorials/tutorial-four-python.html</li> <li>\u4e3b\u9898\u6a21\u5f0f: https://www.rabbitmq.com/tutorials/tutorial-five-python.html</li> <li>RPC\u6a21\u5f0f: https://www.rabbitmq.com/tutorials/tutorial-six-python.html</li> <li>\u81ea\u5b9a\u4e49\u6a21\u5f0f: https://www.rabbitmq.com/tutorials/tutorial-seven-java.html</li> </ol>"},{"location":"technology/components/rabbitmq/#_4","title":"\u7528\u6237\u89d2\u8272\u7ba1\u7406","text":"<p>rabbitmq\u9ed8\u8ba4\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u662f<code>guest</code>\u548c<code>guest</code>,\u4f46\u4e3a\u4e86\u5b89\u5168\u8003\u8651\uff0c\u8be5\u7528\u6237\u540d\u548c\u5bc6\u7801\u53ea\u5141\u8bb8\u672c\u5730\u8bbf\u95ee\uff0c\u5982\u679c\u662f\u8fdc\u7a0b\u64cd\u4f5c\u7684\u8bdd\uff0c\u9700\u8981\u521b\u5efa\u65b0\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\uff1b</p> <p>\u65b0\u5efa\u7528\u6237</p> <pre><code># root\u6743\u9650\nrabbitmqctl add_user username passwd  # \u6dfb\u52a0\u7528\u6237\uff0c\u540e\u9762\u4e24\u4e2a\u53c2\u6570\u5206\u522b\u662f\u7528\u6237\u540d\u548c\u5bc6\u7801\nrabbitmqctl set_permissions -p / username \".*\" \".*\" \".*\"  # \u6dfb\u52a0\u6743\u9650\nrabbitmqctl set_user_tags username administrator  # \u4fee\u6539\u7528\u6237\u89d2\u8272,\u5c06\u7528\u6237\u8bbe\u4e3a\u7ba1\u7406\u5458\n</code></pre> <p>\u7528\u6237\u7684\u89d2\u8272\u8bf4\u660e</p> <pre><code>management: \u7528\u6237\u53ef\u4ee5\u8bbf\u95ee\u7ba1\u7406\u63d2\u4ef6\npolicymaker: \u7528\u6237\u53ef\u4ee5\u8bbf\u95ee\u7ba1\u7406\u63d2\u4ef6\uff0c\u5e76\u7ba1\u7406\u4ed6\u4eec\u6709\u6743\u8bbf\u95ee\u7684vhost\u7684\u7b56\u7565\u548c\u53c2\u6570\u3002\nmonitoring: \u7528\u6237\u53ef\u4ee5\u8bbf\u95ee\u7ba1\u7406\u63d2\u4ef6\uff0c\u67e5\u770b\u6240\u6709\u8fde\u63a5\u548c\u901a\u9053\u4ee5\u53ca\u4e0e\u8282\u70b9\u76f8\u5173\u7684\u4fe1\u606f\u3002\nadministrator: \u7528\u6237\u53ef\u4ee5\u505a\u4efb\u4f55\u76d1\u89c6\u53ef\u4ee5\u505a\u7684\u4e8b\u60c5\uff0c\u7ba1\u7406\u7528\u6237\uff0cvhost\u548c\u6743\u9650\uff0c\u5173\u95ed\u5176\u4ed6\u7528\u6237\u7684\u8fde\u63a5\uff0c\u5e76\u7ba1\u7406\u6240\u6709vhost\u7684\u653f\u7b56\u548c\u53c2\u6570\u3002\n</code></pre> <p>\u4f7f\u7528\u6dfb\u52a0\u7684\u8d26\u6237\u8fdc\u7a0b\u8bbf\u95ee\u540e\u53f0\u7ba1\u7406\u7ad9\u70b9\uff0c\u5c06\u539f\u6765\u7684\u8d26\u53f7guest\u5220\u9664\uff1b</p> <p>\u7528\u6237\u7ba1\u7406\u547d\u4ee4\u6c47\u603b</p> <ul> <li>\u65b0\u5efa\u7528\u6237: <code>rabbitmqctl add_user username passwd</code></li> <li>\u5220\u9664\u7528\u6237: <code>rabbitmqctl delete_user username</code></li> <li>\u6539\u5bc6\u7801: <code>rabbimqctl change_password {username} {newpassword}</code></li> <li>\u8bbe\u7f6e\u7528\u6237\u89d2\u8272: <code>rabbitmqctl set_user_tags {username} {tag ...}</code></li> </ul> <pre><code>rabbitmqctl set_permissions -p / username \".*\" \".*\" \".*\"  # \u6dfb\u52a0\u6743\u9650\n</code></pre> <p>\u6743\u9650\u8bf4\u660e</p> <pre><code>rabbitmqctl set_permissions [-pvhostpath] {user} {conf} {write} {read}\n</code></pre> <ul> <li>Vhostpath: \u865a\u62df\u4e3b\u673a\uff0c\u8868\u793a\u8be5\u7528\u6237\u53ef\u4ee5\u8bbf\u95ee\u90a3\u53f0\u865a\u62df\u4e3b\u673a\uff1b</li> <li>user: \u7528\u6237\u540d\u3002</li> <li>Conf: \u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0fmatch\u54ea\u4e9b\u914d\u7f6e\u8d44\u6e90\u80fd\u591f\u88ab\u8be5\u7528\u6237\u8bbf\u95ee\u3002</li> <li>Write: \u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0fmatch\u54ea\u4e9b\u914d\u7f6e\u8d44\u6e90\u80fd\u591f\u88ab\u8be5\u7528\u6237\u8bbe\u7f6e\u3002</li> <li>Read: \u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0fmatch\u54ea\u4e9b\u914d\u7f6e\u8d44\u6e90\u80fd\u591f\u88ab\u8be5\u7528\u6237\u8bbf\u95ee\u3002</li> </ul>"},{"location":"technology/components/rabbitmq/#_5","title":"\u865a\u62df\u4e3b\u673a","text":"<p>\u9ed8\u8ba4\u7684\u7528\u6237\u548c\u961f\u5217\u90fd\u662f\u5728<code>/</code>\u865a\u62df\u673a\u4e0b\u3002</p> <pre><code># \u521b\u5efa\u4e00\u4e2a\u865a\u62df\u4e3b\u673a\nrabbitmqctl add_vhost vhost_name\n# \u5220\u9664\u4e00\u4e2a\u865a\u62df\u4e3b\u673a\nrabbitmqctl delete_vhost vhost_name\n</code></pre> <p>\u5e38\u7528\u6587\u4ef6\u8def\u5f84</p> <ul> <li><code>/usr/local/rabbitmq_server/var/log/rabbitmq/rabbit@tms.log</code>: \u8bb0\u5f55rabbitmq\u8fd0\u884c\u65e5\u5e38\u7684\u65e5\u5fd7</li> <li><code>/usr/local/rabbitmq_server/var/log/rabbitmq/rabbit@tms-sasl.log</code>: rabbitmq\u7684\u5d29\u6e83\u62a5\u544a</li> <li><code>/usr/local/rabbitmq_server/etc/rabbitmq/rabbitmq.config</code>: rabbitmq\u7684\u914d\u7f6e\u6587\u4ef6</li> <li><code>/usr/local/rabbitmq_server/var/lib/rabbitmq/mnesia/rabbit@tms</code>: rabbit\u6d88\u606f\u6301\u4e45\u5316\u6587\u4ef6</li> </ul> <p>\u6ce8\u610f\uff1a</p> <p>\u5982\u679c\u76f8\u5e94\u8def\u5f84\u7684\u6587\u4ef6\u4e0d\u5b58\u5728\u5c31\u81ea\u5df1\u521b\u5efa\uff0c\u5982\u679c\u662f\u4f7f\u7528apt\u5b89\u88c5\u6216yum\u5b89\u88c5\u90a3\u4e48\u8fd9\u4e9b\u6587\u4ef6\u5939\u90fd\u88ab\u81ea\u52a8\u521b\u5efa\u597d\u4e86\u3002</p>"},{"location":"technology/components/rabbitmq/#_6","title":"\u542f\u7528\u540e\u53f0\u7ba1\u7406\u63d2\u4ef6","text":"<p>\u901a\u8fc7\u540e\u53f0\u7ba1\u7406\u63d2\u4ef6\u6211\u4eec\u53ef\u4ee5\u52a8\u6001\u76d1\u63a7mq\u7684\u6d41\u91cf\uff0c\u521b\u5efa\u7528\u6237\uff0c\u961f\u5217\u7b49\u3002</p> <pre><code># \u521b\u5efa\u76ee\u5f55\nmkdir /etc/rabbitmq\n\n# \u542f\u7528\u63d2\u4ef6\n/usr/lib/rabbitmq/bin/rabbitmq-plugins enable rabbitmq_management\n\n# \u5176\u4f1a\u5728/etc/rabbitmq\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2aenabled_plugins\u6587\u4ef6\uff0c\u8fd9\u662f\u540e\u53f0\u7ba1\u7406\u7684\u914d\u7f6e\u6587\u4ef6\u3002\n</code></pre> <p>rabbitmq\u7684\u7f51\u9875\u7ba1\u7406\u7684\u7aef\u53e3\u662f<code>15672</code>\uff0c\u5982\u679c\u4f60\u662f\u8fdc\u7a0b\u64cd\u4f5c\u670d\u52a1\u5668\uff0c\u8f93\u5165<code>&lt;http://ip:15672&gt;</code>,\u53d1\u73b0\u8fde\u63a5\u4e0d\u4e0a\uff0c\u56e0\u4e3a\u670d\u52a1\u5668\u9632\u706b\u5899\u4e0d\u5141\u8bb8\u8fd9\u4e2a\u7aef\u53e3\u8fdc\u7a0b\u8bbf\u95ee\uff1b</p> <pre><code># \u5c06mq\u7684tcp\u76d1\u542c\u7aef\u53e3\u548c\u7f51\u9875\u7ba1\u7406\u7aef\u53e3\u90fd\u8bbe\u7f6e\u6210\u5141\u8bb8\u8fdc\u7a0b\u8bbf\u95ee\n\nfirewall-cmd --permanent --add-port=15672/tcp\nfirewall-cmd --permanent --add-port=5672/tcp\nsystemctl restart firewalld.service\n</code></pre> <p>\u7ba1\u7406\u754c\u9762\u4ecb\u7ecd</p> <pre><code># \u8f93\u5165\u7528\u6237\u540d\u5bc6\u7801\u767b\u5f55\u540e\u8fdb\u5165\u4e3b\u754c\u9762\nOverview: \u7528\u6765\u663e\u793a\u6d41\u91cf\uff0c\u7aef\u53e3\uff0c\u8282\u70b9\u7b49\u4fe1\u606f\uff0c\u4ee5\u53ca\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff1b\nConnections: \u663e\u793a\u6240\u6709\u7684TCP\u8fde\u63a5\uff1b\nchannels: \u663e\u793a\u6240\u6709\u7684\u4fe1\u9053\u8fde\u63a5\uff1b\nexchanges: \u663e\u793a\u6240\u6709\u7684\u4ea4\u6362\u673a\u4ee5\u53ca\u521b\u5efa\u5220\u9664\u7b49\uff1b\nqueues: \u663e\u793a\u6240\u6709\u7684\u961f\u5217\u4ee5\u53ca\u521b\u5efa\u5220\u9664\u7b49\uff1b\nadmins: \u663e\u793a\u6240\u6709\u7684\u7528\u6237\u4ee5\u53ca\u7528\u6237\u7ba1\u7406\uff1b\n</code></pre>"},{"location":"technology/components/supervisor/","title":"Supervisor","text":"<ul> <li>\u6536\u5f55\u65f6\u95f4: 2022\u5e7409\u670820\u65e515:30:48</li> <li>\u5b98\u65b9\u6587\u6863: Supervisor: A Process Control System</li> <li>\u539f\u6587\u53c2\u8003: Install And Configure Supervisor On Centos 7</li> </ul>"},{"location":"technology/components/supervisor/#_1","title":"\u7b80\u4ecb","text":""},{"location":"technology/components/supervisor/#supervisor_1","title":"Supervisor \u662f\u4ec0\u4e48","text":"<ul> <li>Supervisor \u662f\u4e00\u4e2a\u5ba2\u6237\u7aef/\u670d\u52a1\u5668\u7cfb\u7edf\uff0c\u5b83\u5141\u8bb8\u5176\u7528\u6237\u76d1\u89c6\u548c\u63a7\u5236\u7c7b UNIX \u64cd\u4f5c\u7cfb\u7edf\u4e0a\u7684\u8bb8\u591a\u8fdb\u7a0b\u3002</li> <li>\u5b83\u4e0e launchd\u3001daemontools \u548c runit \u7b49\u7a0b\u5e8f\u6709\u4e00\u4e9b\u76f8\u540c\u7684\u76ee\u6807\u3002 \u4e0e\u5176\u4e2d\u4e00\u4e9b\u7a0b\u5e8f\u4e0d\u540c\uff0c\u5b83\u5e76\u4e0d\u610f\u5473\u7740\u4f5c\u4e3a\u201c\u8fdb\u7a0b id 1\u201d\u7684 init \u7684\u66ff\u4ee3\u54c1\u8fd0\u884c\u3002</li> <li>\u76f8\u53cd\uff0c\u5b83\u65e8\u5728\u7528\u4e8e\u63a7\u5236\u4e0e\u9879\u76ee\u6216\u5ba2\u6237\u76f8\u5173\u7684\u6d41\u7a0b\uff0c\u5e76\u4e14\u65e8\u5728\u5728\u542f\u52a8\u65f6\u50cf\u4efb\u4f55\u5176\u4ed6\u7a0b\u5e8f\u4e00\u6837\u542f\u52a8\u3002</li> </ul>"},{"location":"technology/components/supervisor/#supervisor_2","title":"Supervisor \u7684\u7ec4\u6210\u90e8\u5206","text":"<p>Supervisor \u7684\u7ec4\u6210\u90e8\u5206\u5982\u4e0b\uff1a</p> <p>Supervisord:</p> <ul> <li>supervisor \u7684\u670d\u52a1\u90e8\u5206\u88ab\u547d\u540d\u4e3a <code>supervisord</code>\u3002</li> <li>\u5b83\u8d1f\u8d23\u5728\u81ea\u5df1\u7684\u8c03\u7528\u4e2d\u542f\u52a8\u5b50\u7a0b\u5e8f\uff0c\u54cd\u5e94\u6765\u81ea\u5ba2\u6237\u7aef\u7684\u547d\u4ee4\uff0c\u91cd\u65b0\u542f\u52a8\u5d29\u6e83\u6216\u9000\u51fa\u7684\u5b50\u8fdb\u7a0b\uff0c\u8bb0\u5f55\u5176\u5b50\u8fdb\u7a0b\u7684 <code>stdout</code> \u548c <code>stderr</code> \u8f93\u51fa\uff0c\u4ee5\u53ca\u751f\u6210\u548c\u5904\u7406\u4e0e\u5b50\u8fdb\u7a0b\u751f\u547d\u5468\u671f\u4e2d\u7684\u70b9\u76f8\u5bf9\u5e94\u7684\u201c\u4e8b\u4ef6\u201d\u3002</li> </ul> <p>Supervisorctl:</p> <ul> <li>supervisor \u7684\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u540d\u4e3a <code>supervisorctl</code>\u3002</li> <li>\u5b83\u901a\u8fc7 <code>supervisord</code> \u63d0\u4f9b\u7684\u7c7b\u4f3c\u4e8eshell\u7684\u63a5\u53e3\u63d0\u4f9b\u529f\u80fd\u3002</li> <li>\u901a\u8fc7 <code>supervisorctl</code>\uff0c\u7528\u6237\u53ef\u4ee5\u8fde\u63a5\u5230\u4e0d\u540c\u7684 <code>supervisord</code> \u8fdb\u7a0b\uff08\u4e00\u6b21\u4e00\u4e2a\uff09\uff0c\u83b7\u53d6\u53d7\u63a7\u5b50\u8fdb\u7a0b\u7684\u72b6\u6001\uff0c\u505c\u6b62\u548c\u542f\u52a8\u4e00\u4e2a <code>supervisord</code> \u7684\u5b50\u8fdb\u7a0b\uff0c\u5e76\u83b7\u53d6\u4e00\u4e2a <code>supervisord</code> \u7684\u8fd0\u884c\u8fdb\u7a0b\u5217\u8868\u3002</li> </ul> <p>Web Server:</p> <ul> <li>\u5982\u679c\u60a8\u9488\u5bf9 Internet \u5957\u63a5\u5b57\u542f\u52a8 <code>supervisord</code>\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95ee\u5177\u6709\u4e0e <code>supervisorctl</code> \u76f8\u5f53\u7684\u529f\u80fd\u7684 Web \u7528\u6237\u754c\u9762\u3002</li> <li>\u6fc0\u6d3b\u914d\u7f6e\u6587\u4ef6\u7684 [inet_http_server] \u90e8\u5206\u540e\uff0c\u8bbf\u95ee\u670d\u52a1\u5668 URL\uff08\u4f8b\u5982 http://localhost:9001/\uff09\uff0c\u901a\u8fc7 Web \u754c\u9762\u67e5\u770b\u548c\u63a7\u5236\u8fdb\u7a0b\u72b6\u6001\u3002</li> </ul> <p>XML-RPC Interface:</p> <ul> <li>\u670d\u52a1\u4e8e Web UI \u7684\u540c\u4e00 HTTP \u670d\u52a1\u5668\u63d0\u4f9b\u4e00\u4e2a <code>XML-RPC</code> \u63a5\u53e3\uff0c\u53ef\u7528\u4e8e\u8be2\u95ee\u548c\u63a7\u5236\u4e3b\u7ba1\u53ca\u5176\u8fd0\u884c\u7684\u7a0b\u5e8f\u3002</li> </ul>"},{"location":"technology/components/supervisor/#_2","title":"\u6700\u4f4e\u8981\u6c42","text":"<ul> <li>Supervisor \u5df2\u7ecf\u8fc7\u6d4b\u8bd5\u5e76\u4e14\u5df2\u77e5\u53ef\u4ee5\u5728 Linux (Ubuntu 9.10)\u3001Mac OS X (10.4/10.5/10.6)\u3001Solaris (10 for Intel) \u548c FreeBSD 6.1 \u4e0a\u8fd0\u884c\u3002 \u5b83\u53ef\u80fd\u5728\u5927\u591a\u6570 UNIX \u7cfb\u7edf\u4e0a\u90fd\u80fd\u6b63\u5e38\u5de5\u4f5c\u3002</li> <li>Supervisor \u65e8\u5728\u5728 Python 3 \u7248\u672c 3.4 \u6216\u66f4\u9ad8\u7248\u672c\u4ee5\u53ca Python 2 \u7248\u672c 2.7 \u4e0a\u5de5\u4f5c\u3002</li> <li>Supervisor \u5c06\u4e0d\u4f1a\u5728\u4efb\u4f55\u7248\u672c\u7684 Windows \u4e0b\u8fd0\u884c\u3002</li> </ul>"},{"location":"technology/components/supervisor/#_3","title":"\u5b89\u88c5","text":"<p>\u786e\u4fdd\u60a8\u5177\u6709\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u7684 sudo \u6216 root \u6743\u9650\u3002</p> <p>\u8981\u5728 Centos \u4e0a\u5b89\u88c5supervisor\uff0c\u6211\u4eec\u9700\u8981\u5c06 <code>EPEL</code> \u5b58\u50a8\u5e93\u6dfb\u52a0\u5230\u7cfb\u7edf\u4e2d\uff0c\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u3002</p> <pre><code>yum install epel-release -y\n</code></pre> <p>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5supervisor</p> <pre><code>yum install supervisor -y\n</code></pre> <p>\u4e00\u65e6\u5b89\u88c5\u4e86supervisor\u5305\uff0c\u6211\u4eec\u9700\u8981\u4e3a\u4e3b\u7ba1\u8bbe\u7f6e\u4e00\u4e2a\u76ee\u5f55\u3002</p> <pre><code>sudo mkdir /etc/supervisor\n</code></pre> <p>\u6211\u4eec\u5c06\u793a\u4f8bsupervisor\u914d\u7f6e\u6dfb\u52a0\u5230 <code>supervisord.conf</code> \u6587\u4ef6\u3002</p> <pre><code>echo_supervisord_conf &gt; /etc/supervisor/supervisord.conf\n</code></pre> <p>\u6253\u5f00 <code>/etc/supervisor/supervisord.conf</code> \u6587\u4ef6\u5e76\u5728 [include] \u90e8\u5206\u6dfb\u52a0\u4ee5\u4e0b\u884c</p> <p><code>conf.d</code>\u76ee\u5f55 \u662f\u6211\u4eec\u5c06\u6258\u7ba1\u6240\u6709\u7a0b\u5e8f\u7684\u6587\u4ef6\u5939\u3002</p> <pre><code>files=conf.d/*.conf\n</code></pre> <p>\u4fdd\u5b58\u5e76\u5173\u95ed\u6587\u4ef6\u3002</p> <p>\u8981\u5728 <code>supervisor</code> \u4e0b\u8bbe\u7f6e\u7a0b\u5e8f\uff0c\u6211\u4eec\u9700\u8981\u521b\u5efa <code>conf.d</code> \u76ee\u5f55\u3002</p> <pre><code>mkdir /etc/supervisor/conf.d\n</code></pre> <p>\u8ba9\u6211\u4eec\u542f\u52a8supervisor\u670d\u52a1\u3002</p> <pre><code>systemctl start supervisord\n\n# \u68c0\u67e5\u670d\u52a1\u7684\u72b6\u6001\u5e76\u4f7f\u5176\u5728\u7cfb\u7edf\u542f\u52a8\u65f6\u542f\u52a8\uff0c\nsystemctl status supervisord\n\nsystemctl enable supervisord\n</code></pre>"},{"location":"technology/components/supervisor/#_4","title":"\u6dfb\u52a0\u7a0b\u5e8f","text":"<ul> <li>\u5b98\u65b9\u6587\u6863\u8bf4\u660e\u53c2\u8003: http://supervisord.org/running.html#adding-a-program</li> <li>\u5b98\u65b9\u914d\u7f6e\u8bf4\u660e\u53c2\u8003: http://supervisord.org/configuration.html</li> </ul> <p>\u5bf9\u4e8e\u672c\u6559\u7a0b\uff0c\u6211\u4eec\u5c06\u521b\u5efa shell \u811a\u672c\uff0c\u6211\u4eec\u5c06\u5176\u914d\u7f6e\u4e3a\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u56e0\u4e3a\u6211\u4eec\u5e0c\u671b\u5b83\u7ee7\u7eed\u8fd0\u884c\u3002</p> <p>\u4ee5\u4e0b\u8bbe\u7f6e\u662f\u5982\u4f55\u5c06\u7a0b\u5e8f\u6dfb\u52a0\u5230\u4e3b\u7ba1\u5e76\u7531\u4e3b\u7ba1\u7ba1\u7406\u7684\u793a\u4f8b\u3002\u60a8\u53ef\u4ee5\u6dfb\u52a0\u81ea\u5df1\u7684\u7a0b\u5e8f\u3002</p> <p>\u6211\u4eec\u8981\u6dfb\u52a0\u7684\u811a\u672c\u662f\u76d1\u63a7 Linux \u8fdb\u7a0b\u7684 CPU \u548c\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\u3002</p> <p>\u6211\u4eec\u5c06\u5728 <code>/opt</code> \u76ee\u5f55\u4e0b\u521b\u5efa 4 \u4e2a\u6587\u4ef6\u3002</p> <p>\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a <code>cpu-top</code> \u7684\u6587\u4ef6\u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\u3002</p> <pre><code>#\uff01usr/bin/env bash\nz=$(ps aux)\nwhile read -r z\ndo\nvar=$var$(awk '{print \"cpu_usage{process=\\\"\"$11\"\\\", pid=\\\"\"$2\"\\\"}\", $3z}');\ndone &lt;&lt;&lt; \"$z\"\ncurl -X POST -H \"Content-Type: text/plain\" --data \"$var\" http://localhost:9091/metrics/job/top/instance/machine\n</code></pre> <p>\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a <code>memory-top</code> \u7684\u6587\u4ef6\u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\u3002</p> <pre><code>#\uff01usr/bin/env bash\nz=$(ps aux)\nwhile read -r z\ndo\nvar=$var$(awk '{print \"memory_usage{process=\\\"\"$11\"\\\", pid=\\\"\"$2\"\\\"}\", $4z}');\ndone &lt;&lt;&lt; \"$z\"\ncurl -X POST -H \"Content-Type: text/plain\" --data \"$var\" http://localhost:9091/metrics/job/top/instance/machine\n</code></pre> <p>\u6211\u4eec\u73b0\u5728\u521b\u5efa\u4e86 2 \u4e2a\u540d\u4e3a <code>memory-top</code> \u548c <code>cpu-top</code> \u7684\u6587\u4ef6\u3002</p> <p>\u6211\u4eec\u5c06\u521b\u5efa 2 \u4e2a .sh \u6587\u4ef6\uff08bash \u811a\u672c\uff09\u4ee5\u4fdd\u6301\u811a\u672c\u8fd0\u884c\u3002</p> <p>\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6 <code>memory.sh</code> \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9</p> <pre><code>cd /opt\nwhile sleep 1; do ./memory-top; done;\n</code></pre> <p>\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a <code>cpu.sh</code> \u7684\u6587\u4ef6\u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9</p> <pre><code>cd /opt\nwhile sleep 1; do ./cpu-top; done;\n</code></pre> <p>\u901a\u8fc7\u8fd0\u884c\u786e\u4fdd bash \u811a\u672c\u662f\u53ef\u6267\u884c\u7684\uff0c</p> <pre><code>chmod +x cpu.sh &amp;&amp; chmod +x memory.sh\nchmod +x cpu-top &amp;&amp; chmod +x memory-top\n</code></pre> <p>\u6b64\u65f6\uff0c\u6211\u4eec\u5c06\u5728 <code>/opt</code> \u76ee\u5f55\u4e0b\u6709\u56db\u4e2a\u6587\u4ef6</p> <p>\u73b0\u5728\u6211\u4eec\u9700\u8981\u5728 <code>supervisor</code> \u4e0b\u8bbe\u7f6e\u4e00\u4e2a\u7a0b\u5e8f\u6765\u7ba1\u7406\u8fd9\u4e9b bash \u811a\u672c\u3002</p> <pre><code>cd /etc/supervisord.d/\n</code></pre> <p>\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a <code>cpu.ini</code> \u7684\u6587\u4ef6\u5e76\u6dfb\u52a0\u4ee5\u4e0b\u914d\u7f6e\u3002</p> <pre><code>[program:cpu]\ncommand=sh /opt/cpu.sh\nautostart=true\nautorestart=true\nstderr_logfile=/var/log/long.err.log\nstdout_logfile=/var/log/long.out.log\n</code></pre> <p>\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a <code>memory.ini</code> \u7684\u6587\u4ef6\u5e76\u6dfb\u52a0\u4ee5\u4e0b\u914d\u7f6e\u3002</p> <pre><code>[program:memory]\ncommand=sh /opt/memory.sh\nautostart=true\nautorestart=true\nstderr_logfile=/var/log/long.err.log\nstdout_logfile=/var/log/long.out.log\n</code></pre> <p>\u4fdd\u5b58\u5e76\u5173\u95ed\u6587\u4ef6\u3002</p> <p>\u6211\u4eec\u9700\u8981\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u8ba9\u4e3b\u7ba1\u91cd\u65b0\u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6\u5e76\u5e94\u7528\u6700\u65b0\u7684\u66f4\u6539\u3002</p> <pre><code>supervisorctl reread\n\nsupervisorctl update\n</code></pre> <p>\u8981\u8fd0\u884csupervisor\u5ba2\u6237\u7aef\uff0c\u8bf7\u8fd0\u884c</p> <pre><code>supervisorctl\n</code></pre> <p>\u8981\u68c0\u67e5\u8fdb\u7a0b\u7684\u72b6\u6001\uff0c\u8fd0\u884c</p> <pre><code>status\n</code></pre> <p>\u60a8\u5e94\u8be5\u5f97\u5230\u4ee5\u4e0b\u54cd\u5e94\u3002</p> <pre><code>supervisor&gt; status\ncpu                              RUNNING   pid 12042, uptime 0:00:09\nmemory                           RUNNING   pid 12043, uptime 0:00:09\n</code></pre> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7 linux bash \u6765\u8fd0\u884c<code>status</code>\u68c0\u67e5\u7a0b\u5e8f\u7684\u72b6\u6001\uff0c</p> <pre><code>supervisorctl status\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u4ecesupervisor\u5ba2\u6237\u7aef\u7ba1\u7406\u6bcf\u4e2a\u7a0b\u5e8f\u3002</p> <p>\u73b0\u5728 bash \u811a\u672c\u5c06\u7ee7\u7eed\u6536\u96c6\u9876\u7ea7\u8fd0\u884c\u7684 Linux \u8fdb\u7a0b\u7684 CPU \u548c\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\u3002</p> <p>\u8fd9\u4e9b\u811a\u672c\u5c06\u7531supervisor\u670d\u52a1\u7ba1\u7406\u3002</p> <p>\u8981\u5217\u51fa\u4e3b\u7ba1\u5ba2\u6237\u7aef\u7684\u6240\u6709\u53ef\u7528\u547d\u4ee4\uff0c</p> <pre><code>(venv) [root@ch1 opt]# supervisorctl\nsupervisor&gt; help\n\ndefault commands (type help &lt;topic&gt;):\n=====================================\nadd    exit      open  reload  restart   start   tail\navail  fg        pid   remove  shutdown  status  update\nclear  maintail  quit  reread  signal    stop    version\n\nsupervisor&gt;\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8fd0\u884c\u547d\u4ee4\u6765\u7ba1\u7406\u6bcf\u4e2a\u7a0b\u5e8f</p> <pre><code>command programname\n</code></pre> <pre><code>supervisor&gt; version\n3.4.0\nsupervisor&gt; tail memory stderr\n   0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0curl: (7) Failed connect to localhost:9091; \u62d2\u7edd\u8fde\u63a5\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\ncurl: (7) Failed connect to localhost:9091; \u62d2\u7edd\u8fde\u63a5\nsupervisor&gt; tail cpu stderr\n   0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\ncurl: (7) Failed connect to localhost:9091; \u62d2\u7edd\u8fde\u63a5\n</code></pre>"},{"location":"technology/components/supervisor/#supervisor-webserver","title":"\u914d\u7f6esupervisor Webserver \u5ba2\u6237\u7aef","text":"<p>\u8981\u5141\u8bb8\u8bbf\u95ee supervisord webserver\uff0c\u8bf7\u6253\u5f00 <code>/etc/supervisord.conf</code> \u6587\u4ef6\u5e76\u8f6c\u5230 [inet_http_server] \u90e8\u5206\u3002</p> <p>\u53d6\u6d88\u6ce8\u91ca\u6240\u6709\u56db\u884c\u5e76\u5982\u4e0b\u6240\u793a\u8fdb\u884c\u914d\u7f6e\u3002</p> <pre><code>[inet_http_server]\nport=*:9001\nusername=give_username\npassword=give_password\n</code></pre> <p>\u4e0d\u8981\u5fd8\u8bb0\u5c06 <code>give_username</code> \u548c <code>give_password</code> \u66ff\u6362\u4e3a\u6240\u9700\u7684\u51ed\u636e\u3002</p> <p>\u4fdd\u5b58\u5e76\u5173\u95ed\u6587\u4ef6\u3002</p> <p>\u6211\u4eec\u9700\u8981\u91cd\u65b0\u542f\u52a8 supervisord \u670d\u52a1\u624d\u80fd\u4f7f\u66f4\u6539\u751f\u6548\u3002</p> <pre><code>systemctl restart supervisord\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u670d\u52a1\u5668\u7684ip\u5730\u5740\u548c\u7aef\u53e39001\u8bbf\u95eesupervisor webservice\u63a5\u53e3\u3002</p> <pre><code>http://IPaddress:9001\n</code></pre> <p>\u4e00\u65e6\u901a\u8fc7\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5b83\u5c06\u8be2\u95ee\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002</p> <p>\u60a8\u5c06\u770b\u5230\u4ee5\u4e0b\u5c4f\u5e55\u3002</p> <p></p> <p>\u4ece\u8fd9\u4e2a\u754c\u9762\u6211\u4eec\u53ef\u4ee5\u7ba1\u7406\u7a0b\u5e8f\u3002</p>"},{"location":"technology/components/supervisor/#_5","title":"\u603b\u7ed3","text":"<p>\u6211\u4eec\u5df2\u7ecf\u5728 Centos \u4e0a\u6210\u529f\u5b89\u88c5\u548c\u914d\u7f6e\u4e86 supervisor\uff0c\u5e76\u4e14\u6211\u4eec\u5df2\u7ecf\u5b66\u4f1a\u4e86\u4f7f\u7528 supervisor \u670d\u52a1\u6765\u7ba1\u7406\u7a0b\u5e8f\u3002</p> <p>\u5e0c\u671b\u5bf9\u60a8\u6709\u6240\u5e2e\u52a9\u3002\u8bf7\u67e5\u770b\u6211\u7684\u5176\u4ed6\u6587\u7ae0\u3002</p> <ul> <li>Top 24 Docker Commands Explained With Examples</li> <li>Launch ECS Cluster Using AWS Console</li> <li>Setup Memcached Cluster In AWS</li> <li>Audit AWS Resources Using AWS Config</li> <li>Create Elasticsearch Cluster In AWS</li> </ul>"},{"location":"technology/components/zookeeper/","title":"Zookeeper","text":"<p>\u5b98\u7f51: https://zookeeper.apache.org/</p> <p>\u4e0b\u8f7d: https://zookeeper.apache.org/releases.html</p>"},{"location":"technology/components/zookeeper/#_1","title":"\u914d\u7f6e\u6837\u4f8b","text":"<pre><code>tickTime = 2000\ndataDir = /home/data/zookeeper/data\ndataLogDir = /home/data/zookeeper/dataLog\nclientPort = 2181\ninitLimit = 5\nsyncLimit = 2\n\n# \u5b9a\u65f6\u6e05\u7406\u6570\u636e\n# The number of snapshots to retain in dataDir\nautopurge.snapRetainCount=10\n# Purge task interval in hours\n# Set to \"0\" to disable auto purge feature\nautopurge.purgeInterval=1\n\n# admin.enableServer=false\n# admin.serverPort=8088\n</code></pre>"},{"location":"technology/database/clickhouse/","title":"clickhouse","text":"<ul> <li>\u5b98\u7f51: https://clickhouse.com/</li> <li>\u6587\u6863: https://clickhouse.com/docs/en/intro/</li> </ul>"},{"location":"technology/database/clickhouse/#_1","title":"\u5e38\u7528\u67e5\u8be2","text":""},{"location":"technology/database/clickhouse/#_2","title":"\u67e5\u8be2\u6570\u636e\u5e93\u8868\u5927\u5c0f","text":"<pre><code>SELECT\nconcat(database, '.', table) AS table,\nformatReadableSize(sum(bytes)) AS size,\nsum(bytes) AS bytes_size,\nsum(rows) AS rows,\nmax(modification_time) AS latest_modification,\nany(engine) AS engine\nFROM system.parts\nWHERE active\nGROUP BY\ndatabase,\ntable\nORDER BY bytes_size DESC\n</code></pre> <p>\u7ed3\u679c:</p> table size bytes_size rows latest_modification engine system.asynchronous_metric_log 9.02 GiB 9684296449 7632396946 2022-06-01 15:23:21.000 MergeTree system.metric_log 1.66 GiB 1783387541 24864079 2022-06-01 15:23:25.000 MergeTree system.query_thread_log 1.40 GiB 1502640094 54269589 2022-06-01 15:22:14.000 MergeTree system.query_log 364.15 MiB 381840631 2324632 2022-06-01 15:23:19.000 MergeTree system.trace_log 43.55 MiB 45665106 1529712 2022-06-01 15:18:53.000 MergeTree"},{"location":"technology/database/clickhouse/#_3","title":"\u96c6\u7fa4\u67e5\u8be2","text":"<p>\u53c2\u8003: https://clickhouse.com/docs/en/sql-reference/table-functions/cluster/</p> <pre><code>SELECT table,\nsum(rows) AS `rows`,\nformatReadableSize(sum(data_uncompressed_bytes)) AS `uncps_bytes`,\nformatReadableSize(sum(data_compressed_bytes)) AS `bytes`,\nround((sum(data_compressed_bytes) / sum(data_uncompressed_bytes)) * 100, 0) AS `cps_rate`\nFROM cluster('rz_cluster', system.parts)\nGROUP BY table\n</code></pre> <p>\u7ed3\u679c:</p> table rows uncps_bytes bytes cps_rate trace_log 2162927 452.87 MiB 60.91 MiB 13.0 query_log 3167006 3.95 GiB 466.63 MiB 12.0 asynchronous_metric_log 30720829855 686.76 GiB 32.01 GiB 5.0 dimension_process_info 21618 506.67 KiB 101.94 KiB 20.0 metric_log 103575826 220.51 GiB 6.44 GiB 3.0 query_thread_log 57482489 41.82 GiB 1.60 GiB 4.0 dimension_send_info 12 354.00 B 260.00 B 73.0"},{"location":"technology/database/clickhouse/#clickhouse_1","title":"Clickhouse \u65f6\u533a","text":""},{"location":"technology/database/clickhouse/#_4","title":"\u9ed8\u8ba4\u8bbe\u7f6e","text":"<p>Clickhouse\u9ed8\u8ba4\u662f\u8bfb\u53d6\u64cd\u4f5c\u7cfb\u7edf\u7684\u65f6\u533a \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4\u548cclickhouse\u7684\u547d\u4ee4\u67e5\u770b\u9a8c\u8bc1\uff1a</p> <pre><code># clickhouse\u67e5\u770b\u5f53\u524d\u65f6\u95f4\nClickhouse&gt; select now();\n\nSELECT now()\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500now()\u2500\u2510\n\u2502 2020-07-11 23:47:56 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n1 rows in set. Elapsed: 0.003 sec. \n\nClickhouse&gt; exit;\nBye.\n\n# \u67e5\u770b\u7cfb\u7edf\u65f6\u95f4\n[root@hadoop ~]# date\nSat Jul 11 23:48:01 CST 2020\n\n\n# \u6b64\u65f6\u64cd\u4f5c\u7cfb\u7edf\u7684\u65f6\u533a\u548c\u65f6\u95f4\u662f\uff1a\n&gt; timedatectl\n      Local time: Sat 2020-07-11 23:49:06 CST\n  Universal time: Sat 2020-07-11 15:49:06 UTC\n        RTC time: Sat 2020-07-11 15:49:05\n       Time zone: Asia/Shanghai (CST, +0800)\nNTP enabled: n/a\nNTP synchronized: no\n RTC in local TZ: no\n      DST active: n/a\n\n# \u64cd\u4f5c\u7cfb\u7edf\u7684\u547d\u4ee4\uff1a\n# timedatectl list-timezones\n# list-timezones \u5217\u51fa\u7cfb\u7edf\u4e0a\u652f\u6301\u7684\u65f6\u533a\n# set-timezone \u8bbe\u5b9a\u65f6\u533a\n# set-time \u8bbe\u7f6e\u65f6\u95f4\n# set-btp \u8bbe\u7f6e\u540c\u6b65ntp\n\n# \u793a\u4f8b:\u8bbe\u7f6e\u65f6\u533a\u793a\u4f8b\uff1a\n# timedatec \u4fee\u6539\u65f6\u533a\n\ntimedatectl set-timezone \"America/New_York\"\n\n# timedatectl set-timezone Asia/Shanghai\n\n# ntp\u8bbe\u7f6e\uff1a\nyum -y install ntp \nsystemctl enable ntpd \nsystemctl start ntpd\n\n# \u540c\u6b65\u65f6\u95f4\nntpdate -u cn.pool.ntp.org\n</code></pre>"},{"location":"technology/database/clickhouse/#clickhouse_2","title":"clickhouse\u914d\u7f6e","text":"<p>clickhouse\u63d0\u4f9b\u4e86\u914d\u7f6e\u7684\u53c2\u6570\u9009\u578b\uff1a</p> <ol> <li> <p>\u4fee\u6539\u8bbe\u7f6e</p> <p><code>sudo vim /etc/clickhouse-server/config.xml</code></p> <p><code>&lt;timezone&gt;Asia/Shanghai&lt;/timezone&gt;</code></p> <p>\u7531\u4e8eclickhouse\u662f\u4fc4\u7f57\u65af\u4eba\u4e3b\u5bfc\u5f00\u53d1\u7684\uff0c\u9ed8\u8ba4\u8bbe\u7f6e\u4e3a<code>Europe/Moscow</code></p> </li> <li> <p>\u91cd\u542f\u670d\u52a1\u5668\uff1a</p> <p><code>sudo service clickhouse-server restart</code></p> </li> </ol> <p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u9009\u578b\u7684\u8bf4\u660e\u5982\u4e0b\uff1a</p> <pre><code>&lt;!-- Server time zone could be set here.\n    Time zone is used when converting between String and DateTime types,\n    when printing DateTime in text formats and parsing DateTime from text,\n    it is used in date and time related functions, if specific time zone was not passed as an argument.\n    Time zone is specified as identifier from IANA time zone database, like UTC or Africa/Abidjan.\n    If not specified, system time zone at server startup is used.\n    Please note, that server could display time zone alias instead of specified name.\n    Example: W-SU is an alias for Europe/Moscow and Zulu is an alias for UTC.\n--&gt;\n&lt;!-- &lt;timezone&gt;Europe/Moscow&lt;/timezone&gt; --&gt;\n\n&lt;!-- \u65f6\u533a\u5728\u65e5\u671f\u65f6\u95f4\u76f8\u5173\u7684\u51fd\u6570\uff0c\u82e5\u6307\u5b9a\u65f6\u533a\u4f5c\u4e3a\u53c2\u6570\u3002\u5728Datetime\u548cString\u7c7b\u578b\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\n\u65f6\u533a\u7684\u6307\u5b9a\u662f\u6309\u7167IANA\u6807\u51c6\u7684\u65f6\u533a\u5e93\u6307\u5b9a\u7684\uff0c\u53ef\u4ee5\u5728Linux\u7cfb\u7edf\u4e2d\u901a\u8fc7\u547d\u4ee4\u67e5\u8be2\n\u82e5\u4e0d\u6307\u5b9a\u5219\u4f7f\u7528\u7cfb\u7edf\u542f\u52a8\u7684\u65f6\u533a\u3002 --&gt;\n</code></pre>"},{"location":"technology/database/clickhouse/#clickhouse_3","title":"clickhouse\u65f6\u533a\u51fd\u6570","text":"<p>\u539f\u6587: https://blog.csdn.net/vkingnew/article/details/107227037/</p> <p>\u5b98\u7f51\u65f6\u95f4\u65e5\u671f\u51fd\u6570: https://clickhouse.com/docs/zh/sql-reference/functions/date-time-functions/</p> <p>clickhouse\u76f8\u5173\u7684\u65f6\u533a\u51fd\u6570\uff1a</p> <pre><code>Clickhouse&gt; select formatDateTime(now(),'%F %T') as dt,toString(toDateTime(dt),'Asia/Shanghai') as BJ_time,toString(toDateTime(dt),'America/New_York') as NY_time;\n\nSELECT formatDateTime(now(), '%F %T') AS dt,\ntoString(toDateTime(dt), 'Asia/Shanghai') AS BJ_time,\ntoString(toDateTime(dt), 'America/New_York') AS NY_time\n\n\u250c\u2500dt\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500BJ_time\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500NY_time\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 2020-07-12 00:13:29 \u2502 2020-07-12 00:13:29 \u2502 2020-07-11 12:13:29 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n1 rows in set. Elapsed: 0.006 sec. -- \u53ef\u4ee5\u770b\u5230Clickhouse\u9ed8\u8ba4\u91c7\u7528\u7684\u7cfb\u7edf\u7684UTC\n\n\nClickhouse&gt; select formatDateTime(now(),'%F %T') as dt,toString(toDateTime(dt,'UTC'),'Asia/Shanghai') as BJ_time,toTimeZone(toDateTime(dt,'UTC'),'Asia/Shanghai') as random_time,toString(toDateTime(dt),'Asia/Shanghai') SH_TIME,toTimeZone(toDateTime(dt),'Asia/Shanghai') SH_time,toTimeZone(toDateTime(dt,'America/New_York'), 'Asia/Hong_Kong') HK_time;\n\nSELECT formatDateTime(now(), '%F %T') AS dt,\ntoString(toDateTime(dt, 'UTC'), 'Asia/Shanghai') AS BJ_time,\ntoTimeZone(toDateTime(dt, 'UTC'), 'Asia/Shanghai') AS random_time,\ntoString(toDateTime(dt), 'Asia/Shanghai') AS SH_TIME,\ntoTimeZone(toDateTime(dt), 'Asia/Shanghai') AS SH_time,\ntoTimeZone(toDateTime(dt, 'America/New_York'), 'Asia/Hong_Kong') AS HK_time\n\n\u250c\u2500dt\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500BJ_time\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500random_time\u2500\u252c\u2500SH_TIME\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500SH_time\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500HK_time\u2500\u2510\n\u2502 2020-07-12 00:27:25 \u2502 2020-07-12 08:27:25 \u2502 2020-07-12 08:27:25 \u2502 2020-07-12 00:27:25 \u2502 2020-07-12 00:27:25 \u2502 2020-07-12 12:27:25 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n1 rows in set. Elapsed: 0.007 sec. -- \u53ef\u4ee5\u770b\u5230toTimeZone,\u4e0etoString \u7684\u529f\u80fd\u5f88\u50cf\n\n\nClickhouse&gt; select formatDateTime(now(),'%F %T') as dt,toTypeName(toString(toDateTime(dt),'Asia/Shanghai')) SH_TIME,toTypeName(toTimeZone(toDateTime(dt),'Asia/Shanghai')) SH_time,toTypeName(toTimeZone(toDateTime(dt,'America/New_York'), 'Asia/Hong_Kong')) HK_time;\n\nSELECT formatDateTime(now(), '%F %T') AS dt,\ntoTypeName(toString(toDateTime(dt), 'Asia/Shanghai')) AS SH_TIME,\ntoTypeName(toTimeZone(toDateTime(dt), 'Asia/Shanghai')) AS SH_time,\ntoTypeName(toTimeZone(toDateTime(dt, 'America/New_York'), 'Asia/Hong_Kong')) AS HK_time\n\n\u250c\u2500dt\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500SH_TIME\u2500\u252c\u2500SH_time\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500HK_time\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 2020-07-12 00:29:43 \u2502 String  \u2502 DateTime('Asia/Shanghai') \u2502 DateTime('Asia/Hong_Kong') \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n1 rows in set. Elapsed: 0.002 sec. -- toTimeZone\u51fd\u6570\u53ef\u4ee5\u5b9e\u73b0\u65f6\u533a\u8f6c\u6362\uff0c\u901a\u8fc7toTypeName\u8fd8\u53ef\u4ee5\u83b7\u77e5\u5b57\u6bb5\u7c7b\u578b\uff0c\u4ee5\u53ca\u8be5\u5b57\u6bb5\u5bf9\u5e94\u7684\u65f6\u533a\u3002\n</code></pre>"},{"location":"technology/database/elasticsearch_py/","title":"ElasticSearch","text":"<ul> <li>\u521b\u5efa\u65f6\u95f4: 2023\u5e7402\u670821\u65e517:32:47</li> <li>github: https://github.com/elastic/elasticsearch-py</li> <li>\u6e90\u6587\u6863: https://ela.st/es-python</li> <li>RTD\u5730\u5740: https://elasticsearch-py.readthedocs.io/en/v8.6.2/</li> <li>ES\u5b98\u65b9\u4e2d\u6587\u8d44\u6599: https://www.elastic.co/guide/cn/index.html</li> </ul> <p>Elasticsearch Python Client</p>"},{"location":"technology/database/elasticsearch_py/#_1","title":"\u529f\u80fd","text":"<ul> <li>\u5c06\u57fa\u672c\u7684 Python \u6570\u636e\u7c7b\u578b\u4e0e JSON \u76f8\u4e92\u8f6c\u6362</li> <li>\u96c6\u7fa4\u8282\u70b9\u7684\u53ef\u914d\u7f6e\u81ea\u52a8\u53d1\u73b0</li> <li>\u6301\u4e45\u8fde\u63a5</li> <li>\u8de8\u53ef\u7528\u8282\u70b9\u7684\u8d1f\u8f7d\u5e73\u8861\uff08\u4f7f\u7528\u53ef\u63d2\u5165\u9009\u62e9\u7b56\u7565\uff09</li> <li>\u5931\u8d25\u7684\u8fde\u63a5\u60e9\u7f5a\uff08\u57fa\u4e8e\u65f6\u95f4 - \u5728\u8fbe\u5230\u8d85\u65f6\u4e4b\u524d\u4e0d\u4f1a\u91cd\u8bd5\u5931\u8d25\u7684\u8fde\u63a5\uff09</li> <li>\u652f\u6301 TLS \u548c HTTP \u8eab\u4efd\u9a8c\u8bc1</li> <li>\u8de8\u8bf7\u6c42\u7684\u7ebf\u7a0b\u5b89\u5168</li> <li>\u53ef\u63d2\u62d4\u67b6\u6784</li> <li>\u60ef\u7528\u5730\u4e00\u8d77\u4f7f\u7528 API \u7684\u8f85\u52a9\u51fd\u6570</li> </ul>"},{"location":"technology/database/elasticsearch_py/#_2","title":"\u5b89\u88c5","text":"<p>\u4f7f\u7528 pip \u5b89\u88c5 elasticsearch \u5305\uff1a</p> <pre><code>python -m pip install elasticsearch\n</code></pre> <p>\u5982\u679c\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u5728 Python \u4e2d\u4f7f\u7528 <code>async/await</code>\uff0c\u60a8\u53ef\u4ee5\u5b89\u88c5<code>async</code>\u6269\u5c55\u4ee5\u4f7f\u7528\uff1a</p> <pre><code>python -m pip install elasticsearch[async]\n</code></pre> <p>\u9605\u8bfb\u6709\u5173\u5982\u4f55\u5728\u6b64\u9879\u76ee\u4e2d\u4f7f\u7528 asyncio \u7684\u66f4\u591a\u4fe1\u606f\u3002</p>"},{"location":"technology/database/elasticsearch_py/#_3","title":"\u517c\u5bb9\u6027","text":"<p>\u8bed\u8a00\u5ba2\u6237\u7aef\u5411\u524d\u517c\u5bb9\uff1b \u8fd9\u610f\u5473\u7740\u5ba2\u6237\u7aef\u652f\u6301\u4e0e\u66f4\u5927\u6216\u76f8\u7b49\u7684\u6b21\u8981\u7248\u672c\u7684 Elasticsearch \u8fdb\u884c\u901a\u4fe1\u3002 Elasticsearch \u8bed\u8a00\u5ba2\u6237\u7aef\u4ec5\u5411\u540e\u517c\u5bb9\u9ed8\u8ba4\u53d1\u884c\u7248\uff0c\u5e76\u4e14\u4e0d\u4f5c\u4efb\u4f55\u4fdd\u8bc1\u3002</p> <p>\u5982\u679c\u60a8\u9700\u8981\u540c\u65f6\u5b89\u88c5\u591a\u4e2a\u7248\u672c\uff0c\u65e7\u7248\u672c\u4e5f\u4f5c\u4e3a elasticsearch2 \u548c elasticsearch5 \u53d1\u5e03\u3002</p>"},{"location":"technology/database/elasticsearch_py/#_4","title":"\u6587\u6863","text":"<p>\u5ba2\u6237\u7aef\u6587\u6863\u53ef\u5728 elastic.co \u548cRead the Docs\u4e2d\u627e\u5230\u3002</p>"},{"location":"technology/database/elasticsearch_py/#_5","title":"\u5feb\u901f\u5f00\u59cb","text":"<pre><code># Import the client from the 'elasticsearch' module\n&gt;&gt;&gt; from elasticsearch import Elasticsearch\n\n# Instantiate a client instance\n&gt;&gt;&gt; client = Elasticsearch(\"http://localhost:9200\")\n\n# Call an API, in this example `info()`\n&gt;&gt;&gt; resp = client.info()\n\n# View the result\n&gt;&gt;&gt; resp\n{\n  \"name\" : \"instance-name\",\n  \"cluster_name\" : \"cluster-name\",\n  \"cluster_uuid\" : \"cluster-uuid\",\n  \"version\" : {\n    \"number\" : \"7.14.0\",\n    ...\n  },\n  \"tagline\" : \"You know, for Search\"\n}\n</code></pre> <p>\u60a8\u53ef\u4ee5\u5728\u6587\u6863\u4e2d\u9605\u8bfb\u6709\u5173\u914d\u7f6e\u5ba2\u6237\u7aef\u7684\u66f4\u591a\u4fe1\u606f\u3002</p>"},{"location":"technology/database/elasticsearch_py/#_6","title":"\u8bb8\u53ef\u8bc1","text":"<p>Copyright 2023 Elasticsearch B.V. Licensed under the Apache License, Version 2.0.</p> <p>\u7248\u6743\u6240\u6709 2023 Elasticsearch B.V. \u6839\u636e Apache \u8bb8\u53ef\u8bc1 2.0 \u7248\u83b7\u5f97\u8bb8\u53ef\u3002</p>"},{"location":"technology/database/es_aggs/","title":"ES\u805a\u5408\u67e5\u8be2","text":"<ul> <li>\u539f\u6587: https://www.cnblogs.com/shoufeng/p/11290669.html</li> </ul>"},{"location":"technology/database/es_aggs/#_1","title":"\u666e\u901a\u805a\u5408\u5206\u6790","text":""},{"location":"technology/database/es_aggs/#_2","title":"\u76f4\u63a5\u805a\u5408\u7edf\u8ba1","text":"<p>(1) \u8ba1\u7b97\u6bcf\u4e2atag\u4e0b\u7684\u6587\u6863\u6570\u91cf, \u8bf7\u6c42\u8bed\u6cd5:</p> <pre><code>GET book_shop/it_book/_search\n{\n\"size\": 0,       // \u4e0d\u663e\u793a\u547d\u4e2d(hits)\u7684\u6240\u6709\u6587\u6863\u4fe1\u606f\n\"aggs\": {\n\"group_by_tags\": { // \u805a\u5408\u7ed3\u679c\u7684\u540d\u79f0, \u9700\u8981\u81ea\u5b9a\u4e49(\u590d\u5236\u65f6\u8bf7\u53bb\u6389\u6b64\u6ce8\u91ca)\n\"terms\": {\n\"field\": \"tags\"\n}\n}\n}\n}\n</code></pre> <p>(2) \u53d1\u751f\u9519\u8bef:</p> <p>\u8bf4\u660e: \u7d22\u5f15book_shop\u7684mapping\u6620\u5c04\u662fES\u81ea\u52a8\u521b\u5efa\u7684, \u5b83\u628atag\u89e3\u6790\u6210\u4e86text\u7c7b\u578b, \u5728\u53d1\u8d77\u5bf9tag\u7684\u805a\u5408\u8bf7\u6c42\u540e, \u5c06\u629b\u51fa\u5982\u4e0b\u9519\u8bef:</p> <pre><code>{\n\"error\": {\n\"root_cause\": [\n{\n\"type\": \"illegal_argument_exception\",\n\"reason\": \"Fielddata is disabled on text fields by default. Set fielddata=true on [tags] in order to load fielddata in memory by uninverting the inverted index. Note that this can however use significant memory. Alternatively use a keyword field instead.\"\n}\n],\n\"type\": \"search_phase_execution_exception\",\n\"reason\": \"all shards failed\",\n\"phase\": \"query\",\n\"grouped\": true,\n\"failed_shards\": [......]\n},\n\"status\": 400\n}\n</code></pre> <p>(3) \u9519\u8bef\u5206\u6790:</p> <p>\u9519\u8bef\u4fe1\u606f: Set fielddata=true on [xxxx] ...... \u9519\u8bef\u5206\u6790: \u9ed8\u8ba4\u60c5\u51b5\u4e0b, Elasticsearch \u5bf9 text \u7c7b\u578b\u7684\u5b57\u6bb5(field)\u7981\u7528\u4e86 fielddata; text \u7c7b\u578b\u7684\u5b57\u6bb5\u5728\u521b\u5efa\u7d22\u5f15\u65f6\u4f1a\u8fdb\u884c\u5206\u8bcd\u5904\u7406, \u800c\u805a\u5408\u64cd\u4f5c\u5fc5\u987b\u57fa\u4e8e\u5b57\u6bb5\u7684\u539f\u59cb\u503c\u8fdb\u884c\u5206\u6790; \u6240\u4ee5\u5982\u679c\u8981\u5bf9 text \u7c7b\u578b\u7684\u5b57\u6bb5\u8fdb\u884c\u805a\u5408\u64cd\u4f5c, \u5c31\u9700\u8981\u5b58\u50a8\u5176\u539f\u59cb\u503c \u2014\u2014 \u521b\u5efamapping\u65f6\u6307\u5b9afielddata=true, \u4ee5\u4fbf\u901a\u8fc7\u53cd\u8f6c\u5012\u6392\u7d22\u5f15(\u5373\u6b63\u6392\u7d22\u5f15)\u5c06\u7d22\u5f15\u6570\u636e\u52a0\u8f7d\u81f3\u5185\u5b58\u4e2d.</p> <p>(4) \u89e3\u51b3\u65b9\u6848\u4e00: \u5bf9text\u7c7b\u578b\u7684\u5b57\u6bb5\u5f00\u542ffielddata\u5c5e\u6027:</p> <p>\u5c06\u8981\u5206\u7ec4\u7edf\u8ba1\u7684text field(\u5373tags)\u7684fielddata\u8bbe\u7f6e\u4e3atrue:</p> <pre><code>PUT book_shop/_mapping/it_book\n{\n\"properties\": {\n\"tags\": {\n\"type\": \"text\",\n\"fielddata\": true\n}\n}\n}\n</code></pre> <p>\u53ef\u53c2\u8003\u5b98\u65b9\u6587\u6863\u8fdb\u884c\u8bbe\u7f6e: https://www.elastic.co/guide/en/elasticsearch/reference/6.6/fielddata.html. \u6210\u529f\u540e\u7684\u7ed3\u679c\u5982\u4e0b:</p> <pre><code>{\n\"acknowledged\": true\n}\n</code></pre> <p>\u518d\u6b21\u7edf\u8ba1, \u5f97\u5230\u7684\u7ed3\u679c\u5982\u4e0b:</p> <pre><code>{\n\"took\": 153,\n\"timed_out\": false,\n\"_shards\": {\n\"total\": 5,\n\"successful\": 5,\n\"skipped\": 0,\n\"failed\": 0\n},\n\"hits\": {\n\"total\": 4,\n\"max_score\": 0.0,\n\"hits\": []\n},\n\"aggregations\": {\n\"group_by_tags\": {\n\"doc_count_error_upper_bound\": 0,\n\"sum_other_doc_count\": 6,\n\"buckets\": [\n{\n\"key\": \"java\",\n\"doc_count\": 3\n},\n{\n\"key\": \"\u7a0b\",\n\"doc_count\": 2\n},\n......\n]\n}\n}\n}\n</code></pre> <p>(5) \u89e3\u51b3\u65b9\u6cd5\u4e8c: \u4f7f\u7528\u5185\u7f6ekeyword\u5b57\u6bb5:</p> <p>\u5f00\u542ffielddata\u5c06\u5360\u7528\u5927\u91cf\u7684\u5185\u5b58.</p> <p>Elasticsearch 5.x \u7248\u672c\u5f00\u59cb\u652f\u6301\u901a\u8fc7text\u7684\u5185\u7f6e\u5b57\u6bb5keyword\u4f5c\u7cbe\u786e\u67e5\u8be2\u3001\u805a\u5408\u5206\u6790:</p> <pre><code>GET shop/it_book/_search\n{\n\"size\": 0,\n\"aggs\": {\n\"group_by_tags\": {\n\"terms\": {\n\"field\": \"tags.keyword\" // \u4f7f\u7528text\u7c7b\u578b\u7684\u5185\u7f6ekeyword\u5b57\u6bb5\n}\n}\n}\n}\n</code></pre>"},{"location":"technology/database/es_aggs/#_3","title":"\u5148\u68c0\u7d22, \u518d\u805a\u5408","text":"<p>(1) \u7edf\u8ba1name\u4e2d\u542b\u6709\u201cjvm\u201d\u7684\u56fe\u4e66\u4e2d\u6bcf\u4e2atag\u7684\u6587\u6863\u6570\u91cf, \u8bf7\u6c42\u8bed\u6cd5:</p> <pre><code>GET book_shop/it_book/_search\n{\n\"query\": {\n\"match\": { \"name\": \"jvm\" }\n}, \"aggs\": {\n\"group_by_tags\": {  // \u805a\u5408\u7ed3\u679c\u7684\u540d\u79f0, \u9700\u8981\u81ea\u5b9a\u4e49. \u4e0b\u9762\u4f7f\u7528\u5185\u7f6e\u7684keyword\u5b57\u6bb5: \n\"terms\": { \"field\": \"tags.keyword\" }\n}\n}\n}\n</code></pre> <p>(2) \u54cd\u5e94\u7ed3\u679c:</p> <pre><code>{\n\"took\" : 7,\n\"timed_out\" : false,\n\"_shards\" : {\n\"total\" : 5,\n\"successful\" : 5,\n\"skipped\" : 0,\n\"failed\" : 0\n},\n\"hits\" : {\n\"total\" : 1,\n\"max_score\" : 0.64072424,\n\"hits\" : [\n{\n\"_index\" : \"book_shop\",\n\"_type\" : \"it_book\",\n\"_id\" : \"2\",\n\"_score\" : 0.64072424,\n\"_source\" : {\n\"name\" : \"\u6df1\u5165\u7406\u89e3Java\u865a\u62df\u673a\uff1aJVM\u9ad8\u7ea7\u7279\u6027\u4e0e\u6700\u4f73\u5b9e\u8df5\",\n\"author\" : \"\u5468\u5fd7\u660e\",\n\"category\" : \"\u7f16\u7a0b\u8bed\u8a00\",\n\"desc\" : \"Java\u56fe\u4e66\u9886\u57df\u516c\u8ba4\u7684\u7ecf\u5178\u8457\u4f5c\",\n\"price\" : 79.0,\n\"date\" : \"2013-10-01\",\n\"publisher\" : \"\u673a\u68b0\u5de5\u4e1a\u51fa\u7248\u793e\",\n\"tags\" : [\n\"Java\",\n\"\u865a\u62df\u673a\",\n\"\u6700\u4f73\u5b9e\u8df5\"\n]\n}\n}\n]\n},\n\"aggregations\" : {\n\"group_by_tags\" : {\n\"doc_count_error_upper_bound\" : 0,\n\"sum_other_doc_count\" : 0,\n\"buckets\" : [\n{\n\"key\" : \"Java\",\n\"doc_count\" : 1\n},\n{\n\"key\" : \"\u6700\u4f73\u5b9e\u8df5\",\n\"doc_count\" : 1\n},\n{\n\"key\" : \"\u865a\u62df\u673a\",\n\"doc_count\" : 1\n}\n]\n}\n}\n}\n</code></pre>"},{"location":"technology/database/es_aggs/#fielddatakeyword","title":"\u6269\u5c55: fielddata\u548ckeyword\u7684\u805a\u5408\u6bd4\u8f83","text":"<ul> <li>\u4e3a\u67d0\u4e2a text \u7c7b\u578b\u7684\u5b57\u6bb5\u5f00\u542ffielddata\u5b57\u6bb5\u540e, \u805a\u5408\u5206\u6790\u64cd\u4f5c\u4f1a\u5bf9\u8fd9\u4e2a\u5b57\u6bb5\u7684\u6240\u6709\u5206\u8bcd\u5206\u522b\u8fdb\u884c\u805a\u5408, \u83b7\u5f97\u7684\u7ed3\u679c\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u5e76\u4e0d\u7b26\u5408\u6211\u4eec\u7684\u9700\u6c42.</li> <li>\u4f7f\u7528keyword\u5185\u7f6e\u5b57\u6bb5, \u4e0d\u4f1a\u5bf9\u76f8\u5173\u7684\u5206\u8bcd\u8fdb\u884c\u805a\u5408, \u7ed3\u679c\u53ef\u80fd\u66f4\u6709\u7528. -- \u63a8\u8350\u4f7f\u7528text\u7c7b\u578b\u5b57\u6bb5\u7684\u5185\u7f6ekeyword\u8fdb\u884c\u805a\u5408\u64cd\u4f5c.</li> </ul>"},{"location":"technology/database/es_aggs/#_4","title":"\u666e\u901a\u805a\u5408\u5206\u6790","text":""},{"location":"technology/database/es_aggs/#_5","title":"\u5148\u5206\u7ec4, \u518d\u805a\u5408\u7edf\u8ba1","text":"<p>(1) \u5148\u6309tags\u5206\u7ec4, \u518d\u8ba1\u7b97\u6bcf\u4e2atag\u4e0b\u56fe\u4e66\u7684\u5e73\u5747\u4ef7\u683c, \u8bf7\u6c42\u8bed\u6cd5:</p> <pre><code>GET book_shop/it_book/_search\n{\n\"size\": 0, \"aggs\": {\n\"group_by_tags\": {\n\"terms\": { \"field\": \"tags.keyword\" },\n\"aggs\": {\n\"avg_price\": {\n\"avg\": { \"field\": \"price\" }\n}\n}\n}\n}\n}\n</code></pre> <p>(2) \u54cd\u5e94\u7ed3\u679c:</p> <pre><code> \"hits\" : {\n\"total\" : 3,\n\"max_score\" : 0.0,\n\"hits\" : [ ]\n},\n\"aggregations\" : {\n\"group_by_tags\" : {\n\"doc_count_error_upper_bound\" : 0,\n\"sum_other_doc_count\" : 0,\n\"buckets\" : [\n{\n\"key\" : \"Java\",\n\"doc_count\" : 3,\n\"avg_price\" : {\n\"value\" : 102.33333333333333\n}\n},\n{\n\"key\" : \"\u7f16\u7a0b\u8bed\u8a00\",\n\"doc_count\" : 2,\n\"avg_price\" : {\n\"value\" : 114.0\n}\n},\n......\n]\n}\n}\n</code></pre>"},{"location":"technology/database/es_aggs/#_6","title":"\u5148\u5206\u7ec4, \u518d\u7edf\u8ba1, \u6700\u540e\u6392\u5e8f","text":"<p>(1) \u8ba1\u7b97\u6bcf\u4e2atag\u4e0b\u56fe\u4e66\u7684\u5e73\u5747\u4ef7\u683c, \u518d\u6309\u5e73\u5747\u4ef7\u683c\u964d\u5e8f\u6392\u5e8f, \u67e5\u8be2\u8bed\u6cd5:</p> <pre><code>GET book_shop/it_book/_search\n{\n\"size\": 0,\n\"aggs\": {\n\"all_tags\": {\n\"terms\": {\n\"field\": \"tags.keyword\", \"order\": { \"avg_price\": \"desc\" } // \u6839\u636e\u4e0b\u8ff0\u7edf\u8ba1\u7684\u7ed3\u679c\u6392\u5e8f\n},\n\"aggs\": {\n\"avg_price\": {\n\"avg\": { \"field\": \"price\" }\n}\n}\n}\n}\n}\n</code></pre> <p>(2) \u54cd\u5e94\u7ed3\u679c:</p> <p>\u4e0e#2.1\u8282\u5185\u5bb9\u76f8\u4f3c, \u533a\u522b\u5728\u4e8e\u6309\u7167\u4ef7\u683c\u6392\u5e8f\u663e\u793a\u4e86.</p>"},{"location":"technology/database/es_aggs/#_7","title":"\u5148\u5206\u7ec4, \u7ec4\u5185\u518d\u5206\u7ec4, \u7136\u540e\u7edf\u8ba1\u3001\u6392\u5e8f","text":"<p>(1) \u5148\u6309\u4ef7\u683c\u533a\u95f4\u5206\u7ec4, \u7ec4\u5185\u518d\u6309tags\u5206\u7ec4, \u8ba1\u7b97\u6bcf\u4e2atags\u7ec4\u7684\u5e73\u5747\u4ef7\u683c, \u67e5\u8be2\u8bed\u6cd5:</p> <pre><code>GET book_shop/it_book/_search\n{\n\"size\": 0, \"aggs\": {\n\"group_by_price\": {\n\"range\": {\n\"field\": \"price\", \"ranges\": [\n{ \"from\": 00,  \"to\": 100 },\n{ \"from\": 100, \"to\": 150 }\n]\n}, \"aggs\": {\n\"group_by_tags\": {\n\"terms\": { \"field\": \"tags.keyword\" }, \"aggs\": {\n\"avg_price\": {\n\"avg\": { \"field\": \"price\" }\n}\n}\n}\n}\n}\n}\n}\n</code></pre> <p>(2) \u54cd\u5e94\u7ed3\u679c:</p> <pre><code>\"hits\" : {\n\"total\" : 3,\n\"max_score\" : 0.0,\n\"hits\" : [ ]\n},\n\"aggregations\" : {\n\"group_by_price\" : {\n\"buckets\" : [\n{\n\"key\" : \"0.0-100.0\",    // \u533a\u95f40.0-100.0\n\"from\" : 0.0,\n\"to\" : 100.0,\n\"doc_count\" : 1,        // \u5171\u67e5\u627e\u5230\u4e863\u6761\u6587\u6863\n\"group_by_tags\" : {     // \u5bf9tags\u5206\u7ec4\u805a\u5408\n\"doc_count_error_upper_bound\" : 0,\n\"sum_other_doc_count\" : 0,\n\"buckets\" : [\n{\n\"key\" : \"Java\",\n\"doc_count\" : 1,\n\"avg_price\" : {\n\"value\" : 79.0\n}\n},\n......\n]\n}\n},\n{\n\"key\" : \"100.0-150.0\",\n\"from\" : 100.0,\n\"to\" : 150.0,\n\"doc_count\" : 2,\n\"group_by_tags\" : {\n\"doc_count_error_upper_bound\" : 0,\n\"sum_other_doc_count\" : 0,\n\"buckets\" : [\n{\n\"key\" : \"Java\",\n\"doc_count\" : 2,\n\"avg_price\" : {\n\"value\" : 114.0\n}\n},\n......\n}\n]\n}\n}\n]\n}\n}\n</code></pre>"},{"location":"technology/database/es_dsl/","title":"ElasticSearch-DSL\u5305","text":"<p>\u539f\u6587: https://elasticsearch-dsl.readthedocs.io/en/latest/</p> <p>\u6458\u81ea: https://www.cnblogs.com/lit10050528/p/12178822.html</p>"},{"location":"technology/database/es_dsl/#_1","title":"\u7b80\u4ecb","text":"<p>elasticsearch-dsl\u662f\u57fa\u4e8eelasticsearch-py\u5c01\u88c5\u5b9e\u73b0\u7684\uff0c\u63d0\u4f9b\u4e86\u66f4\u7b80\u4fbf\u7684\u64cd\u4f5celasticsearch\u7684\u65b9\u6cd5\u3002</p>"},{"location":"technology/database/es_dsl/#_2","title":"\u5177\u4f53\u4f7f\u7528","text":"<p>elasticsearch\u7684\u5b98\u65b9\u6587\u6863\u4ecb\u7ecd\u4e00\u5171\u5305\u62ec\u516d\u4e2a\u90e8\u5206\uff0c\u5206\u522b\u662f\uff1aconfiguration\u3001search dsl\u3001persistence\u3001update by query\u3001API document\u3002</p>"},{"location":"technology/database/es_dsl/#configuration","title":"Configuration","text":"<p>\u6709\u8bb8\u591a\u65b9\u5f0f\u53ef\u4ee5\u914d\u7f6e\u8fde\u63a5\uff0c\u6700\u7b80\u5355\u4e14\u6709\u6548\u7684\u65b9\u5f0f\u662f\u8bbe\u7f6e\u9ed8\u8ba4\u8fde\u63a5\uff0c\u8be5\u9ed8\u8ba4\u8fde\u63a5\u53ef\u4ee5\u88ab\u672a\u4f20\u9012\u5176\u4ed6\u8fde\u63a5\u7684API\u8c03\u7528\u4f7f\u7528\u3002</p>"},{"location":"technology/database/es_dsl/#default-connection","title":"Default connection","text":"<p>\u9ed8\u8ba4\u8fde\u63a5\u7684\u5b9e\u73b0\u9700\u8981\u4f7f\u7528\u5230<code>connections.create_connection()</code>\u65b9\u6cd5\u3002</p> <pre><code>from elasticsearch_dsl import connections\n\nconnections.create_connection(hosts=['localhost'], timeout=20)\n</code></pre> <p>\u540c\u65f6\u8fd8\u53ef\u4ee5\u901a\u8fc7alias\u7ed9\u8fde\u63a5\u8bbe\u7f6e\u522b\u540d\uff0c\u540e\u7eed\u53ef\u4ee5\u901a\u8fc7\u522b\u540d\u6765\u5f15\u7528\u8be5\u8fde\u63a5\uff0c\u9ed8\u8ba4\u522b\u540d\u4e3a<code>default</code></p> <pre><code>from elasticsearch_dsl import connections\n\nconnections.create_connection(alias='my_new_connection', hosts=['localhost'], timeout=60)\n</code></pre>"},{"location":"technology/database/es_dsl/#multiple-clusters","title":"Multiple clusters","text":"<p>\u53ef\u4ee5\u901a\u8fc7<code>configure</code>\u5b9a\u4e49\u591a\u4e2a\u6307\u5411\u4e0d\u540c\u96c6\u7fa4\u7684\u8fde\u63a5\u3002</p> <pre><code>from elasticsearch_dsl import connections\n\nconnections.configure(\n    default={'hosts': 'localhost'},\n    dev={\n        'hosts': ['esdev1.example.com:9200'],\n        'sniff_on_start': True\n    }\n)\n</code></pre> <p>\u8fd8\u53ef\u4ee5\u901a\u8fc7<code>add_connection</code>\u624b\u52a8\u6dfb\u52a0\u8fde\u63a5\u3002</p>"},{"location":"technology/database/es_dsl/#using-aliases","title":"Using aliases","text":"<p>\u4e0b\u9762\u7684\u4f8b\u5b50\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528\u8fde\u63a5\u522b\u540d\u3002</p> <pre><code>s = Search(using='qa')\n</code></pre>"},{"location":"technology/database/es_dsl/#manual","title":"Manual","text":"<p>\u5982\u679c\u4f60\u4e0d\u60f3\u63d0\u4f9b\u4e00\u4e2a\u5168\u5c40\u7684\u8fde\u63a5\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528<code>using</code>\u53c2\u6570\u4f20\u9012\u4e00\u4e2a<code>elasticsearch.Elasticsearch</code>\u7684\u5b9e\u4f8b\u505a\u4e3a\u8fde\u63a5\uff0c\u5982\u4e0b\uff1a</p> <pre><code>s = Search(using=Elasticsearch('localhost'))\n</code></pre> <p>\u4f60\u8fd8\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u5f0f\u6765\u8986\u76d6\u5df2\u7ecf\u5173\u8054\u7684\u8fde\u63a5\u3002</p> <pre><code>s = s.using(Elasticsearch('otherhost:9200'))\n</code></pre>"},{"location":"technology/database/es_dsl/#search-dsl","title":"Search DSL","text":""},{"location":"technology/database/es_dsl/#the-search-object","title":"The search object","text":"<p>search\u5bf9\u8c61\u4ee3\u8868\u6574\u4e2a\u641c\u7d22\u8bf7\u6c42\uff0c\u5305\u62ec\uff1a<code>queries</code>\u3001<code>filters</code>\u3001<code>aggregations</code>\u3001<code>sort</code>\u3001<code>pagination</code>\u3001<code>additional parameters</code>\u3001<code>associated client</code>\u3002</p> <p>API\u88ab\u8bbe\u7f6e\u4e3a\u53ef\u94fe\u63a5\u7684\u3002search\u5bf9\u8c61\u662f\u4e0d\u53ef\u53d8\u7684\uff0c\u9664\u4e86\u805a\u5408\uff0c\u5bf9\u5bf9\u8c61\u7684\u6240\u6709\u66f4\u6539\u90fd\u5c06\u5bfc\u81f4\u521b\u5efa\u5305\u542b\u8be5\u66f4\u6539\u7684\u6d45\u8868\u526f\u672c\u3002</p> <p>\u5f53\u521d\u59cb\u5316Search\u5bf9\u8c61\u65f6\uff0c\u4f60\u53ef\u4ee5\u4f20\u9012low-level elasticsearch\u5ba2\u6237\u7aef\u53c2\u6570\u3002</p> <pre><code>from elasticsearch import Elasticsearch\nfrom elasticsearch_dsl import Search\n\nclient = Elasticsearch()\n\ns = Search(using=client)\n</code></pre> <p>\u6ce8\u610f</p> <p>\u6240\u6709\u7684\u65b9\u6cd5\u90fd\u8fd4\u56de\u4e00\u4e2a\u8be5\u5bf9\u8c61\u7684\u62f7\u8d1d\uff0c\u8fd9\u6837\u53ef\u4ee5\u4fdd\u8bc1\u5b83\u88ab\u4f20\u9012\u7ed9\u5916\u90e8\u4ee3\u7801\u65f6\u662f\u5b89\u5168\u7684\u3002</p> <p>\u8be5API\u662f\u53ef\u4ee5\u94fe\u63a5\u7684\uff0c\u5141\u8bb8\u4f60\u7ec4\u5408\u591a\u4e2a\u65b9\u6cd5\u8c03\u7528\u5728\u4e00\u4e2a\u8bed\u53e5\u4e2d\uff1a</p> <pre><code>s = Search().using(client).query(\"match\", title=\"python\")\n</code></pre> <p>\u6267\u884cexecute\u65b9\u6cd5\u5c06\u8bf7\u6c42\u53d1\u9001\u7ed9elasticsearch\uff1a</p> <pre><code>response = s.execute()\n</code></pre> <p>\u5982\u679c\u4ec5\u4ec5\u662f\u60f3\u8981\u904d\u5386\u8fd4\u56de\u7ed3\u679c\u63d0\u793a\uff0c\u53ef\u4ee5\u901a\u8fc7\u904d\u5386Search\u5bf9\u8c61\uff08\u524d\u63d0\u662f\u6267\u884c\u8fc7execute\u65b9\u6cd5\uff09\uff1a</p> <pre><code>for hit in s:\n    print(hit.title)\n</code></pre> <p>\u53ef\u4ee5\u901a\u8fc7to_dict()\u65b9\u6cd5\u5c06Search\u5bf9\u8c61\u5e8f\u5217\u5316\u4e3a\u4e00\u4e2adict\u5bf9\u8c61\uff0c\u8fd9\u6837\u53ef\u4ee5\u65b9\u4fbf\u8c03\u8bd5\u3002</p> <pre><code>print(s.to_dict())\n</code></pre>"},{"location":"technology/database/es_dsl/#delete-by-query","title":"Delete By Query","text":"<p>\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528Search\u5bf9\u8c61\u4e0a\u7684delete\u65b9\u6cd5\u800c\u4e0d\u662fexecute\u6765\u5b9e\u73b0\u5220\u9664\u5339\u914d\u67e5\u8be2\u7684\u6587\u6863\uff0c\u5982\u4e0b\uff1a</p> <pre><code>s = Search(index='i').query(\"match\", title=\"python\")\nresponse = s.delete()\n</code></pre>"},{"location":"technology/database/es_dsl/#queries","title":"Queries","text":"<p>\u8be5\u5e93\u4e3a\u6240\u6709\u7684Elasticsearch\u67e5\u8be2\u7c7b\u578b\u90fd\u63d0\u4f9b\u4e86\u7c7b\u3002\u4ee5\u5173\u952e\u5b57\u53c2\u6570\u4f20\u9012\u6240\u6709\u7684\u53c2\u6570\uff0c\u6700\u7ec8\u4f1a\u628a\u53c2\u6570\u5e8f\u5217\u5316\u540e\u4f20\u9012\u7ed9Elasticsearch\uff0c\u8fd9\u610f\u5473\u7740\u5728\u539f\u59cb\u67e5\u8be2\u548c\u5b83\u5bf9\u5e94\u7684dsl\u4e4b\u95f4\u6709\u8fd9\u4e00\u4e2a\u6e05\u7406\u7684\u4e00\u5bf9\u4e00\u7684\u6620\u5c04\u3002</p> <pre><code>from elasticsearch_dsl.query import MultiMatch, Match\n\n# {\"multi_match\": {\"query\": \"python django\", \"fields\": [\"title\", \"body\"]}}\nMultiMatch(query='python django', fields=['title', 'body'])\n\n# {\"match\": {\"title\": {\"query\": \"web framework\", \"type\": \"phrase\"}}}\nMatch(title={\"query\": \"web framework\", \"type\": \"phrase\"})\n</code></pre> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u5feb\u6377\u65b9\u5f0fQ\u901a\u8fc7\u547d\u540d\u53c2\u6570\u6216\u8005\u539f\u59cbdict\u7c7b\u578b\u6570\u636e\u6765\u6784\u5efa\u4e00\u4e2a\u67e5\u8be2\u5b9e\u4f8b\uff1a</p> <pre><code>from elasticsearch_dsl import Q\n\nQ(\"multi_match\", query='python django', fields=['title', 'body'])\nQ({\"multi_match\": {\"query\": \"python django\", \"fields\": [\"title\", \"body\"]}})\n</code></pre> <p>\u901a\u8fc7.query()\u65b9\u6cd5\u5c06\u67e5\u8be2\u6dfb\u52a0\u5230Search\u5bf9\u8c61\u4e2d\uff1a</p> <pre><code>q = Q(\"multi_match\", query='python django', fields=['title', 'body'])\ns = s.query(q)\n</code></pre> <p>\u8be5\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u63a5\u6536\u6240\u6709Q\u7684\u53c2\u6570\u4f5c\u4e3a\u53c2\u6570\u3002</p> <pre><code>s = s.query(\"multi_match\", query='python django', fields=['title', 'body'])\n</code></pre>"},{"location":"technology/database/es_dsl/#dotted-fields","title":"Dotted fields","text":"<p>\u6709\u65f6\u5019\u4f60\u60f3\u8981\u5f15\u7528\u4e00\u4e2a\u5728\u5176\u4ed6\u5b57\u6bb5\u4e2d\u7684\u5b57\u6bb5\uff0c\u4f8b\u5982\u591a\u5b57\u6bb5\uff08title.keyword\uff09\u6216\u8005\u5728\u4e00\u4e2ajson\u6587\u6863\u4e2d\u7684address.city\u3002\u4e3a\u4e86\u65b9\u4fbf\uff0cQ\u5141\u8bb8\u4f60\u4f7f\u7528\u53cc\u4e0b\u5212\u7ebf\u2018__\u2019\u4ee3\u66ff\u5173\u952e\u8bcd\u53c2\u6570\u4e2d\u7684\u2018.\u2019</p> <pre><code>s = Search()\ns = s.filter('term', category__keyword='Python')\ns = s.query('match', address__city='prague')\n</code></pre> <p>\u9664\u6b64\u4e4b\u5916\uff0c\u5982\u679c\u4f60\u613f\u610f\uff0c\u4e5f\u53ef\u4ee5\u968f\u65f6\u4f7f\u7528python\u7684kwarg\u89e3\u538b\u7f29\u529f\u80fd\u3002</p> <pre><code>s = Search()\ns = s.filter('term', **{'category.keyword': 'Python'})\ns = s.query('match', **{'address.city': 'prague'})\n</code></pre>"},{"location":"technology/database/es_dsl/#query-combination","title":"Query combination","text":"<p>\u67e5\u8be2\u5bf9\u8c61\u53ef\u4ee5\u901a\u8fc7\u903b\u8f91\u8fd0\u7b97\u7b26\u7ec4\u5408\u8d77\u6765\uff1a</p> <pre><code>Q(\"match\", title='python') | Q(\"match\", title='django')\n# {\"bool\": {\"should\": [...]}}\n\nQ(\"match\", title='python') &amp; Q(\"match\", title='django')\n# {\"bool\": {\"must\": [...]}}\n\n~Q(\"match\", title=\"python\")\n# {\"bool\": {\"must_not\": [...]}}\n</code></pre> <p>\u5f53\u8c03\u7528<code>.query()</code>\u65b9\u6cd5\u591a\u6b21\u65f6\uff0c\u5185\u90e8\u4f1a\u4f7f\u7528<code>&amp;</code>\u64cd\u4f5c\u7b26\uff1a</p> <pre><code>s = s.query().query()\nprint(s.to_dict())\n# {\"query\": {\"bool\": {...}}}\n</code></pre> <p>\u5982\u679c\u4f60\u60f3\u8981\u7cbe\u786e\u63a7\u5236\u67e5\u8be2\u7684\u683c\u5f0f\uff0c\u53ef\u4ee5\u901a\u8fc7Q\u76f4\u63a5\u6784\u9020\u7ec4\u5408\u67e5\u8be2\uff1a</p> <pre><code>q = Q('bool',\n    must=[Q('match', title='python')],\n    should=[Q(...), Q(...)],\n    minimum_should_match=1\n)\ns = Search().query(q)\n</code></pre>"},{"location":"technology/database/es_dsl/#filters","title":"Filters","text":"<p>\u5982\u679c\u4f60\u60f3\u8981\u5728\u8fc7\u6ee4\u4e0a\u4e0b\u6587\u4e2d\u6dfb\u52a0\u67e5\u8be2\uff0c\u53ef\u4ee5\u4f7f\u7528<code>filter()</code>\u51fd\u6570\u6765\u4f7f\u4e4b\u53d8\u7684\u7b80\u5355\u3002</p> <pre><code>s = Search()\ns = s.filter('terms', tags=['search', 'python'])\n</code></pre> <p>\u5728\u80cc\u540e\uff0c\u8fd9\u4f1a\u4ea7\u751f\u4e00\u4e2a<code>bool</code>\u67e5\u8be2\uff0c\u5e76\u5c06\u6307\u5b9a\u7684\u6761\u4ef6\u67e5\u8be2\u653e\u5165\u5176<code>filter</code>\u5206\u652f\uff0c\u7b49\u4ef7\u4e0e\u4e0b\u9762\u7684\u64cd\u4f5c\uff1a</p> <pre><code>s = Search()\ns = s.query('bool', filter=[Q('terms', tags=['search', 'python'])])\n</code></pre> <p>\u5982\u679c\u4f60\u60f3\u8981\u4f7f\u7528<code>post_filter</code>\u5143\u7d20\u8fdb\u884c\u591a\u9762\u5bfc\u822a\uff0c\u8bf7\u4f7f\u7528<code>.post_filter()</code>\u65b9\u6cd5\uff0c\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528<code>exculde()</code>\u65b9\u6cd5\u4ece\u67e5\u8be2\u4e2d\u6392\u9664\u9879\u76ee\uff1a</p> <pre><code>s = Search()\ns = s.exclude('terms', tags=['search', 'python'])\n</code></pre>"},{"location":"technology/database/es_dsl/#aggregations","title":"Aggregations","text":"<p>\u4f60\u53ef\u4ee5\u662f\u4f7f\u7528A\u5feb\u6377\u65b9\u5f0f\u6765\u5b9a\u4e49\u4e00\u4e2a\u805a\u5408\u3002</p> <pre><code>from elasticsearch_dsl import A\n\nA('terms', field='tags')\n# {\"terms\": {\"field\": \"tags\"}}\n</code></pre> <p>\u4e3a\u4e86\u5b9e\u73b0\u805a\u5408\u5d4c\u5957\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528<code>.bucket()</code>\u3001<code>.metirc()</code>\u4ee5\u53ca<code>.pipeline()</code>\u65b9\u6cd5\u3002</p> <pre><code>a = A('terms', field='category')\n# {'terms': {'field': 'category'}}\n\na.metric('clicks_per_category', 'sum', field='clicks')\\\n    .bucket('tags_per_category', 'terms', field='tags')\n\n# {\n#   'terms': {'field': 'category'},\n#   'aggs': {\n#     'clicks_per_category': {'sum': {'field': 'clicks'}},\n#     'tags_per_category': {'terms': {'field': 'tags'}}\n#   }\n# }\n</code></pre> <p>\u4e3a\u4e86\u5c06\u805a\u5408\u6dfb\u52a0\u5230<code>Search</code>\u5bf9\u8c61\u4e2d\uff0c\u4f7f\u7528<code>.aggs</code>\u5c5e\u6027\uff0c\u5b83\u662f\u4f5c\u4e3a\u4e00\u4e2a<code>top-level</code>\u805a\u5408\u7684\u3002</p> <pre><code>s = Search()\na = A('terms', field='category')\ns.aggs.bucket('category_terms', a)\n\n# {\n#   'aggs': {\n#     'category_terms': {\n#       'terms': {\n#         'field': 'category'\n#       }\n#     }\n#   }\n# }\n</code></pre> <p>\u6216\u8005\uff1a</p> <pre><code>s = Search()\ns.aggs.bucket('articles_per_day', 'date_histogram', field='publish_date', interval='day')\\\n    .metric('clicks_per_day', 'sum', field='clicks')\\\n    .pipeline('moving_click_average', 'moving_avg', buckets_path='clicks_per_day')\\\n    .bucket('tags_per_day', 'terms', field='tags')\n\ns.to_dict()\n# {\n#   \"aggs\": {\n#     \"articles_per_day\": {\n#       \"date_histogram\": { \"interval\": \"day\", \"field\": \"publish_date\" },\n#       \"aggs\": {\n#         \"clicks_per_day\": { \"sum\": { \"field\": \"clicks\" } },\n#         \"moving_click_average\": { \"moving_avg\": { \"buckets_path\": \"clicks_per_day\" } },\n#         \"tags_per_day\": { \"terms\": { \"field\": \"tags\" } }\n#       }\n#     }\n#   }\n# }\n</code></pre> <p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u540d\u5b57\u6765\u8bbf\u95ee\u4e00\u4e2a\u5b58\u5728\u7684\u6876\u3002</p> <pre><code>s = Search()\n\ns.aggs.bucket('per_category', 'terms', field='category')\ns.aggs['per_category'].metric('clicks_per_category', 'sum', field='clicks')\ns.aggs['per_category'].bucket('tags_per_category', 'terms', field='tags')\n</code></pre>"},{"location":"technology/database/es_dsl/#sorting","title":"Sorting","text":"<p>\u8981\u6307\u5b9a\u6392\u5e8f\u987a\u5e8f\uff0c\u53ef\u4ee5\u4f7f\u7528<code>.order()</code>\u65b9\u6cd5\u3002</p> <pre><code>s = Search().sort(\n    'category',\n    '-title',\n    {\"lines\" : {\"order\" : \"asc\", \"mode\" : \"avg\"}}\n)\n</code></pre> <p>\u53ef\u4ee5\u901a\u8fc7\u4e0d\u4f20\u4efb\u4f55\u53c2\u6570\u8c03\u7528sort()\u51fd\u6570\u6765\u91cd\u7f6e\u6392\u5e8f\u3002</p>"},{"location":"technology/database/es_dsl/#pagination","title":"Pagination","text":"<p>\u8981\u6307\u5b9afrom\u3001size\uff0c\u4f7f\u7528slicing API\uff1a</p> <pre><code>s = s[10:20]\n# {\"from\": 10, \"size\": 10}\n</code></pre> <p>\u8981\u8bbf\u95ee\u5339\u914d\u7684\u6240\u6709\u6587\u6863\uff0c\u53ef\u4ee5\u4f7f\u7528scan()\u51fd\u6570\uff0cscan()\u51fd\u6570\u4f7f\u7528scan\u3001scroll elasticsearch API\uff1a</p> <pre><code>for hit in s.scan():\n    print(hit.title)\n</code></pre> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\u8fd9\u79cd\u60c5\u51b5\u4e0b\u7ed3\u679c\u662f\u4e0d\u4f1a\u88ab\u6392\u5e8f\u7684\u3002</p>"},{"location":"technology/database/es_dsl/#highlighting","title":"Highlighting","text":"<p>\u8981\u6307\u5b9a\u9ad8\u4eae\u7684\u901a\u7528\u5c5e\u6027\uff0c\u53ef\u4ee5\u4f7f\u7528<code>highlight_options()</code>\u65b9\u6cd5\uff1a</p> <pre><code>s = s.highlight_options(order='score')\n</code></pre> <p>\u53ef\u4ee5\u901a\u8fc7<code>highlight()</code>\u65b9\u6cd5\u6765\u4e3a\u4e86\u6bcf\u4e2a\u5355\u72ec\u7684\u5b57\u6bb5\u8bbe\u7f6e\u9ad8\u4eae\uff1a</p> <pre><code>s = s.highlight('title')\n# or, including parameters:\ns = s.highlight('title', fragment_size=50)\n</code></pre> <p>\u7136\u540e\uff0c\u54cd\u5e94\u4e2d\u7684\u5206\u6bb5\u5c06\u5728\u6bcf\u4e2a\u7ed3\u679c\u5bf9\u8c61\u4e0a\u4ee5<code>.meta.highlight.FIELD</code>\u5f62\u5f0f\u63d0\u4f9b\uff0c\u5176\u4e2d\u5c06\u5305\u542b\u5206\u6bb5\u5217\u8868\uff1a</p> <pre><code>response = s.execute()\nfor hit in response:\n    for fragment in hit.meta.highlight.title:\n        print(fragment)\n</code></pre>"},{"location":"technology/database/es_dsl/#suggestions","title":"Suggestions","text":"<p>\u8981\u6307\u5b9a\u4e00\u4e2asuggest\u8bf7\u6c42\u5728\u4f60\u7684search\u5bf9\u8c61\u4e0a\uff0c\u53ef\u4ee5\u4f7f\u7528suggest()\u65b9\u6cd5\uff1a</p> <pre><code># check for correct spelling\ns = s.suggest('my_suggestion', 'pyhton', term={'field': 'title'})\n</code></pre>"},{"location":"technology/database/es_dsl/#extra-properties-and-parameters","title":"Extra properties and parameters","text":"<p>\u8981\u4e3asearch\u5bf9\u8c61\u8bbe\u7f6e\u989d\u5916\u7684\u5c5e\u6027\uff0c\u53ef\u4ee5\u4f7f\u7528<code>.extra()</code>\u65b9\u6cd5\u3002\u53ef\u4ee5\u7528\u6765\u5b9a\u4e49body\u4e2d\u7684key\uff0c\u90a3\u4e9b\u4e0d\u80fd\u901a\u8fc7\u6307\u5b9aAPI\u65b9\u6cd5\u6765\u8bbe\u7f6e\u7684\uff0c\u4f8b\u5982explain\u3001search_filter\u3002</p> <pre><code>s = s.extra(explain=True)\n</code></pre> <p>\u8981\u8bbe\u7f6e\u67e5\u8be2\u53c2\u6570\uff0c\u53ef\u4ee5\u4f7f\u7528<code>.params()</code>\u65b9\u6cd5\uff1a</p> <pre><code>s = s.params(routing=\"42\")\n</code></pre> <p>\u5982\u679c\u8981\u9650\u5236elasticsearch\u8fd4\u56de\u7684\u5b57\u6bb5\uff0c\u53ef\u4ee5\u4f7f\u7528<code>source()</code>\u65b9\u6cd5\uff1a</p> <pre><code># only return the selected fields\ns = s.source(['title', 'body'])\n# don't return any fields, just the metadata\ns = s.source(False)\n# explicitly include/exclude fields\ns = s.source(includes=[\"title\"], excludes=[\"user.*\"])\n# reset the field selection\ns = s.source(None)\n</code></pre>"},{"location":"technology/database/es_dsl/#serialization-and-deserialization","title":"Serialization and Deserialization","text":"<p>\u67e5\u8be2\u5bf9\u8c61\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528.to_dict()\u65b9\u6cd5\u88ab\u5e8f\u5217\u5316\u4e3a\u4e00\u4e2a\u5b57\u5178\u3002</p> <p>\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u7c7b\u65b9\u6cd5from_dict\u4ece\u4e00\u4e2adict\u521b\u5efa\u4e00\u4e2aSearch\u5bf9\u8c61\u3002\u8fd9\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684Search\u5bf9\u8c61\u5e76\u4f7f\u7528\u5b57\u5178\u4e2d\u7684\u6570\u636e\u586b\u5145\u5b83\u3002</p> <pre><code>s = Search.from_dict({\"query\": {\"match\": {\"title\": \"python\"}}})\n</code></pre> <p>\u5982\u679c\u4f60\u5e0c\u671b\u4fee\u6539\u73b0\u6709\u7684Search\u5bf9\u8c61\uff0c\u5e76\u8986\u76d6\u5176\u5c5e\u6027\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528update_from_dict()\u65b9\u6cd5\u5c31\u5730\u66f4\u6539\u5b9e\u4f8b\u3002</p> <pre><code>s = Search(index='i')\ns.update_from_dict({\"query\": {\"match\": {\"title\": \"python\"}}, \"size\": 42})\n</code></pre>"},{"location":"technology/database/es_dsl/#response","title":"Response","text":"<p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528execute\u65b9\u6cd5\u6765\u6267\u884c\u4f60\u7684\u641c\u7d22\uff0c\u5b83\u4f1a\u8fd4\u56de\u4e00\u4e2aResponse\u5bf9\u8c61\uff0cResponse\u5bf9\u8c61\u5141\u8bb8\u4f60\u901a\u8fc7\u5c5e\u6027\u7684\u65b9\u5f0f\u8bbf\u95ee\u8fd4\u56de\u7ed3\u679c\u5b57\u5178\u4e2d\u7684\u4efb\u4f55key\u3002</p> <pre><code>print(response.success())\n# True\n\nprint(response.took)\n# 12\n\nprint(response.hits.total.relation)\n# eq\nprint(response.hits.total.value)\n# 142\n\nprint(response.suggest.my_suggestions)\n</code></pre> <p>\u5982\u679c\u60f3\u8981\u68c0\u67e5response\u5bf9\u8c61\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u901a\u8fc7to_dict\u65b9\u6cd5\u8bbf\u95ee\u539f\u59cb\u6570\u636e\u3002</p>"},{"location":"technology/database/es_dsl/#hits","title":"Hits","text":"<p>\u53ef\u4ee5\u901a\u8fc7<code>hits</code>\u5c5e\u6027\u8bbf\u95ee\u8fd4\u56de\u7684\u5339\u914d\u7ed3\u679c\uff0c\u6216\u8005\u904d\u5386Response\u5bf9\u8c61\u3002</p> <pre><code>response = s.execute()\nprint('Total %d hits found.' % response.hits.total)\nfor h in response:\n    print(h.title, h.body)\n</code></pre>"},{"location":"technology/database/es_dsl/#result","title":"Result","text":"<p>\u6bcf\u4e2a\u5339\u914d\u9879\u88ab\u5c01\u88c5\u5230\u4e00\u4e2a\u7c7b\u4e2d\uff0c\u53ef\u4ee5\u65b9\u4fbf\u901a\u8fc7\u7c7b\u5c5e\u6027\u6765\u8bbf\u95ee\u8fd4\u56de\u7ed3\u679c\u5b57\u5178\u4e2d\u7684key\uff0c\u6240\u6709\u7684\u5143\u6570\u636e\u5b58\u50a8\u5728meta\u5c5e\u6027\u4e2d\u3002</p> <pre><code>response = s.execute()\nh = response.hits[0]\nprint('/%s/%s/%s returned with score %f' % (\n    h.meta.index, h.meta.doc_type, h.meta.id, h.meta.score))\n</code></pre>"},{"location":"technology/database/es_dsl/#aggregations_1","title":"Aggregations","text":"<p>\u53ef\u4ee5\u901a\u8fc7aggregations\u5c5e\u6027\u6765\u8bbf\u95ee\u805a\u5408\u7ed3\u679c\uff1a</p> <pre><code>for tag in response.aggregations.per_tag.buckets:\n    print(tag.key, tag.max_lines.value)\n</code></pre>"},{"location":"technology/database/es_dsl/#multisearch","title":"MultiSearch","text":"<p>\u53ef\u4ee5\u901a\u8fc7MultiSearch\u7c7b\u540c\u65f6\u6267\u884c\u591a\u4e2a\u641c\u7d22\uff0c\u5b83\u5c06\u4f1a\u4f7f\u7528_msearch API\uff1a</p> <pre><code>from elasticsearch_dsl import MultiSearch, Search\n\nms = MultiSearch(index='blogs')\n\nms = ms.add(Search().filter('term', tags='python'))\nms = ms.add(Search().filter('term', tags='elasticsearch'))\n\nresponses = ms.execute()\n\nfor response in responses:\n    print(\"Results for query %r.\" % response.search.query)\n    for hit in response:\n        print(hit.title)\n</code></pre>"},{"location":"technology/database/es_dsl/#persistence","title":"Persistence","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528dsl\u5e93\u6765\u5b9a\u4e49\u4f60\u7684mappings\u548c\u4e00\u4e2a\u57fa\u672c\u7684\u6301\u4e45\u5316\u5c42\u4e3a\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u3002</p>"},{"location":"technology/database/es_dsl/#document","title":"Document","text":"<p>\u5982\u679c\u4f60\u8981\u4e3a\u4f60\u7684\u6587\u6863\u521b\u5efa\u4e00\u4e2amodel-like\u7684\u5c01\u88c5\uff0c\u53ef\u4ee5\u4f7f\u7528Document\u7c7b\u3002\u5b83\u53ef\u4ee5\u88ab\u7528\u4f5c\u521b\u5efa\u5728elasticsearch\u4e2d\u6240\u6709\u9700\u8981\u7684mappings\u548csettings\u3002</p> <pre><code>from datetime import datetime\nfrom elasticsearch_dsl import Document, Date, Nested, Boolean, \\\n    analyzer, InnerDoc, Completion, Keyword, Text\n\nhtml_strip = analyzer('html_strip',\n    tokenizer=\"standard\",\n    filter=[\"standard\", \"lowercase\", \"stop\", \"snowball\"],\n    char_filter=[\"html_strip\"]\n)\n\nclass Comment(InnerDoc):\n    author = Text(fields={'raw': Keyword()})\n    content = Text(analyzer='snowball')\n    created_at = Date()\n\n    def age(self):\n        return datetime.now() - self.created_at\n\nclass Post(Document):\n    title = Text()\n    title_suggest = Completion()\n    created_at = Date()\n    published = Boolean()\n    category = Text(\n        analyzer=html_strip,\n        fields={'raw': Keyword()}\n    )\n\n    comments = Nested(Comment)\n\n     class Index:\n        name = 'blog'\n\n    def add_comment(self, author, content):\n        self.comments.append(\n          Comment(author=author, content=content, created_at=datetime.now()))\n\n    def save(self, ** kwargs):\n        self.created_at = datetime.now()\n        return super().save(** kwargs)\n</code></pre>"},{"location":"technology/database/es_dsl/#data-types","title":"Data types","text":"<p>\u5b9a\u4e49Document\u5b9e\u4f8b\u65f6\uff0c\u9664\u4e86\u53ef\u4ee5\u4f7f\u7528python\u7c7b\u578b\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528InnerDoc\u3001Range\u7b49\u7c7b\u578b\u6765\u8868\u793a\u975e\u7b80\u5355\u7c7b\u578b\u7684\u6570\u636e\u3002</p> <pre><code>from elasticsearch_dsl import Document, DateRange, Keyword, Range\n\nclass RoomBooking(Document):\n    room = Keyword()\n    dates = DateRange()\n\n\nrb = RoomBooking(\n  room='Conference Room II',\n  dates=Range(\n    gte=datetime(2018, 11, 17, 9, 0, 0),\n    lt=datetime(2018, 11, 17, 10, 0, 0)\n  )\n)\n\n# Range supports the in operator correctly:\ndatetime(2018, 11, 17, 9, 30, 0) in rb.dates # True\n\n# you can also get the limits and whether they are inclusive or exclusive:\nrb.dates.lower # datetime(2018, 11, 17, 9, 0, 0), True\nrb.dates.upper # datetime(2018, 11, 17, 10, 0, 0), False\n\n# empty range is unbounded\nRange().lower # None, False\n</code></pre>"},{"location":"technology/database/es_dsl/#note-on-dates","title":"Note on dates","text":"<p>\u5f53\u5b9e\u4f8b\u5316\u4e00\u4e2aDate\u5b57\u6bb5\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6edefault_timezone\u53c2\u6570\u6765\u660e\u786e\u6307\u5b9a\u65f6\u533a\u3002</p> <pre><code>class Post(Document):\n    created_at = Date(default_timezone='UTC')\n</code></pre>"},{"location":"technology/database/es_dsl/#document-life-cycle","title":"Document life cycle","text":"<p>\u5728\u4f60\u7b2c\u4e00\u6b21\u4f7f\u7528Post\u6587\u6863\u7c7b\u578b\u524d\uff0c\u4f60\u9700\u8981\u5728elasticsearch\u4e2d\u521b\u5efamappings\u3002\u53ef\u4ee5\u901a\u8fc7Index\u5bf9\u8c61\u6216\u8005\u8c03\u7528init()\u65b9\u6cd5\u76f4\u63a5\u521b\u5efamappings\u3002</p> <pre><code># create the mappings in Elasticsearch\nPost.init()\n</code></pre> <p>\u6240\u6709metadata\u5b57\u6bb5\uff0c\u53ef\u4ee5\u901a\u8fc7meta\u5c5e\u6027\u8bbf\u95ee\u3002</p> <pre><code>post = Post(meta={'id': 42})\n\n# prints 42\nprint(post.meta.id)\n\n# override default index\npost.meta.index = 'my-blog'\n</code></pre> <p>\u53ef\u4ee5\u901a\u8fc7get()\u65b9\u6cd5\u6765\u68c0\u7d22\u4e00\u4e2a\u5b58\u5728\u7684\u6587\u6863\uff1a</p> <pre><code># retrieve the document\nfirst = Post.get(id=42)\n# now we can call methods, change fields, ...\nfirst.add_comment('me', 'This is nice!')\n# and save the changes into the cluster again\nfirst.save()\n</code></pre> <p>\u8981\u5220\u9664\u4e00\u4e2a\u6587\u6863\uff0c\u76f4\u63a5\u8c03\u7528delete()\u65b9\u6cd5\u5373\u53ef\uff1a</p> <pre><code>first = Post.get(id=42)\nfirst.delete()\n</code></pre>"},{"location":"technology/database/es_dsl/#analysis","title":"Analysis","text":"<p>\u8981\u4e3atext\u5b57\u6bb5\u6307\u5b9aanalyzer\uff0c\u4f60\u53ea\u9700\u8981\u4f7f\u7528analyze\u7684\u540d\u5b57\uff0c\u4f7f\u7528\u5df2\u6709\u7684analyze\u6216\u8005\u81ea\u5df1\u5b9a\u4e49\u3002</p>"},{"location":"technology/database/es_dsl/#search","title":"Search","text":"<p>\u4e3a\u4e86\u5728\u8be5\u6587\u6863\u7c7b\u578b\u4e0a\u641c\u7d22\uff0c\u4f7f\u7528search\u65b9\u6cd5\u5373\u53ef\u3002</p> <pre><code># by calling .search we get back a standard Search object\ns = Post.search()\n# the search is already limited to the index and doc_type of our document\ns = s.filter('term', published=True).query('match', title='first')\n\n\nresults = s.execute()\n\n# when you execute the search the results are wrapped in your document class (Post)\nfor post in results:\n    print(post.meta.score, post.title)\n</code></pre>"},{"location":"technology/database/es_dsl/#class-meta-options","title":"class Meta options","text":"<p>\u5728Meta\u7c7b\u4e2d\u5b9a\u4e49\u4e86\u591a\u4e2a\u4f60\u53ef\u4ee5\u4e3a\u4f60\u7684\u6587\u6863\u5b9a\u4e49\u7684metadata\uff0c\u4f8b\u5982mapping\u3002</p>"},{"location":"technology/database/es_dsl/#class-index-options","title":"class Index options","text":"<p>Index\u7c7b\u4e2d\u5b9a\u4e49\u4e86\u8be5\u7d22\u5f15\u7684\u4fe1\u606f\uff0c\u5b83\u7684\u540d\u5b57\u3001settings\u548c\u5176\u4ed6\u5c5e\u6027\u3002</p>"},{"location":"technology/database/es_dsl/#document-inheritance","title":"Document Inheritance","text":""},{"location":"technology/database/es_dsl/#index","title":"Index","text":"<p>\u5728\u5178\u578b\u60c5\u51b5\u4e0b\uff0c\u5728Document\u7c7b\u4e0a\u4f7f\u7528Index\u7c7b\u8db3\u591f\u5904\u7406\u4efb\u4f55\u64cd\u4f5c\u7684\u3002\u5728\u5c11\u91cfcase\u4e0b\uff0c\u76f4\u63a5\u64cd\u4f5cIndex\u5bf9\u8c61\u53ef\u80fd\u66f4\u6709\u7528\u3002</p> <p>Index\u662f\u4e00\u4e2a\u7c7b\uff0c\u8d1f\u8d23\u4fdd\u5b58\u4e00\u4e2a\u7d22\u5f15\u5728elasticsearch\u4e2d\u7684\u6240\u6709\u5173\u8054\u5143\u6570\u636e\uff0c\u4f8b\u5982mapping\u548csettings\u3002\u7531\u4e8e\u5b83\u5141\u8bb8\u65b9\u4fbf\u7684\u540c\u65f6\u521b\u5efa\u591a\u4e2amapping\uff0c\u6240\u4ee5\u5f53\u5b9a\u4e49mapping\u7684\u65f6\u5019\u5b83\u662f\u6700\u6709\u7528\u7684\u3002\u5f53\u5728\u8fc1\u79fbelasticsearch\u5bf9\u8c61\u7684\u65f6\u5019\u662f\u7279\u522b\u6709\u7528\u7684\u3002</p> <pre><code>from elasticsearch_dsl import Index, Document, Text, analyzer\n\nblogs = Index('blogs')\n\n# define custom settings\nblogs.settings(\n    number_of_shards=1,\n    number_of_replicas=0\n)\n\n# define aliases\nblogs.aliases(\n    old_blogs={}\n)\n\n# register a document with the index\nblogs.document(Post)\n\n# can also be used as class decorator when defining the Document\n@blogs.document\nclass Post(Document):\n    title = Text()\n\n# You can attach custom analyzers to the index\n\nhtml_strip = analyzer('html_strip',\n    tokenizer=\"standard\",\n    filter=[\"standard\", \"lowercase\", \"stop\", \"snowball\"],\n    char_filter=[\"html_strip\"]\n)\n\nblogs.analyzer(html_strip)\n\n# delete the index, ignore if it doesn't exist\nblogs.delete(ignore=404)\n\n# create the index in elasticsearch\nblogs.create()\n</code></pre> <p>\u4f60\u53ef\u4ee5\u4e3a\u4f60\u7684\u7d22\u5f15\u8bbe\u7f6e\u6a21\u677f\uff0c\u5e76\u4f7f\u7528clone()\u65b9\u6cd5\u521b\u5efa\u4e00\u4e2a\u6307\u5b9a\u7684\u62f7\u8d1d\uff1a</p> <pre><code>blogs = Index('blogs', using='production')\nblogs.settings(number_of_shards=2)\nblogs.document(Post)\n\n# create a copy of the index with different name\ncompany_blogs = blogs.clone('company-blogs')\n\n# create a different copy on different cluster\ndev_blogs = blogs.clone('blogs', using='dev')\n# and change its settings\ndev_blogs.setting(number_of_shards=1)\n</code></pre>"},{"location":"technology/database/es_dsl/#index-template","title":"Index Template","text":"<p>elasticsearch-dsl\u8fd8\u63d0\u4f9b\u4e86\u4f7f\u7528IndexTemplate\u7c7b\u5728elasticsearch\u4e2d\u6765\u7ba1\u7406\u7d22\u5f15\u6a21\u677f\u7684\u9009\u9879\uff0c\u8be5\u7c7b\u4e0eIndex\u7684API\u975e\u5e38\u76f8\u4f3c\u3002</p> <p>\u4e00\u65e6\u4e00\u4e2a\u7d22\u5f15\u6a21\u677f\u88ab\u4fdd\u5b58\u5230elasticsearch\uff0c\u4ed6\u7684\u5185\u5bb9\u5c06\u4f1a\u81ea\u52a8\u5e94\u7528\u5230\u5339\u914d\u6a21\u5f0f\u7684\u65b0\u7d22\u5f15\u4e0a\uff08\u5df2\u5b58\u5728\u7684\u7d22\u5f15\u4e0d\u4f1a\u53d7\u5f71\u54cd\uff09\uff0c\u5373\u4f7f\u7d22\u5f15\u662f\u5f53\u7d22\u5f15\u4e00\u4e2a\u6587\u6863\u65f6\u81ea\u52a8\u521b\u5efa\u7684\u3002</p> <pre><code>from datetime import datetime\n\nfrom elasticsearch_dsl import Document, Date, Text\n\n\nclass Log(Document):\n    content = Text()\n    timestamp = Date()\n\n    class Index:\n        name = \"logs-*\"\n        settings = {\n          \"number_of_shards\": 2\n        }\n\n    def save(self, **kwargs):\n        # assign now if no timestamp given\n        if not self.timestamp:\n            self.timestamp = datetime.now()\n\n        # override the index to go to the proper timeslot\n        kwargs['index'] = self.timestamp.strftime('logs-%Y%m%d')\n        return super().save(**kwargs)\n\n# once, as part of application setup, during deploy/migrations:\nlogs = Log._index.as_template('logs', order=0)\nlogs.save()\n\n# to perform search across all logs:\nsearch = Log.search()\n</code></pre>"},{"location":"technology/database/es_dsl/#faceted-search","title":"Faceted Search","text":"<p>\u8be5API\u662f\u5b9e\u9a8c\u6027\u7684\uff0c\u5e76\u4e14\u4e5f\u6ca1\u6709\u7528\u5230\uff0c\u6240\u4ee5\u5148\u8df3\u8fc7\u3002</p>"},{"location":"technology/database/es_dsl/#update-by-query","title":"Update By Query","text":""},{"location":"technology/database/es_dsl/#the-update-by-query-object","title":"The Update By Query object","text":"<p>Update By Query\u5bf9\u8c61\u5141\u8bb8\u4f7f\u7528_update_by_query\u5b9e\u73b0\u5728\u4e00\u4e2a\u5339\u914d\u8fc7\u7a0b\u4e2d\u66f4\u65b0\u4e00\u4e2a\u6587\u6863\u3002</p>"},{"location":"technology/database/es_dsl/#serialization-and-deserialization_1","title":"Serialization and Deserialization","text":"<p>\u8be5\u67e5\u8be2\u5bf9\u8c61\u53ef\u4ee5\u901a\u8fc7.to_dict()\u65b9\u6cd5\u5e8f\u5217\u5316\u4e3a\u4e00\u4e2a\u5b57\u5178\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7c7b\u65b9\u6cd5from_dict()\u4ece\u4e00\u4e2a\u5b57\u5178\u6784\u5efa\u4e00\u4e2a\u5bf9\u8c61\u3002</p> <pre><code>ubq = UpdateByQuery.from_dict({\"query\": {\"match\": {\"title\": \"python\"}}})\n</code></pre>"},{"location":"technology/database/es_dsl/#extra-properties-and-parameters_1","title":"Extra properties and parameters","text":"<p>\u53ef\u4ee5\u901a\u8fc7.extra()\u65b9\u6cd5\u8bbe\u7f6e\u989d\u5916\u7684\u5c5e\u6027\uff1a</p> <pre><code>ubq = ubq.extra(explain=True)\n</code></pre> <p>\u53ef\u4ee5\u901a\u8fc7.params()\u65b9\u6cd5\u8bbe\u7f6e\u67e5\u8be2\u53c2\u6570\uff1a</p> <pre><code>ubq = ubq.params(routing=\"42\")\n</code></pre>"},{"location":"technology/database/es_dsl/#response_1","title":"Response","text":"<p>\u4f60\u53ef\u4ee5\u8c03\u7528.execute()\u65b9\u6cd5\u6267\u884c\u67e5\u8be2\uff0c\u5b83\u4f1a\u8fd4\u56de\u4e00\u4e2aResponse\u5bf9\u8c61\u3002Response\u5bf9\u8c61\u5141\u8bb8\u901a\u8fc7\u5c5e\u6027\u8bbf\u95ee\u7ed3\u679c\u5b57\u5178\u4e2d\u7684\u4efb\u4f55key\u3002</p> <pre><code>response = ubq.execute()\n\nprint(response.success())\n# True\n\nprint(response.took)\n# 12\n</code></pre> <p>\u5982\u679c\u9700\u8981\u67e5\u770bresponse\u5bf9\u8c61\u7684\u5185\u5bb9\uff0c\u4f7f\u7528to_dic()\u65b9\u6cd5\u83b7\u53d6\u5b83\u7684\u539f\u59cb\u6570\u636e\u5373\u53ef\u3002</p>"},{"location":"technology/database/es_dsl/#api-documentation","title":"API Documentation","text":"<p>API Documention\u8be6\u7ec6\u4ecb\u7ecd\u4e86<code>elasticsearch-dsl</code>\u5e93\u4e2d\u7684\u516c\u5171\u7c7b\u548c\u65b9\u6cd5\u7684\u7528\u6cd5\uff0c\u5177\u4f53\u4f7f\u7528\u7684\u65f6\u5019\u76f4\u63a5\u7ffb\u9605\u53c2\u8003\u5373\u53ef\u3002</p>"},{"location":"technology/database/es_dsl/#_3","title":"\u603b\u7ed3","text":"<ol> <li><code>elasticsearch-dsl</code>\u76f8\u6bd4\u4e8eelasticsearch\u6765\u8bf4\uff0c\u63d0\u4f9b\u4e86\u66f4\u7b80\u4fbf\u7684\u65b9\u6cd5\u6765\u64cd\u4f5celasticsearch\uff0c\u51cf\u5c11\u4e86\u751f\u6210DSL\u67e5\u8be2\u8bed\u8a00\u7684\u590d\u6742\u6027\uff0c\u63a8\u8350\u4f7f\u7528\u3002</li> <li><code>elasticsearch-dsl</code>\u7684\u65b9\u6cd5\u5176\u5b9e\u8fd8\u662f\u548celasticsearch\u7684restful API\u5bf9\u5e94\u7684\uff0c\u6240\u4ee5\u5b83\u7684API\u6587\u6863\u6709\u4e9b\u5730\u65b9\u5199\u7684\u5e76\u4e0d\u6e05\u6670\uff0c\u4f8b\u5982\u5b9e\u4f8b\u6784\u9020\u53ef\u4ee5\u4f20\u9012\u54ea\u4e9b\u53c2\u6570\uff1f\u5b83\u7684\u8bf4\u660e\u65f6\u53ef\u4ee5\u63a5\u6536\u4efb\u4f55\u5173\u952e\u5b57\u53c2\u6570\u5e76\u4f1a\u76f4\u63a5\u628a\u53c2\u6570\u4f20\u9012\u7ed9elasticsearch\uff0c\u6240\u4ee5\u8981\u786e\u5b9a\u54ea\u4e9b\u53c2\u6570\u751f\u6548\uff0c\u8fd8\u662f\u9700\u8981\u6211\u4eec\u53bb\u67e5\u770b<code>elasticsearch</code>\u7684restful API\u6587\u6863\u3002</li> </ol>"},{"location":"technology/database/mysql/","title":"Mysql &amp; Mariadb","text":""},{"location":"technology/database/mysql/#_1","title":"\u521b\u5efa/\u4fee\u6539\u6570\u636e\u5e93\u8bbe\u7f6e","text":"<p>\u5b98\u7f51: https://dev.mysql.com/doc/refman/8.0/en/charset-database.html</p> <p>\u521b\u5efa/\u4fee\u6539\u7279\u5b9a\u5b57\u7b26\u96c6</p> <pre><code>-- utf8mb4_unicode_ci;\nCREATE DATABASE sina DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n\n-- utf8mb4_0900_ai_ci; mysql 8.0+\u652f\u6301\nCREATE DATABASE risk_check DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci;\n\n-- utf8mb4_general_ci; mysql5.7\u652f\u6301\nCREATE DATABASE risk_check DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;\n\n-- database utf8mb4_general_ci; mysql5.7, 8.0+ \u652f\u6301\nALTER DATABASE risk_check DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;\n\n-- table utf8mb4_general_ci; mysql5.7, 8.0+ \u652f\u6301\nALTER TABLE alembic_version DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;\n</code></pre>"},{"location":"technology/database/mysql/#mysqldump","title":"mysqldump\u5bfc\u51fa\u6570\u636e","text":"<p>\u5b98\u7f51: https://dev.mysql.com/doc/refman/8.0/en/mysqldump.html</p> <pre><code>-- \u8981\u5907\u4efd\u6574\u4e2a\u6570\u636e\u5e93:\nmysqldump db_name &gt; backup-file.sql\n\n-- \u8981\u5c06\u8f6c\u50a8\u6587\u4ef6\u52a0\u8f7d\u56de\u670d\u52a1\u5668\uff1a\nmysql db_name &lt; backup-file.sql\n\n-- \u91cd\u65b0\u52a0\u8f7d\u8f6c\u50a8\u6587\u4ef6\u7684\u53e6\u4e00\u79cd\u65b9\u6cd5\uff1a\nmysql -e \"source /path-to-backup/backup-file.sql\" db_name\n\n-- mysqldump \u5bf9\u4e8e\u901a\u8fc7\u5c06\u6570\u636e\u4ece\u4e00\u4e2a MySQL \u670d\u52a1\u5668\u590d\u5236\u5230\u53e6\u4e00\u4e2a\u6765\u586b\u5145\u6570\u636e\u5e93\u4e5f\u975e\u5e38\u6709\u7528\uff1a\nmysqldump --opt db_name | mysql --host=remote_host -C db_name\n\n-- \u60a8\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u547d\u4ee4\u8f6c\u50a8\u591a\u4e2a\u6570\u636e\u5e93\uff1a\nmysqldump --databases db_name1 [db_name2 ...] &gt; my_databases.sql\n\n-- \u8981\u8f6c\u50a8\u6240\u6709\u6570\u636e\u5e93\uff0c\u8bf7\u4f7f\u7528 --all-databases \u9009\u9879\uff1a\nmysqldump --all-databases &gt; all_databases.sql\n\n-- \u5bf9\u4e8e InnoDB \u8868\uff0cmysqldump \u63d0\u4f9b\u4e86\u4e00\u79cd\u8fdb\u884c\u5728\u7ebf\u5907\u4efd\u7684\u65b9\u6cd5\uff1a\nmysqldump --all-databases --master-data --single-transaction &gt; all_databases.sql\n-- \u6216\u8005\u6765\u81ea MySQL 8.0.26:\nmysqldump --all-databases --source-data --single-transaction &gt; all_databases.sql\n</code></pre> <p>\u6b64\u5907\u4efd\u5728\u8f6c\u50a8\u5f00\u59cb\u65f6\u83b7\u53d6\u6240\u6709\u8868\u7684\u5168\u5c40\u8bfb\u9501\uff08\u4f7f\u7528 FLUSH TABLES WITH READ LOCK\uff09\u3002 \u4e00\u65e6\u83b7\u5f97\u4e86\u8fd9\u4e2a\u9501\uff0c\u5c31\u4f1a\u8bfb\u53d6\u4e8c\u8fdb\u5236\u65e5\u5fd7\u5750\u6807\u5e76\u91ca\u653e\u9501\u3002 \u5982\u679c\u5728\u53d1\u51fa FLUSH \u8bed\u53e5\u65f6\u6b63\u5728\u8fd0\u884c\u957f\u66f4\u65b0\u8bed\u53e5\uff0cMySQL \u670d\u52a1\u5668\u53ef\u80fd\u4f1a\u505c\u6b62\uff0c\u76f4\u5230\u8fd9\u4e9b\u8bed\u53e5\u5b8c\u6210\u3002 \u4e4b\u540e\uff0c\u8f6c\u50a8\u53d8\u4e3a\u65e0\u9501\u5e76\u4e14\u4e0d\u4f1a\u5e72\u6270\u5bf9\u8868\u7684\u8bfb\u53d6\u548c\u5199\u5165\u3002 \u5982\u679c MySQL \u670d\u52a1\u5668\u63a5\u6536\u5230\u7684\u66f4\u65b0\u8bed\u53e5\u5f88\u77ed\uff08\u5c31\u6267\u884c\u65f6\u95f4\u800c\u8a00\uff09\uff0c\u90a3\u4e48\u5373\u4f7f\u6709\u5f88\u591a\u66f4\u65b0\uff0c\u521d\u59cb\u9501\u5b9a\u5468\u671f\u4e5f\u4e0d\u5e94\u8be5\u662f\u660e\u663e\u7684\u3002</p> <p>\u5bf9\u4e8e\u65f6\u95f4\u70b9\u6062\u590d\uff08\u4e5f\u79f0\u4e3a\u201c\u524d\u6eda\u201d\uff0c\u5f53\u60a8\u9700\u8981\u6062\u590d\u65e7\u5907\u4efd\u5e76\u91cd\u653e\u81ea\u8be5\u5907\u4efd\u4ee5\u6765\u53d1\u751f\u7684\u66f4\u6539\u65f6\uff09\uff0c\u8f6e\u6362\u4e8c\u8fdb\u5236\u65e5\u5fd7\u901a\u5e38\u5f88\u6709\u7528\uff08\u53c2\u89c1\u7b2c 5.4.4 \u8282, \u201cThe Binary Log\u201d\uff09\u6216\u8005\u81f3\u5c11\u77e5\u9053\u8f6c\u50a8\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u65e5\u5fd7\u5750\u6807\uff1a</p> <pre><code>mysqldump --all-databases --master-data=2 &gt; all_databases.sql\n\n-- MySQL 8.0.26:\nmysqldump --all-databases --source-data=2 &gt; all_databases.sql\n</code></pre> <p>\u6216\u8005:</p> <pre><code>mysqldump --all-databases --flush-logs --master-data=2 &gt; all_databases.sql\n\n-- MySQL 8.0.26:\nmysqldump --all-databases --flush-logs --source-data=2 &gt; all_databases.sql\n</code></pre> <p>--source-data \u6216 --master-data \u9009\u9879\u53ef\u4ee5\u4e0e --single-transaction \u9009\u9879\u540c\u65f6\u4f7f\u7528\uff0c\u5982\u679c\u8868\u662f \u4f7f\u7528 InnoDB \u5b58\u50a8\u5f15\u64ce\u5b58\u50a8\u3002</p> <p>\u6709\u5173\u8fdb\u884c\u5907\u4efd\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u7b2c 7.2 \u8282\u201c\u6570\u636e\u5e93\u5907\u4efd\u65b9\u6cd5\u201d\u548c\u7b2c 7.3 \u8282\u201c\u793a\u4f8b\u5907\u4efd\u548c\u6062\u590d\u7b56\u7565\u201d\u3002</p> <ul> <li>\u8981\u9009\u62e9 --opt \u7684\u6548\u679c\uff08\u67d0\u4e9b\u529f\u80fd\u9664\u5916\uff09\uff0c\u8bf7\u5bf9\u6bcf\u4e2a\u529f\u80fd\u4f7f\u7528 <code>--skip</code> \u9009\u9879\u3002 \u8981\u7981\u7528\u6269\u5c55\u63d2\u5165\u548c\u5185\u5b58\u7f13\u51b2\uff0c\u8bf7\u4f7f\u7528 --opt --skip-extended-insert --skip-quick\u3002 \uff08\u5b9e\u9645\u4e0a\uff0c <code>--skip-extended-insert</code> <code>--skip-quick</code> \u5c31\u8db3\u591f\u4e86\uff0c\u56e0\u4e3a <code>--opt</code> \u9ed8\u8ba4\u662f\u5f00\u542f\u7684\u3002\uff09</li> <li>\u8981\u53cd\u8f6c --opt \u9664\u7981\u7528\u7d22\u5f15\u548c\u8868\u9501\u5b9a\u4e4b\u5916\u7684\u6240\u6709\u529f\u80fd\uff0c\u8bf7\u4f7f\u7528 --skip-opt --disable-keys --lock-tables\u3002</li> </ul>"},{"location":"technology/database/mysql/#_2","title":"\u5176\u4ed6\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li> <p>\u591a\u5217\u4f5c\u4e3a\u552f\u4e00\u952e\u65f6\uff0c\u6700\u597d\u6307\u5b9a\u6240\u6709\u7684\u5217\u90fd\u662f\u4e0d\u80fd\u4e3aNull\u7684\uff0c\u56e0\u4e3a\u4e24\u4e2aNull\u503c\u9ed8\u8ba4\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u4f1a\u5bfc\u81f4\u5373\u4f7f\u591a\u4e2a\u5217\u9664\u4e86Null\u503c\u4ee5\u5916\u5176\u4ed6\u5217\u7684\u503c\u76f8\u540c\uff0c\u8fd8\u662f\u4f1a\u63d2\u5165\u6570\u636e\u6210\u529f.</p> <p>\u53c2\u8003: https://stackoverflow.com/questions/429805/mysql-question-unique-key-not-functioning-correctly-or-am-i-misunderstanding</p> </li> </ol>"},{"location":"technology/database/mysql8_install/","title":"centos 7 \u5b89\u5168 mysql 8","text":"<p>\u539f\u6587: https://www.mysqltutorial.org/install-mysql-centos/</p> <p>1\u3001 \u8bbe\u7f6e Yum \u5b58\u50a8\u5e93</p> <p>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5728 CentOS \u4e0a\u542f\u7528 MySQL yum \u5b58\u50a8\u5e93\uff1a</p> <pre><code>rpm -Uvh https://repo.mysql.com/mysql80-community-release-el7-3.noarch.rpm\n</code></pre> <p>2\u3001\u5b89\u88c5 MySQL 8 \u793e\u533a\u7248\u670d\u52a1\u7aef</p> <p>\u7531\u4e8e MySQL yum \u5b58\u50a8\u5e93\u6709\u591a\u4e2a MySQL \u7248\u672c\u7684\u591a\u4e2a\u5b58\u50a8\u5e93\u914d\u7f6e\uff0c\u56e0\u6b64\u60a8\u9700\u8981\u7981\u7528 mysql repo \u6587\u4ef6\u4e2d\u7684\u6240\u6709\u5b58\u50a8\u5e93\uff1a</p> <pre><code>sed -i 's/enabled=1/enabled=0/' /etc/yum.repos.d/mysql-community.repo\n</code></pre> <p>\u5e76\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5 MySQL 8\uff1a</p> <pre><code>yum --enablerepo=mysql80-community install mysql-community-server\n</code></pre> <p>\u53ef\u80fd\u4f1a\u62a5GPG\u79d8\u94a5\u7684\u9519\uff0c\u6267\u884c: <code>rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2022</code></p> <p>3\u3001\u542f\u52a8mysql\u670d\u52a1</p> <p>\u4f7f\u7528\u6b64\u547d\u4ee4\u542f\u52a8 mysql \u670d\u52a1\uff1a</p> <pre><code>service mysqld start\n</code></pre> <p>4\u3001 \u663e\u793a root \u7528\u6237\u7684\u9ed8\u8ba4\u5bc6\u7801</p> <p>\u5f53\u60a8\u5b89\u88c5 MySQL 8.0 \u65f6\uff0c\u4f1a\u6388\u4e88 root \u7528\u6237\u5e10\u6237\u4e00\u4e2a\u4e34\u65f6\u5bc6\u7801\u3002 \u8981\u663e\u793a root \u7528\u6237\u5e10\u6237\u7684\u5bc6\u7801\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>grep \"A temporary password\" /var/log/mysqld.log\n</code></pre> <p>\u8fd9\u662f\u8f93\u51fa\uff1a</p> <pre><code>[Note] A temporary password is generated for root@localhost: ahJ2D)wthie=\n</code></pre> <p>\u8bf7\u6ce8\u610f\uff0c\u60a8\u7684\u4e34\u65f6\u5bc6\u7801\u4f1a\u6709\u6240\u4e0d\u540c\u3002 \u60a8\u5c06\u9700\u8981\u6b64\u5bc6\u7801\u6765\u66f4\u6539 root \u7528\u6237\u5e10\u6237\u7684\u5bc6\u7801\u3002</p> <p>5\u3001 MySQL \u5b89\u5168\u5b89\u88c5</p> <p>\u6267\u884c\u547d\u4ee4 mysql_secure_installation \u6765\u4fdd\u62a4 MySQL \u670d\u52a1\u5668\uff1a</p> <pre><code>mysql_secure_installation\n</code></pre> <p>\u5b83\u5c06\u63d0\u793a\u60a8\u8f93\u5165 root \u5e10\u6237\u7684\u5f53\u524d\u5bc6\u7801\uff1a</p> <pre><code>Enter password for user root:\n</code></pre> <p>\u8f93\u5165\u4e0a\u9762\u7684\u4e34\u65f6\u5bc6\u7801\uff0c\u7136\u540e\u56de\u8f66\u3002 \u5c06\u663e\u793a\u4ee5\u4e0b\u6d88\u606f\uff1a</p> <pre><code>The existing password for the user account root has expired. Please set a new password.\n\nNew password:\nRe-enter new password:\n</code></pre> <p>\u60a8\u9700\u8981\u8f93\u5165\u4e24\u6b21 root \u5e10\u6237\u7684\u65b0\u5bc6\u7801\u3002 \u4f1a\u63d0\u793a\u4e00\u4e9b\u95ee\u9898\uff0c\u5efa\u8bae\u8f93\u5165yes(y)\uff1a</p> <pre><code>Remove anonymous users? (Press y|Y for Yes, any other key for No) : y\n# \u79fb\u9664\u533f\u540d\u7528\u6237\uff1f \uff08\u6309 y|Y \u8868\u793a\u662f\uff0c\u4efb\u4f55\u5176\u4ed6\u952e\u8868\u793a\u5426\uff09\uff1ay\n\nDisallow root login remotely? (Press y|Y for Yes, any other key for No) : y\n# \u8fdc\u7a0b\u7981\u6b62root\u767b\u5f55\uff1f \uff08\u6309 y|Y \u8868\u793a\u662f\uff0c\u4efb\u4f55\u5176\u4ed6\u952e\u8868\u793a\u5426\uff09\uff1ay\n\nRemove test database and access to it? (Press y|Y for Yes, any other key for No) : y\n# \u5220\u9664\u6d4b\u8bd5\u6570\u636e\u5e93\u5e76\u8bbf\u95ee\u5b83\uff1f \uff08\u6309 y|Y \u8868\u793a\u662f\uff0c\u4efb\u4f55\u5176\u4ed6\u952e\u8868\u793a\u5426\uff09\uff1ay\n\nReload privilege tables now? (Press y|Y for Yes, any other key for No) : y\n# \u73b0\u5728\u91cd\u65b0\u52a0\u8f7d\u6743\u9650\u8868\uff1f \uff08\u6309 y|Y \u8868\u793a\u662f\uff0c\u4efb\u4f55\u5176\u4ed6\u952e\u8868\u793a\u5426\uff09\uff1ay\n</code></pre> <p>6\u3001\u91cd\u542f\u5e76\u542f\u7528 MySQL \u670d\u52a1</p> <p>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u91cd\u542fmysql\u670d\u52a1\uff1a</p> <pre><code>systemctl restart mysqld\n</code></pre> <p>\u5e76\u5728\u7cfb\u7edf\u542f\u52a8\u65f6\u81ea\u52a8\u542f\u52a8 mysql \u670d\u52a1\uff1a</p> <pre><code>systemctl enable mysqld\n</code></pre> <p>7\u3001 \u8fde\u63a5\u5230 MySQL</p> <p>\u4f7f\u7528\u6b64\u547d\u4ee4\u8fde\u63a5\u5230 MySQL \u670d\u52a1\u5668\uff1a</p> <pre><code>mysql -u root -p\n</code></pre> <p>\u5b83\u5c06\u63d0\u793a\u60a8\u8f93\u5165 root \u7528\u6237\u7684\u5bc6\u7801\u3002 \u60a8\u8f93\u5165\u5bc6\u7801\u5e76\u6309 Enter\uff1a</p> <pre><code>Enter password:\n</code></pre> <p>\u5b83\u5c06\u663e\u793a mysql \u547d\u4ee4\uff1a</p> <pre><code>mysql&gt;\n</code></pre> <p>\u4f7f\u7528 <code>SHOW DATABASES</code> \u663e\u793a\u5f53\u524d\u670d\u52a1\u5668\u4e2d\u7684\u6240\u6709\u6570\u636e\u5e93\uff1a</p> <pre><code>mysql&gt; show databases;\n</code></pre> <p>\u8fd9\u662f\u8f93\u51fa\uff1a</p> <pre><code>+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| performance_schema |\n| sys                |\n+--------------------+\n4 rows in set (0.05 sec)\n</code></pre>"},{"location":"technology/linux/disk-mount/","title":"linux \u78c1\u76d8\u6302\u8f7d","text":"<ul> <li>\u521b\u5efa\u65f6\u95f4: 2022\u5e7408\u670811\u65e520:07:50</li> <li>\u539f\u6587: https://cloud.tencent.com/developer/article/1776730</li> </ul>"},{"location":"technology/linux/disk-mount/#_1","title":"\u6dfb\u52a0\u786c\u76d8","text":"<ol> <li> <p>\u9996\u5148\u6211\u4eec\u9700\u8981\u5148\u6dfb\u52a0\u4e00\u5757\u786c\u76d8\u3002\u5148\u628a\u865a\u62df\u673a\u5173\u673a,\u7136\u540e\u6211\u4eec\u5728\u5bf9\u5e94\u7684\u865a\u62df\u673a\u9009\u9879\u5361\u7684\u4f4d\u7f6e\u4e0a\u53f3\u952e,\u70b9\u5f00\u8bbe\u7f6e\u3002</p> <p></p> </li> <li> <p>\u56e0\u4e3a\u6211\u4eec\u8981\u6dfb\u52a0\u7684\u786c\u4ef6\u4e3a\u786c\u76d8,\u6240\u4ee5\u6211\u4eec\u5728\u786c\u4ef6\u754c\u9762\u9009\u4e2d\u786c\u76d8(SCSI),\u7136\u540e\u70b9\u51fb\u4e0b\u9762\u7684\u6dfb\u52a0,\u8fdb\u5165\u5230\u6dfb\u52a0\u786c\u4ef6\u5411\u5bfc\u3002</p> <p></p> </li> <li> <p>\u8fdb\u5165\u5230\u786c\u4ef6\u6dfb\u52a0\u5411\u5bfc\u540e\u7ee7\u7eed\u9009\u62e9\u786c\u76d8,\u7136\u540e\u540e\u9762\u7684\u64cd\u4f5c\u76f4\u63a5\u4e00\u8def\u9ed8\u8ba4\u4e0b\u4e00\u6b65\u3002</p> <p></p> <p></p> <p></p> </li> <li> <p>\u5230\u4e86\u9700\u8981\u6307\u5b9a\u78c1\u76d8\u5bb9\u91cf\u7684\u65f6\u5019\u4e86\u3002\u56e0\u4e3a\u865a\u62df\u673a\u6bd4\u8f83\u5360\u5185\u5b58\uff0c\u7535\u8111\u5185\u5b58\u6bd4\u8f83\u5c0f\u7684\u5c0f\u4f19\u4f34\u4eec\u53ef\u4ee5\u5148\u8bbe\u7f6e\u621010GB\u3002</p> <p></p> </li> <li> <p>\u4e3a\u4e86\u65b9\u4fbf\u7ba1\u7406\uff0c\u5728\u9009\u62e9\u786c\u76d8\u6587\u4ef6\u7684\u65f6\u5019,\u6700\u597d\u662f\u548c\u540c\u4e00\u4e2a\u865a\u62df\u673a\u4e0b\u4e4b\u524d\u7684\u786c\u76d8\u5b89\u88c5\u5728\u4e00\u8d77\u3002\u8bbe\u7f6e\u5b8c\u6210\u540e\uff0c\u7b49\u5f85\u5b89\u88c5\u7684\u8fdb\u5ea6\u52a0\u8f7d\u5b8c\u6bd5\u786c\u76d8\u7684\u6dfb\u52a0\u5c31\u7b97\u662f\u5b8c\u6210\u4e86\u3002</p> <p></p> </li> </ol>"},{"location":"technology/linux/disk-mount/#_2","title":"\u5206\u533a","text":"<p>\u786c\u76d8\u6dfb\u52a0\u5b8c\u6210\u540e\u91cd\u542f\u7cfb\u7edf,\u8f93\u5165\u7528\u6237\u540d\u5bc6\u7801\u540e\u8fdb\u5165linux\u64cd\u4f5c\u754c\u9762\u3002\u63a5\u7740\u6211\u4eec\u9700\u8981\u505a\u7684\u662f\u4e3a\u65b0\u78c1\u76d8\u5206\u533a\u3002</p> <ol> <li> <p>\u5148\u5728\u547d\u4ee4\u884c\u8f93\u5165<code>lsblk</code> (\u8bb0\u5fc6:\u8001\u5e08\u4e0d\u79bb\u5f00\u7684\u9996\u5b57\u6bcd),\u67e5\u770b\u4e00\u4e0b\u78c1\u76d8\u7684\u4fe1\u606f</p> <p></p> <p>\u5176\u4e2d\u7684sdb\u5c31\u662f\u6211\u4eec\u65b0\u6dfb\u52a0\u7684\u78c1\u76d8,sda\u5c31\u662f\u6211\u4eec\u5728\u7b2c\u4e00\u6b21\u5b89\u88c5linux\u64cd\u4f5c\u7cfb\u7edf\u7684\u65f6\u5019\u8bbe\u7f6e\u7684\u786c\u76d8(\u5c0f\u83cc\u5f53\u65f6\u6ca1\u6709\u9009\u62e9\u81ea\u5b9a\u4e49\u5b89\u88c5,\u4f7f\u7528\u7684\u662f\u7cfb\u7edf\u9884\u5b89\u88c5)\u3002</p> </li> <li> <p>\u547d\u4ee4\u884c\u8f93\u5165 <code>fdisk /dev/sdb</code> sdb\u4e3a\u4f60\u65b0\u6dfb\u78c1\u76d8\u540d\u79f0,\u5f00\u59cb\u5bf9\u78c1\u76d8\u7684\u8fdb\u884c\u8bbe\u7f6e\u3002</p> <p></p> </li> <li> <p>\u6211\u4eec\u8f93\u5165n \u6dfb\u52a0\u5206\u533a\uff0c\u7136\u540e\u8f93\u5165 p \u8bbe\u7f6e\u5f53\u524d\u5206\u533a\u4e3a\u4e3b\u5206\u533a\u3002</p> <p></p> </li> <li> <p>Partition number \u4ee3\u8868\u8fd9\u662f\u8be5\u78c1\u76d8\u7684\u7b2cn\u4e2a\u5206\u533a,\u6211\u4eec\u8fd9\u91cc\u5148\u8f93\u51651\uff0c\u7136\u540e\u518d\u9009\u62e9\u6211\u4eec\u5bf9\u4e8e\u78c1\u76d8\u603b\u5bb9\u91cf\u7684\u5206\u5272\u3002\u4f8b\u5982\u628a\u603b\u5bb9\u91cf\u5206\u6210\u4e861305\u4efd\uff0c\u6211\u4eec\u9700\u8981\u628a\u78c1\u76d8\u7684\u5206\u533a\u8bbe\u7f6e\u6210\u4e24\u4e2a\u5206\u533a,\u5e76\u4e14\u5bb9\u91cf\u4e4b\u6bd4\u4e3a1:2\u30021305/3=435,\u6240\u4ee5\u6211\u4eec\u7b2c\u4e00\u4e2a\u5206\u533a\u7684\u8303\u56f4\u63cf\u8ff0\u57281~435\u3002</p> <p></p> </li> <li> <p>\u7b2c\u4e00\u4e2a\u5206\u533a\u8bbe\u7f6e\u5b8c\u540e,\u7b2c\u4e8c\u4e2a\u5206\u533a\u7684\u64cd\u4f5c\u7c7b\u4f3c\u4e0a\u9762\u7684\u6b65\u9aa4,\u53ea\u662f\u5728\u547d\u4ee4\u8f93\u5165\u4e0a\u7ec6\u5fc3\u4e00\u70b9\u5c31\u597d\u4e86\u3002\u8bbe\u7f6e\u5b8c\u540e\u8bb0\u5f97\u8f93\u5165w\u4fdd\u5b58\u5f53\u524d\u7684\u64cd\u4f5c,\u5426\u5219\u4e4b\u524d\u7684\u8bbe\u7f6e\u5c06\u4e0d\u8d77\u4efb\u4f55\u4f5c\u7528\u54e6~</p> <p></p> </li> <li> <p>\u6b64\u65f6\u6211\u4eec\u518d\u8f93\u5165 <code>lsblk -f</code> \u67e5\u770b\u5f53\u524d\u7684\u78c1\u76d8\u4fe1\u606f\u3002\u6211\u4eec\u53ef\u4ee5\u770b\u5230sdb\u4e0b\u9762\u7684\u5206\u652f\u4e0a\u51fa\u73b0\u4e86<code>sdb1</code>\u548c<code>sdb2</code>\u4e24\u4e2a\u8282\u70b9\u3002\u8fd9\u8bf4\u660e\u6211\u4eec\u7684\u5206\u533a\u6210\u529f\u4e86!</p> <p></p> </li> </ol>"},{"location":"technology/linux/disk-mount/#_3","title":"\u683c\u5f0f\u5316","text":"<p>\u5206\u533a\u5b8c\u540e,\u6211\u4eec\u9700\u8981\u5bf9\u6bcf\u4e00\u4e2a\u5206\u533a\u683c\u5f0f\u5316\u3002</p> <ol> <li> <p>\u5728\u547d\u4ee4\u884c\u8f93\u5165 <code>mkfs -t ext4 /dev/\u683c\u5f0f\u5316\u6307\u5b9a\u5206\u533a</code>,\u51fa\u73b0\u4e0b\u9762\u622a\u56fe\u5185\u5bb9\u8bf4\u660e\u683c\u5f0f\u5316\u6210\u529f\u4e86\u3002\u540c\u6837\u7684,sdb2\u4e5f\u8fdb\u884c\u76f8\u540c\u7684\u64cd\u4f5c\u3002</p> <p></p> </li> <li> <p>\u683c\u5f0f\u5316\u5b8c\u6210\u540e,\u53ef\u4ee5\u901a\u8fc7lsblk -f \u67e5\u770b\u662f\u5426\u6210\u529f!</p> <p></p> </li> </ol>"},{"location":"technology/linux/disk-mount/#_4","title":"\u6302\u8f7d","text":"<p>\u5728linux\u4e2d,\u7528\u6237\u4e0d\u80fd\u76f4\u63a5\u8bbf\u95ee\u786c\u4ef6\u8bbe\u5907\uff0c\u9700\u8981\u5c06\u786c\u4ef6\u8bbe\u5907\u6302\u8f7d\u5230\u7cfb\u7edf\u76ee\u5f55\u4e0a\uff0c\u786c\u4ef6\u624d\u53ef\u4ee5\u8ba9\u7528\u6237\u8bbf\u95ee\u5230\u3002\u56e0\u6b64\u6211\u4eec\u9700\u8981\u5c06\u683c\u5f0f\u5316\u540e\u7684\u5206\u533a\u6302\u8f7d\u5230\u5177\u4f53\u7684\u76ee\u5f55\u4e0b\u3002</p> <ol> <li> <p>\u521b\u5efa\u4e00\u4e2a\u7cfb\u7edf\u76ee\u5f55,<code>mkdir -p /home/newdisk1</code> (\u6302\u8f7d\u51e0\u4e2a\u5206\u533a\u5c31\u9700\u8981\u521b\u5efa\u51e0\u4e2a\u4e0d\u540c\u7684\u76ee\u5f55)\u3002\u5173\u4e8e\u6302\u8f7d\u548c\u53d6\u6d88\u6302\u8f7d\u547d\u4ee4\u7684\u8bf4\u660e\u89c1\u4e0b\u56fe</p> \u547d\u4ee4 \u542b\u4e49 mount \u8bbe\u5907\u540d\u79f0 \u6302\u8f7d\u76ee\u5f55 \u5efa\u7acb\u8bbe\u5907\u5206\u533a\u548c\u7cfb\u7edf\u76ee\u5f55\u7684\u6620\u5c04\u5173\u7cfb umount \u8bbe\u5907\u540d\u79f0 \u6216 umount \u6302\u8f7d\u76ee\u5f55 \u53d6\u6d88\u8bbe\u5907\u5206\u533a\u548c\u7cfb\u7edf\u76ee\u5f55\u7684\u6620\u5c04\u5173\u7cfb <p>\u6240\u4ee5\u6211\u4eec\u5728\u547d\u4ee4\u884c\u8f93\u5165 <code>mount /dev/sdb1 /home/newdisk1</code> \u4e3asdb1\u5206\u533a\u6302\u8f7d\u5230\u4e86\u6211\u4eec\u65b0\u521b\u5efa\u7684\u76ee\u5f55\u4e0b\u3002\u540c\u6837\u7684,sdb2\u5206\u533a\u4e5f\u6267\u884c\u540c\u6837\u7684\u6b65\u9aa4\u3002</p> </li> <li> <p>\u4e24\u4e2a\u5206\u533a\u90fd\u6302\u8f7d\u5b8c\u6210\u540e,\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7<code>lsblk -f</code> \u67e5\u770b\u662f\u5426\u6302\u8f7d\u6210\u529f\u3002</p> <p></p> <p>\u901a\u8fc7\u56fe\u7247\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u5206\u533a\u6302\u8f7d\u6210\u529f\u4e86,\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f,\u8fd9\u53ea\u662f\u4e34\u65f6\u6302\u8f7d,\u91cd\u542f\u540e\u6302\u8f7d\u5c06\u5931\u6548\u3002</p> </li> <li> <p>\u8bbe\u7f6e\u91cd\u542f\u6302\u8f7d\u4e0d\u5931\u6548\u3002</p> <p></p> <p>\u9996\u5148\u6211\u4eec\u7528vim\u7f16\u8f91\u5668\u6253\u5f00\u914d\u7f6e\u6587\u4ef6\u8fdb\u884c\u4fee\u6539,<code>vim /etc/fstab</code>,\u628a\u521a\u683c\u5f0f\u5316\u5c31\u5b8c\u6210\u7684id\u6dfb\u52a0\u8fdb\u6765\u3002\u4fee\u6539\u6210\u529f\u540e\u91cd\u542f\u5373\u53ef\u6216\u8005\u547d\u4ee4\u884c\u8f93\u5165<code>mount -a</code> \u8be5\u547d\u4ee4\u4f1a\u628a\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u5206\u533a\u91cd\u65b0\u6302\u8f7d\u4e00\u904d\u3002</p> </li> </ol>"},{"location":"technology/linux/disk-mount/#_5","title":"\u603b\u7ed3","text":"<p>linux\u78c1\u76d8\u6302\u8f7d\u5206\u4e3a\u5b89\u88c5\u78c1\u76d8,\u5206\u533a,\u683c\u5f0f\u5316,\u6302\u8f7d\u56db\u4e2a\u6b65\u9aa4\u3002</p>"},{"location":"technology/linux/port/","title":"\u7aef\u53e3\u5360\u7528\u67e5\u627e","text":"<p>\u67e5\u770b\u7aef\u53e3\u7684\u5360\u7528\u60c5\u51b5\u3001\u627e\u51fa\u5e76\u6740\u6b7b\u5360\u7528\u8fdb\u7a0b\u7684\u65b9\u6cd5</p> <p>\u53c2\u8003: https://www.cnblogs.com/shoufeng/p/11308614.html</p>"},{"location":"technology/linux/port/#lsof","title":"lsof","text":"<p>\u53c2\u8003: http://linux.51yip.com/search/lsof</p>"},{"location":"technology/linux/port/#_2","title":"\u547d\u4ee4\u4f7f\u7528\u793a\u4f8b","text":"<pre><code># \u547d\u4ee4\u4e3a lsof -i\n[root@onepiece ~]# lsof -i\n# \u5c06\u4f1a\u663e\u793a \u547d\u4ee4 + \u8fdb\u7a0bID + \u8fdb\u7a0b\u6240\u5c5e\u7528\u6237, \u4ee5\u53ca\u76d1\u542c\u7684\u534f\u8bae\u3001\u72b6\u6001\u7b49\u4fe1\u606f\nCOMMAND     PID USER   FD   TYPE  DEVICE SIZE/OFF NODE NAME\ndhclient    728 root    6u  IPv4   11262      0t0  UDP *:bootpc\nntpd        839  ntp   16u  IPv4   13671      0t0  UDP *:ntp\nntpd        839  ntp   18u  IPv4   13677      0t0  UDP localhost:ntp\n</code></pre> <p>\u82e5\u63d0\u793a\u65e0\u6b64\u547d\u4ee4, \u5219\u9700\u8981\u5b89\u88c5, \u547d\u4ee4\u5982\u4e0b:</p> <pre><code>[root@onepiece ~]# lsof -i\n-bash: lsof: command not found\n[root@onepiece ~]# yum install -y lsof\n......\nInstalled:\nlsof.x86_64 0:4.87-6.el7\nComplete!\n# \u51fa\u73b0\u4e0a\u8ff0\u7684 \"Complete!\"\uff0c\u8bf4\u660e\u5b89\u88c5\u6210\u529f\u3002\n</code></pre>"},{"location":"technology/linux/port/#_3","title":"\u67e5\u770b\u67d0\u4e00\u7aef\u53e3\u7684\u5360\u7528\u60c5\u51b5","text":"<pre><code># \u6bd4\u5982\u67e5\u770b80\u7aef\u53e3\u7684\u5360\u7528\u60c5\u51b5\uff0c\u547d\u4ee4\u4e3a\uff1a\n[root@onepiece ~]# lsof -i:22\nCOMMAND  PID USER   FD   TYPE  DEVICE SIZE/OFF NODE NAME\nsshd    3187 root    3u  IPv4   16278      0t0  TCP *:ssh (LISTEN)\nsshd    9528 root    3u  IPv4 4436480      0t0  TCP onepiece:ssh-&gt;120.253.xx.xx:30214 (ESTABLISHED)\n</code></pre> <p>\u8fd9\u91cc\u663e\u793a\u51fa22\u53f7\u7aef\u53e3\u6b63\u88absshd\u6240\u4f7f\u7528, \u72b6\u6001\u662fLISTEN(\u76d1\u542c).</p>"},{"location":"technology/linux/port/#_4","title":"\u6740\u6b7b\u67d0\u4e2a\u7aef\u53e3\u7684\u6240\u6709\u8fdb\u7a0b","text":"<p>\u4e0d\u5efa\u8bae\u901a\u8fc7 kill \u7684\u65b9\u5f0f\u89e3\u51b3\u7aef\u53e3\u51b2\u7a81\u95ee\u9898!</p> <p>\u67d0\u4e9b\u6781\u5c11\u7684\u60c5\u51b5\u4e0b\u662f\u53ef\u4ee5\u76f4\u63a5\u6740\u6b7b\u8fdb\u7a0b\u3001\u91ca\u653e\u7aef\u53e3\u7684, \u6bd4\u5982\u67d0\u4e2a Tomcat \u8fdb\u7a0b\u6ca1\u6709\u6210\u529f\u9000\u51fa, \u5bfc\u81f4\u91cd\u542f\u5931\u8d25.</p> <pre><code># \u547d\u4ee4\u5982\u4e0b\uff1a\n[root@onepiece ~]# killall sshd\n# \u8fd9\u6837\uff0c\u6240\u6709sshd\u7684\u8fdb\u7a0b\u90fd\u4f1a\u88ab\u7ed3\u675f\u6389 \u2014\u2014 \u6211\u8fd9\u91cc\u901a\u8fc7ssh\u8fdc\u7a0b\u64cd\u4f5c\u963f\u91cc\u4e91\u670d\u52a1\u5668, \u6740\u6b7b\u4e4b\u540e\u5c06\u9000\u51fa\u8fde\u63a5, \u63d0\u793a\u5982\u4e0b:\nConnection to 47.52.xx.xx closed by remote host.\nConnection to 47.52.xx.xx closed.\n# \u6b64\u65f6\u9700\u8981\u4ece\u963f\u91cc\u4e91\u63a7\u5236\u53f0\u901a\u8fc7\u7ec8\u7aef\u8fdb\u5165, \u5e76\u5f00\u542fsshd\u670d\u52a1, \u547d\u4ee4\u5982\u4e0b:\nservice sshd start\n</code></pre> <p>\u8fd9\u6837, \u6240\u6709\u4e0e sshd \u7684\u76f8\u5173\u8fdb\u7a0b\u90fd\u4f1a\u88ab\u7ed3\u675f\u6389 \u2014\u2014 \u52a1\u5fc5\u614e\u7528.</p>"},{"location":"technology/linux/port/#netstat","title":"netstat","text":"<p>\u53c2\u8003\u6587\u6863: http://linux.51yip.com/search/netstat</p>"},{"location":"technology/linux/port/#_5","title":"\u547d\u4ee4\u4f7f\u7528\u793a\u4f8b","text":"<pre><code># \u547d\u4ee4\u793a\u4f8b\u5982\u4e0b\uff1a\n[root@onepiece ~]# netstat -anp | grep 22\ntcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      9646/sshd\ntcp        0     36 172.31.xx.xx:22       120.253.xx.xx:30307     ESTABLISHED 9649/sshd: root@pts\nunix  2      [ ]         DGRAM                    15722    476/dbus-daemon\nunix  3      [ ]         STREAM     CONNECTED     11122    476/dbus-daemon      </code></pre> <p>\u53ef\u4ee5\u770b\u51fa22\u7aef\u53e3\u88ab9646\u53f7\u8fdb\u7a0b\u76d1\u542c\u7740.</p>"},{"location":"technology/linux/port/#_6","title":"\u67e5\u770b\u5360\u7528\u67d0\u4e2a\u7aef\u53e3\u7684\u8fdb\u7a0b","text":"<pre><code># \u547d\u4ee4\u4e3afuser\uff1a\n[root@onepiece ~]# fuser -v -n tcp 22\nUSER        PID ACCESS COMMAND\n22/tcp:              root       9646 F.... sshd\n                     root       9649 F.... sshd\n</code></pre>"},{"location":"technology/linux/port/#_7","title":"\u6740\u6b7b\u67d0\u4e2a\u7aef\u53e3\u7684\u5360\u7528\u8fdb\u7a0b","text":"<pre><code>[root@onepiece ~]# kill -s 9 9646(\u8fdb\u7a0b\u53f7)\n</code></pre> <p>\u53c2\u6570</p> <p><code>-9</code>\u53c2\u6570\u8868\u793a\u544a\u8bc9\u64cd\u4f5c\u7cfb\u7edf\u76f4\u63a5\u6740\u6b7b\u8fdb\u7a0b, \u65e0\u8bba\u8fdb\u7a0b\u7684\u72b6\u6001\u662f\u5426\u53ef\u6740\u6b7b;</p> <p>\u8be5\u547d\u4ee4\u53ea\u6740\u6b7b\u67d0\u4e2a\u8fdb\u7a0b, \u6bd4 <code>killall</code> \u547d\u4ee4\u76f8\u5bf9\u5b89\u5168\u4e00\u70b9.</p>"},{"location":"technology/linux/port/#_8","title":"\u53c2\u8003\u8d44\u6599","text":"<ul> <li>Linux\u4e2d\u5982\u4f55\u89e3\u9664\u7aef\u53e3\u5360\u7528</li> <li>linux\u4e0b\u5982\u4f55\u641c\u7d22\u4e00\u4e2a\u6587\u4ef6\u6216\u7a0b\u5e8f\u6240\u5728\u4f4d\u7f6e</li> </ul>"},{"location":"technology/linux/usage_source/","title":"linux \u8d44\u6e90\u6536\u96c6","text":""},{"location":"technology/linux/usage_source/#_1","title":"\u82cd\u9e70\u535a\u5ba2","text":"<ul> <li>\u535a\u5ba2\u4e3b\u9875</li> <li>linux\u547d\u4ee4\u624b\u518c</li> <li>\u7a0b\u5e8f\u5458\u624b\u518c\u5927\u5168</li> <li>HTML\u7f51\u9875\u8bbe\u8ba1\u53c2\u8003\u624b\u518c</li> <li>shell\u5728\u7ebf\u4e2d\u6587\u624b\u518c</li> <li>\u9ad8\u6027\u80fdMySQL</li> </ul>"},{"location":"technology/other/functions/","title":"\u51fd\u6570","text":""},{"location":"technology/other/functions/#sysexit","title":"\u4e3a\u4f55\u8981\u7528sys.exit()\u9000\u51fa\uff1f","text":"<p>\u539f\u6587: \u4e3a\u4f55\u8981\u7528sys.exit()\u9000\u51fa\uff1f</p> <p>Python\u67094\u4e2a\u4e0d\u540c\u7684\u9000\u51fa\u7a0b\u5e8f\u7684\u51fd\u6570\uff0c<code>exit()</code>\uff0c<code>quit()</code>\uff0c<code>os._exit()</code>\u548c\u672c\u6587\u8981\u4ecb\u7ecd\u7684<code>sys.exit()</code>\u3002</p> <p><code>exit()</code>\u548c<code>quit()</code>\u662f\u4e00\u6837\u7684\uff0c\u5b83\u4fe9\u7684\u529f\u80fd\u57fa\u672c\u4e0a\u4e0e<code>sys.exit()</code>\u4e00\u6837\uff0c\u53ea\u6709<code>os._exit()</code>\u6709\u4e9b\u7b80\u5355\u7c97\u66b4\u3002</p> <p>exit\u548cquit\u51fd\u6570</p> <p>\u8fd9\u4e24\u4e2a\u51fd\u6570\u7684\u4f5c\u7528\uff0c\u5c31\u662f\u76f4\u63a5\u9000\u51fa\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u5e26\u4e00\u4e2a\u53c2\u6570\u4f5c\u4e3a\u7a0b\u5e8f\u7684\u8fd4\u56de\u7801\uff0c\u5982\u679c\u4e0d\u5e26\u53c2\u6570\uff0c\u9ed8\u8ba4\u5c31\u662f\u8fd4\u56de0.</p> <pre><code>xinlin@ubuntu:~/test$ python3 -q\n&gt;&gt;&gt; exit(111)\nxinlin@ubuntu:~/test$ echo $?\n111\nxinlin@ubuntu:~/test$ python3 -q\n&gt;&gt;&gt; quit(222)\nxinlin@ubuntu:~/test$ echo $?\n222\nxinlin@ubuntu:~/test$ python3 -q\n&gt;&gt;&gt; exit()\nxinlin@ubuntu:~/test$ echo $?\n0\nxinlin@ubuntu:~/test$ python3 -q\n&gt;&gt;&gt; quit()\nxinlin@ubuntu:~/test$ echo $?\n0\n</code></pre> <p>\u8fd9\u4e24\u4e2a\u51fd\u6570\u4e00\u822c\u5728\u4ea4\u4e92\u5f0f\u7684python\u89e3\u91ca\u5668\u4e2d\u4f7f\u7528\u3002\u5176\u5b9e\u5b83\u4fe9\u4e5f\u4f1a\u629b\u51fa<code>SystemExit\u5f02\u5e38</code>\uff0c\u56e0\u6b64\u8bf4\u8ddf<code>sys.exit()</code>\u4e00\u6837\u3002</p> <p>sys.exit()\u51fd\u6570</p> <p><code>sys\u6a21\u5757</code>\u7684<code>exit</code>\u51fd\u6570\uff0c\u901a\u8fc7\u629b\u51fa\u4e00\u4e2a<code>SystemExit\u5f02\u5e38</code>\u6765\u5c1d\u8bd5\u7ed3\u675f\u7a0b\u5e8f\uff0cPython\u4ee3\u7801\u53ef\u4ee5\u6355\u83b7\u8fd9\u4e2a\u5f02\u5e38\u6765\u8fdb\u884c\u4e00\u4e9b\u7a0b\u5e8f\u9000\u51fa\u524d\u7684\u6e05\u7406\u5de5\u4f5c\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u9000\u51fa\u7a0b\u5e8f\u3002</p> <p><code>sys.exit</code>\u51fd\u6570\u540c\u6837\u53ef\u4ee5\u5e26\u4e00\u4e2a\u53c2\u6570\u6765\u4f5c\u4e3a\u7a0b\u5e8f\u7684\u9000\u51fa\u7801\uff0c\u9ed8\u8ba4\u662f<code>0</code>.</p> <pre><code>&gt;&gt;&gt; import sys\n&gt;&gt;&gt; try:\n...     sys.exit(101)\n... except SystemExit as e:\n...     print(repr(e))\n...     print(str(e))\n...\nSystemExit(101)\n101\n&gt;&gt;&gt;\n</code></pre> <p>\u770b\u8d77\u6765\u4f7f\u7528<code>str()</code>\u51fd\u6570\u5728<code>except</code>\u5206\u652f\u83b7\u53d6\u8fd4\u56de\u7801\uff0c\u6bd4\u8f83\u5224\u65ad\u4e0d\u540c\u7684\u8fd4\u56de\u7801\uff0c\u5e76\u505a\u54cd\u5e94\u7684\u6e05\u7406\u52a8\u4f5c\uff0c\u662f\u6bd4\u8f83\u65b9\u4fbf\u7684\u3002\u53e6\u5916\u4e00\u4e2a\u7ec6\u8282\uff0c\u4e0a\u9762\u8fd9\u6bb5\u4ee3\u7801\u5728Python\u89e3\u91ca\u5668\u4e2d\u6267\u884c\uff0c\u56e0\u4e3a\u5f02\u5e38\u88ab\u6355\u83b7\uff0c\u6240\u4ee5\u4e0d\u4f1a\u5bfc\u81f4\u89e3\u91ca\u5668\u9000\u51fa\uff01</p> <p>\u6355\u83b7\u4e86<code>sys.exit()</code>\u51fd\u6570\u629b\u51fa\u7684\u5f02\u5e38\uff0c\u5904\u7406\u4e4b\u540e\uff0c\u8fd8\u8981\u7a0b\u5e8f\u7ee7\u7eed\u9000\u51fa\uff0c\u5c31\u9700\u8981\u76f4\u63a5\u4f7f\u7528<code>exit</code>\u6216<code>quit</code>\u51fd\u6570\u3002\u5b9e\u8df5\u4e2d\uff0c\u5b8c\u6574\u7684\u4f7f\u7528<code>sys.exit</code>\u51fd\u6570\u7684\u903b\u8f91\u5e94\u8be5\u662f\u5982\u4e0b\u8fd9\u6837\u7684\u4ee3\u7801\uff1a</p> <pre><code>import sys\n\ndef main():\n    sys.exit(123)\n    return\n\nif __name__ == '__main__':\n    try:\n        main()\n    except SystemExit as e:\n        if str(e) == '123':\n            print('---123---')\n            exit(123)\n</code></pre> <p>\u4e00\u822c\u5728<code>python</code>\u811a\u672c\u4e2d\u90fd\u9009\u62e9\u4f7f\u7528<code>sys.exit</code>\u51fd\u6570\u9000\u51fa\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u6709\u4e2a\u5f02\u5e38\u6355\u83b7\u673a\u5236\u6765\u505a\u6e05\u7406\u626b\u5c3e\u7684\u5de5\u4f5c\uff0c\u7a0b\u5e8f\u4f1a\u66f4\u52a0\u7075\u6d3b\u5065\u58ee\u3002</p> <p>os._exit()\u51fd\u6570</p> <p>\u8fd9\u4e2a\u51fd\u6570\u7b80\u5355\u7c97\u66b4\uff0c\u5c31\u662f\u76f4\u63a5\u9000\u51fapython\u89e3\u91ca\u5668\uff0c\u540e\u9762\u7684\u4ee3\u7801\u90fd\u4e0d\u6267\u884c\u4e86\uff01\u4e00\u822c\u7a0b\u5e8f\u4e0d\u63a8\u8350\u4f7f\u7528\u8fd9\u79cd\u9000\u51fa\u65b9\u5f0f\u3002</p> <p>\u8865\u5145\u4e00\u4e2a\u7ec6\u8282\uff1a</p> <p>\u5728python\u7ebf\u7a0b\u4e2d\uff0c\u4f7f\u7528<code>sys.exit</code>\uff08\u5305\u62ec<code>exit</code>\u548c<code>quit</code>\uff09\uff0c\u90fd\u53ea\u80fd\u5b9e\u73b0\u9000\u51fa\u5b50\u7ebf\u7a0b\uff0c\u800c\u4e0d\u80fd\u9000\u51fa\u4e3b\u7ebf\u7a0b\uff1b</p> <p>\u5982\u679c\u5728\u5b50\u7ebf\u7a0b\u4e2d\u8c03\u7528<code>os._exit</code>\uff0c\u53ef\u4ee5\u5b9e\u73b0\u6574\u4e2a\u7a0b\u5e8f\u7684\u9000\u51fa\u3002</p>"},{"location":"technology/other/functions/#_2","title":"\u9a7c\u5cf0\u547d\u540d\u6cd5\u548c\u9a86\u9a7c\u547d\u540d\u6cd5\u4e92\u8f6c","text":"<p>\u539f\u6587: https://blog.csdn.net/mouday/article/details/90079956</p> <pre><code># -*- coding: utf-8 -*-\n\n\ndef get_lower_case_name(text):\n    lst = []\n    for index, char in enumerate(text):\n        if char.isupper() and index != 0:\n            lst.append(\"_\")\n        lst.append(char)\n\n    return \"\".join(lst).lower()\n\n\nif __name__ == '__main__':\n    print(get_lower_case_name(\"StudentNameModel\"))\n\n# student_name_model\n</code></pre> <p>\u53e6\u4e00\u79cd\u5b9e\u73b0\u65b9\u5f0f:</p> <pre><code># -*- coding: utf-8 -*-\nimport re\n\n\ndef pascal_case_to_snake_case(camel_case: str):\n\"\"\"\u5927\u9a7c\u5cf0\uff08\u5e15\u65af\u5361\uff09\u8f6c\u86c7\u5f62\"\"\"\n    snake_case = re.sub(r\"(?P&lt;key&gt;[A-Z])\", r\"_\\g&lt;key&gt;\", camel_case)\n    return snake_case.lower().strip('_')\n\n\ndef snake_case_to_pascal_case(snake_case: str):\n\"\"\"\u86c7\u5f62\u8f6c\u5927\u9a7c\u5cf0\uff08\u5e15\u65af\u5361\uff09\"\"\"\n    words = snake_case.split('_')\n    return ''.join(word.title() for word in words)\n</code></pre>"},{"location":"technology/other/stock/","title":"\u6536\u76ca\u51fd\u6570","text":""},{"location":"technology/other/stock/#_2","title":"\u5229\u606f\u4ee5\u53ca\u590d\u5229\u8ba1\u7b97","text":"<pre><code>def get_income(principal: int, apr: float, days: int) -&gt; float:\n\"\"\" \u8ba1\u7b97\u6309\u5e74\u5229\u7387\u6301\u6709\u6307\u5b9a\u5929\u6570\u6240\u83b7\u5f97\u7684\u5229\u606f\n\n        principal:  \u672c\u91d1\n        apr: \u5e74\u5229\u7387\n        days: \u6301\u6709\u5929\u6570\n\n    \u8fd4\u56de: float \u7c7b\u578b\u7684\u5229\u606f\u503c\n    \"\"\"\n    # \u8ba1\u7b97\u5229\u606f\n\n    return principal * apr * (days/365)\n\n\ndef cycle_income(capital: int, apr: float, days: int, cycle:int):\n\"\"\" \u8ba1\u7b97\u6309\u5e74\u7387\u6301\u6709\u6307\u5b9a\u5929\u6570\u5e76\u4e14\u590d\u5229N\u6b21\u6240\u83b7\u5f97\u7684\u5229\u606f\u6536\u5165\u3002\n\n        principal:  \u672c\u91d1\n        apr: \u5e74\u5229\u7387\n        days: \u6301\u6709\u5929\u6570\n        cycle: \u590d\u5229\u51e0\u6b21\n    \"\"\"\n\n    print(f\"{capital} \u6309\u5e74\u5229\u7387 {apr} \u6301\u6709\u5929\u6570{days} \u590d\u5229 {cycle} \u6b21, \u8ba1\u7b97\u5982\u4e0b:\")\n\n    # \u7d2f\u8ba1\u672c\u91d1\n    congest_capital = capital\n    income_total = 0\n\n    for i in range(1, cycle + 1):\n\n        income = get_income(congest_capital, apr, days)\n        income = round(income, 2)\n        income_total += income\n\n        congest_capital += income\n        congest_capital = round(congest_capital, 2)\n\n        print(f\"{capital} \u7b2c{i}\u6b21 \u5171\u83b7\u5f97\u5229\u606f: {income}, \u672c\u606f\u5171\u8ba1: {congest_capital};\")\n\n    return_rate = round((income_total / capital) * 100, 2)\n    print(f\"{capital} \u5143\uff0c\u4e00\u5171\u5360\u7528\u8d44\u91d1: {days * cycle} \u5929, \u5171\u83b7\u5229: {income_total}\u5143, \u6536\u76ca\u7387: {return_rate}%\")\n\n\n\nif __name__ == \"__main__\":\n    capital = 55000  # \u672c\u91d1\n    rate = 0.0205     # \u5e74\u5229\u7387\n    days = 15        # \u6301\u6709\u5929\u6570\n    cycle = 4        # \u590d\u5229\u56db\u6b21\n\n    cycle_income(capital, rate, days, cycle)\n\n    print(\"--\" * 10)\n</code></pre> <p>\u6700\u540e\u8f93\u51fa\u5982\u4e0b:</p> <pre><code>55000 \u6309\u5e74\u5229\u7387 0.0205 \u6301\u6709\u5929\u657015 \u590d\u5229 4 \u6b21, \u8ba1\u7b97\u5982\u4e0b:\n55000 \u7b2c1\u6b21 \u5171\u83b7\u5f97\u5229\u606f: 46.34, \u672c\u606f\u5171\u8ba1: 55046.34;\n55000 \u7b2c2\u6b21 \u5171\u83b7\u5f97\u5229\u606f: 46.37, \u672c\u606f\u5171\u8ba1: 55092.71;\n55000 \u7b2c3\u6b21 \u5171\u83b7\u5f97\u5229\u606f: 46.41, \u672c\u606f\u5171\u8ba1: 55139.12;\n55000 \u7b2c4\u6b21 \u5171\u83b7\u5f97\u5229\u606f: 46.45, \u672c\u606f\u5171\u8ba1: 55185.57;\n55000 \u5143\uff0c\u4e00\u5171\u5360\u7528\u8d44\u91d1: 60 \u5929, \u5171\u83b7\u5229: 185.57\u5143, \u6536\u76ca\u7387: 0.34%\n</code></pre>"},{"location":"technology/python/","title":"\u7b80\u4ecb","text":"<p>\u8fd9\u662f\u6211\u6574\u7406\u7684\u4e0e<code>python</code>\u76f8\u5173\u7684\u77e5\u8bc6\u548c\u7b14\u8bb0</p>"},{"location":"technology/python/#centos-python3","title":"centos \u5b89\u88c5 Python3","text":"<p>\u539f\u6587: https://phoenixnap.com/kb/how-to-install-python-3-centos-7</p>"},{"location":"technology/python/#_2","title":"\u4ece\u5305\u7ba1\u7406\u5668\u5b89\u88c5","text":"<p>\u5305\u7ba1\u7406\u5668\u4e2d\u53ef\u7528\u7684\u6700\u65b0 Python 3 \u7248\u672c\u662f <code>Python 3.6.8</code>\u3002 \u5bf9\u4e8e\u6700\u65b0\u7684\u4e3b\u8981\u7248\u672c\uff0c\u60a8\u9700\u8981\u4ece\u6e90\u4ee3\u7801\u5b89\u88c5\u5305\u3002 \u6709\u5173\u5982\u4f55\u6267\u884c\u6b64\u64cd\u4f5c\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u9605\u4e0b\u4e00\u8282\u3002 \u5982\u679c\u60a8\u66f4\u559c\u6b22\u5b89\u88c5 3.6.8 \u7248\uff0c\u8bf7\u6309\u7167\u4e0b\u5217\u6b65\u9aa4\u64cd\u4f5c\u3002</p> <p>1\u3001\u9996\u5148\u66f4\u65b0\u5b58\u50a8\u5e93\uff1a</p> <pre><code>sudo yum update -y\n</code></pre> <p>2\u3001\u5728\u7ee7\u7eed\u5728 CentOS \u7cfb\u7edf\u4e0a\u5b89\u88c5 Python 3 \u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u5b83\u5728\u5305\u5b58\u50a8\u5e93\u4e2d\u53ef\u7528\u3002 \u5982\u679c\u60a8\u6709 CentOS 7.7 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u8bf7\u8df3\u81f3\u4e0b\u4e00\u6b65\u3002 \u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f 7.7 \u4e4b\u524d\u7684 CentOS \u7248\u672c\uff0c\u5219\u9700\u8981\u6dfb\u52a0 IUS\uff0c\u8fd9\u662f\u4e00\u4e2a yum \u5b58\u50a8\u5e93\uff0c\u63d0\u4f9b\u66f4\u65b0\u7684\u8f6f\u4ef6\u7248\u672c\u5e76\u5305\u62ec Python 3\u3002</p> <p>\u8981\u6dfb\u52a0 IUS \u5b58\u50a8\u5e93\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>sudo yum install https://repo.ius.io/ius-release-el$(rpm -E '%{rhel}').rpm\n</code></pre> <p>\u7b49\u5f85\u5b89\u88c5\u5b8c\u6210\u3002 \u7136\u540e\uff0c\u66f4\u65b0\u5b58\u50a8\u5e93\uff1a</p> <pre><code>sudo yum update -y\n</code></pre> <p>\u6ce8\u610f: \u4e0d\u786e\u5b9a\u60a8\u6b63\u5728\u8fd0\u884c\u54ea\u4e2a CentOS \u7248\u672c\uff1f \u6709\u8bb8\u591a\u4e0d\u540c\u7684\u65b9\u6cd5\u53ef\u4ee5\u68c0\u67e5 CentOS \u7248\u672c\u3002</p> <p>3\u3001 \u901a\u8fc7\u5728\u7ec8\u7aef\u7a97\u53e3\u4e2d\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u5b89\u88c5 Python 3\uff1a</p> <pre><code>sudo yum install -y python3\n</code></pre> <p>\u7b49\u5f85\u5b89\u88c5\u5b8c\u6210\u3002 \u8f93\u51fa\u5e94\u663e\u793a\u5b83\u5df2\u5b89\u88c5 python3 \u548c\u6240\u9700\u7684\u4f9d\u8d56\u9879\u3002</p> <p>4\u3001 \u9a8c\u8bc1\u60a8\u662f\u5426\u5df2\u6210\u529f\u5b89\u88c5 Python 3\uff1a</p> <pre><code>python3 --version\n</code></pre> <p>\u60a8\u5e94\u8be5\u4f1a\u5728\u60a8\u7684 CentOS \u7cfb\u7edf\u4e0a\u770b\u5230\u73b0\u5728\u53ef\u7528\u7684 Python 3 \u7248\u672c\u3002</p> <pre><code>$python3 --version\n\nPython 3.6.8\n</code></pre>"},{"location":"technology/python/#_3","title":"\u6e90\u7801\u7f16\u8bd1\u5b89\u88c5","text":"<p>\u8981\u5b89\u88c5 Python \u7684\u6700\u65b0\u4e3b\u8981\u7248\u672c 3.9.6\uff08\u5728\u64b0\u5199\u672c\u6587\u65f6\uff09\uff0c\u60a8\u9700\u8981\u4e0b\u8f7d\u6e90\u4ee3\u7801\u526f\u672c\u5e76\u5728\u8bbe\u7f6e\u65f6\u91c7\u53d6\u4e00\u4e9b\u989d\u5916\u6b65\u9aa4\u3002</p> <p>1\u3001 \u9996\u5148\uff0c\u5b89\u88c5\u6240\u9700\u7684\u5305\u548c\u4f9d\u8d56\u9879\uff1a</p> <pre><code>sudo yum groupinstall \"Development Tools\" -y\n</code></pre> <pre><code>sudo yum install gcc open-ssl-devel bzip2-devel libffi-devel sqlite-devel -y\nsudo yum install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gcc make libffi-devel -y\n</code></pre> <p>2\u3001 \u63a5\u4e0b\u6765\uff0c\u4f7f\u7528 <code>wget</code> \u547d\u4ee4\u4e0b\u8f7d\u6240\u9700\u7684 Python \u7248\u672c\u3002 \u5982\u679c\u60a8\u6ca1\u6709 wget\uff0c\u53ea\u9700\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5373\u53ef\u5b89\u88c5\u5b83\uff1a</p> <pre><code>sudo yum install wget -y\n</code></pre> <p>\u8981\u4e0b\u8f7d Python 3.9.6\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>wget https://www.python.org/ftp/python/3.9.6/Python-3.9.6.tgz\n</code></pre> <p>3\u3001\u89e3\u538b\u5305\uff1a</p> <pre><code>sudo tar xzf Python-3.9.6.tgz\n</code></pre> <p>4\u3001 \u7136\u540e\uff0c\u79fb\u52a8\u5230\u76ee\u5f55\uff1a</p> <pre><code>cd Python 3.9.6\n</code></pre> <p>5\u3001 \u8fdb\u5165 Python \u76ee\u5f55\u540e\uff0c\u4f7f\u7528\u4ee5\u4e0b\u4e24\u4e2a\u547d\u4ee4\u5c06\u6e90\u4ee3\u7801\u7f16\u8bd1\u6210\u5b89\u88c5\u5305\uff1a</p> <pre><code>./configure --enable-optimizations\n</code></pre> <pre><code>make altinstall\n</code></pre> <p>make \u547d\u4ee4\u6784\u5efa\u5b89\u88c5\u7a0b\u5e8f\u5305\u3002 <code>altinstall</code> \u547d\u4ee4\u6307\u793a\u7cfb\u7edf\u521b\u5efa\u6b64 Python \u7248\u672c\u7684\u7b2c\u4e8c\u4e2a\u5b89\u88c5\u3002 \u6ca1\u6709\u5b83\uff0c\u7cfb\u7edf\u5c06\u66ff\u6362 Python \u7684\u9ed8\u8ba4\u7248\u672c\u3002</p> <p>6\u3001\u68c0\u67e5 Python \u7248\u672c\u4ee5\u9a8c\u8bc1\u5b89\u88c5\uff1a</p> <pre><code>python3.9\n</code></pre> <p>\u7cfb\u7edf\u5e94\u663e\u793a\uff1a</p> <pre><code>aaaa\n</code></pre>"},{"location":"technology/python/#_4","title":"\u603b\u7ed3","text":"<p>\u672c\u6307\u5357\u63d0\u4f9b\u4e86\u4e24\u79cd\u5728 CentOS 7 \u4e0a\u5b89\u88c5 Python 3 \u7684\u4e0d\u540c\u65b9\u6cd5\u3002\u5bf9\u4e8e\u8f83\u65b0\u7248\u672c\u7684 CentOS\uff0c\u8bf7\u67e5\u770b\u6211\u4eec\u5173\u4e8e\u5982\u4f55\u5728 CentOS 8 \u4e0a\u5b89\u88c5 Python \u7684\u6587\u7ae0\u3002</p> <p>\u4e00\u5207\u5c31\u7eea\u540e\uff0c\u60a8\u53ef\u4ee5\u4ece\u4e00\u4e9b\u57fa\u672c\u811a\u672c\u5f00\u59cb\uff0c\u4f8b\u5982\u5728 Python \u4e2d\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u548c\u65e5\u671f\uff0c\u6216\u8005\u4f7f\u7528\u5185\u7f6e\u65b9\u6cd5\uff08\u5305\u62ec\u521b\u5efa\u3001\u6253\u5f00\u548c\u5173\u95ed\u6587\u4ef6\uff09\u5728 Python \u4e2d\u5b66\u4e60\u6587\u4ef6\u5904\u7406\u3002</p>"},{"location":"technology/python/package/importlib/","title":"importlib","text":"<p>\u5b98\u65b9\u6587\u6863: https://docs.python.org/zh-cn/3/library/importlib.html</p>"},{"location":"technology/python/package/importlib/#_1","title":"\u5bfc\u5165\u6587\u4ef6\u4e2d\u7684\u67d0\u4e2a\u7c7b","text":"<p>\u6bd4\u5982\u6211\u4eec\u60f3\u52a8\u6001\u5bfc\u5165\u67d0\u4e2apy\u6587\u4ef6\u4e2d\u7684\u7c7b\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u7528\u5230<code>importlib</code>\u5305, \u5148\u5bfc\u5165<code>module</code>\uff0c\u7136\u540e\u6267\u884c<code>module</code>, \u6700\u540e\u53d6\u51fa<code>module</code>\u4e2d\u7684\u7c7b\u4f9b\u6211\u4eec\u4f7f\u7528\u3002</p> <p>\u53c2\u8003: https://docs.python.org/zh-cn/3/library/importlib.html#importing-a-source-file-directly</p> <pre><code>module_name = f\"LeakModule\"\nspec = importlib_util.spec_from_file_location(module_name, file_path)\nmodule = importlib_util.module_from_spec(spec)\nspec.loader.exec_module(module)\n\n# \u7c7b\u540d: TheExploit \u662f\u56fa\u5b9a\u7684\u3002\nexcutor = module.TheExploit(ip, port)\nlogger.info(excutor)\nresult = excutor.run()\n\nlogger.info(f\"leak\u6d4b\u8bd5\u7ed3\u679c: {result}\")\n</code></pre>"},{"location":"technology/python/package/logging/","title":"logging","text":"<ul> <li>\u521b\u5efa\u65f6\u95f4: 2022\u5e7408\u670809\u65e516:17:05</li> <li>\u5b98\u7f51: https://docs.python.org/zh-cn/3.7/library/logging.html</li> </ul>"},{"location":"technology/python/package/logging/#logger","title":"\u5feb\u901f\u521b\u5efalogger","text":"<pre><code>import sys\nimport logging\nfrom logging.handlers import RotatingFileHandler\nfrom datetime import datetime\n\n\ndef initializeLogger(name, logfile, log_level=logging.DEBUG, file_level=logging.INFO):\n\n    logger = logging.getLogger(name)\n\n    if logger.hasHandlers():\n        logger.handlers.clear()\n\n    formatter = logging.Formatter(\n        \"[%(asctime)s] - %(levelname)s in %(pathname)s:%(lineno)d - %(message)s\"\n    )\n    logger.setLevel(log_level)\n\n    consoleHandler = logging.StreamHandler(sys.stdout)\n    consoleHandler.setFormatter(formatter)\n    consoleHandler.setLevel(log_level)\n    logger.addHandler(consoleHandler)\n\n    rotatingFileHanlder = RotatingFileHandler(\n        f\"{logfile}.{datetime.utcnow().strftime('%Y%m%d')}.log\",\n        maxBytes=5 * 1024 * 1024,\n        backupCount=1,\n    )\n    rotatingFileHanlder.setFormatter(formatter)\n    rotatingFileHanlder.setLevel(file_level)\n    logger.addHandler(rotatingFileHanlder)\n\n    return logger\n</code></pre>"},{"location":"technology/python/package/logging/#_1","title":"\u5b57\u7b26\u4e32\u683c\u5f0f","text":"<p>\u539f\u6587: https://docs.python.org/zh-cn/3.7/library/logging.html#logrecord-attributes</p> \u5c5e\u6027\u540d\u79f0 \u683c\u5f0f \u63cf\u8ff0 args \u4e0d\u9700\u8981\u683c\u5f0f\u5316\u3002 \u5408\u5e76\u5230 <code>msg</code> \u4ee5\u4ea7\u751f <code>message</code> \u7684\u5305\u542b\u53c2\u6570\u7684\u5143\u7ec4\uff0c\u6216\u662f\u5176\u4e2d\u7684\u503c\u5c06\u88ab\u7528\u4e8e\u5408\u5e76\u7684\u5b57\u5178\uff08\u5f53\u53ea\u6709\u4e00\u4e2a\u53c2\u6570\u4e14\u5176\u7c7b\u578b\u4e3a\u5b57\u5178\u65f6\uff09\u3002 asctime %(asctime)s \u8868\u793a LogRecord \u4f55\u65f6\u88ab\u521b\u5efa\u7684\u4f9b\u4eba\u67e5\u770b\u65f6\u95f4\u503c\u3002 \u9ed8\u8ba4\u5f62\u5f0f\u4e3a '2003-07-08 16:49:45,896' (\u9017\u53f7\u4e4b\u540e\u7684\u6570\u5b57\u4e3a\u65f6\u95f4\u7684\u6beb\u79d2\u90e8\u5206)\u3002 created %(created)f LogRecord \u88ab\u521b\u5efa\u7684\u65f6\u95f4\uff08\u5373 time.time() \u7684\u8fd4\u56de\u503c\uff09\u3002 exc_info \u4e0d\u9700\u8981\u683c\u5f0f\u5316\u3002 \u5f02\u5e38\u5143\u7ec4 (\u4f8b\u5982 <code>sys.exc_info</code>) \u6216\u8005\u5982\u672a\u53d1\u751f\u5f02\u5e38\u5219\u4e3a <code>None</code>\u3002 filename %(filename)s <code>pathname</code> \u7684\u6587\u4ef6\u540d\u90e8\u5206\u3002 funcName %(funcName)s \u51fd\u6570\u540d\u5305\u62ec\u8c03\u7528\u65e5\u5fd7\u8bb0\u5f55. levelname %(levelname)s \u6d88\u606f\u6587\u672c\u8bb0\u5f55\u7ea7\u522b ('DEBUG', 'INFO', 'WARNING', 'ERROR', 'CRITICAL'). levelno %(levelno)s \u6d88\u606f\u6570\u5b57\u8bb0\u5f55\u7ea7\u522b (DEBUG, INFO, WARNING, ERROR, CRITICAL). lineno %(lineno)d \u53d1\u51fa\u65e5\u5fd7\u8bb0\u5f55\u8c03\u7528\u6240\u5728\u7684\u6e90\u884c\u53f7\uff08\u5982\u679c\u53ef\u7528\uff09\u3002 message %(message)s \u8bb0\u5165\u65e5\u5fd7\u7684\u6d88\u606f\uff0c\u5373 <code>msg % args</code> \u7684\u7ed3\u679c\u3002 \u8fd9\u662f\u5728\u53d1\u8d77\u8c03\u7528 Formatter.format() \u65f6\u8bbe\u7f6e\u7684\u3002 module %(module)s \u6a21\u5757 (<code>filename</code> \u7684\u540d\u79f0\u90e8\u5206)\u3002 msecs %(msecs)d LogRecord \u88ab\u521b\u5efa\u7684\u65f6\u95f4\u7684\u6beb\u79d2\u90e8\u5206\u3002 msg \u4e0d\u9700\u8981\u683c\u5f0f\u5316\u3002 \u5728\u539f\u59cb\u65e5\u5fd7\u8bb0\u5f55\u8c03\u7528\u4e2d\u4f20\u5165\u7684\u683c\u5f0f\u5b57\u7b26\u4e32\u3002 \u4e0e args \u5408\u5e76\u4ee5\u4ea7\u751f message\uff0c\u6216\u662f\u4e00\u4e2a\u4efb\u610f\u5bf9\u8c61 (\u53c2\u89c1 \u4f7f\u7528\u4efb\u610f\u5bf9\u8c61\u4f5c\u4e3a\u6d88\u606f)\u3002 name %(name)s \u7528\u4e8e\u8bb0\u5f55\u8c03\u7528\u7684\u65e5\u5fd7\u8bb0\u5f55\u5668\u540d\u79f0\u3002 pathname %(pathname)s \u53d1\u51fa\u65e5\u5fd7\u8bb0\u5f55\u8c03\u7528\u7684\u6e90\u6587\u4ef6\u7684\u5b8c\u6574\u8def\u5f84\u540d\uff08\u5982\u679c\u53ef\u7528\uff09\u3002 process %(process)d \u8fdb\u7a0bID\uff08\u5982\u679c\u53ef\u7528\uff09 processName %(processName)s \u8fdb\u7a0b\u540d\uff08\u5982\u679c\u53ef\u7528\uff09 relativeCreated %(relativeCreated)d \u4ee5\u6beb\u79d2\u6570\u8868\u793a\u7684 LogRecord \u88ab\u521b\u5efa\u7684\u65f6\u95f4\uff0c\u5373\u76f8\u5bf9\u4e8e <code>logging</code> \u6a21\u5757\u88ab\u52a0\u8f7d\u65f6\u95f4\u7684\u5dee\u503c\u3002 stack_info \u4e0d\u9700\u8981\u683c\u5f0f\u5316\u3002 \u5f53\u524d\u7ebf\u7a0b\u4e2d\u4ece\u5806\u6808\u5e95\u90e8\u8d77\u5411\u4e0a\u76f4\u5230\u5305\u62ec\u65e5\u5fd7\u8bb0\u5f55\u8c03\u7528\u5e76\u5bfc\u81f4\u521b\u5efa\u6b64\u8bb0\u5f55\u7684\u5806\u6808\u5e27\u7684\u5806\u6808\u5e27\u4fe1\u606f\uff08\u5982\u679c\u53ef\u7528\uff09\u3002 thread %(thread)d \u7ebf\u7a0bID\uff08\u5982\u679c\u53ef\u7528\uff09 threadName %(threadName)s \u7ebf\u7a0b\u540d\uff08\u5982\u679c\u53ef\u7528\uff09 <p>\u5728 3.1 \u7248\u672c\u4e2d\u66f4\u6539: \u6dfb\u52a0\u4e86 <code>processName</code></p>"},{"location":"technology/python/package/pip/","title":"pip","text":"<ul> <li>\u521b\u5efa\u65f6\u95f4: 2022\u5e7408\u670815\u65e514:46:21</li> <li>\u5b98\u7f51: https://pypi.org/project/pip/</li> </ul>"},{"location":"technology/python/package/pip/#_1","title":"\u5e38\u7528\u547d\u4ee4","text":""},{"location":"technology/python/package/pip/#_2","title":"\u5b89\u88c5","text":"<p>\u5728<code>Python 3.4</code>\u7248\u672c\u4e4b\u540e\u4ee5\u53ca<code>Python 2.7.9</code>\u7248\u672c\u4e4b\u540e\uff0c\u5b98\u7f51\u7684\u5b89\u88c5\u5305\u5f53\u4e2d\u5c31\u5df2\u7ecf\u81ea\u5e26\u4e86<code>pip</code>\uff0c\u7528\u6237\u76f4\u63a5\u5728\u5b89\u88c5\u5b8cPython\u4e4b\u540e\u5c31\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\uff0c\u8981\u662f\u4f7f\u7528\u7531<code>virtualenv</code>\u6216\u8005<code>pyvenv</code>\u521b\u5efa\u7684\u865a\u62df\u73af\u5883\uff0c\u90a3\u4e48<code>pip</code>\u4e5f\u662f\u88ab\u9ed8\u8ba4\u5b89\u88c5\u7684</p> <p>\u5982\u679c\u662f\u9700\u8981\u81ea\u5df1\u53e6\u5916\u5b89\u88c5<code>pip</code>\u5305\u7684\uff0c\u5728\u5df2\u7ecf\u914d\u7f6e\u597dPython\u7684\u73af\u5883\u5f53\u4e2d\u8fd0\u884c\u4e0b\u9762\u8fd9\u4e2a\u547d\u4ee4\u884c</p> <pre><code>py -m ensurepip --upgrade\n</code></pre> <p>\u53e6\u5916\u4e00\u79cd\u65b9\u5f0f\u662f\u4ece\u5b98\u7f51\u4e0a(https://bootstrap.pypa.io/get-pip.py)\u76f4\u63a5\u4e0b\u8f7d<code>get-pip.py</code>\u811a\u672c\uff0c\u7136\u540e\u76f4\u63a5\u8fd0\u884c<code>python get-pip.py</code>\u811a\u672c\u5373\u53ef</p>"},{"location":"technology/python/package/pip/#_3","title":"\u5982\u4f55\u4f7f\u7528","text":"<p>\u5b89\u88c5\u540e\uff0c\u5728\u547d\u4ee4\u884c\u4e2d\u8f93\u5165pip\uff0c\u7136\u540e\u6309\u4e0b\u56de\u8f66\uff0c\u5c31\u4f1a\u51fa\u73b0\u4e0b\u56fe\u6240\u793a\u7684\u4f7f\u7528\u8bf4\u660e\uff1a</p> <pre><code>~ &gt; pip\n\nUsage:   pip &lt;command&gt; [options]\n\nCommands:\n  install                     Install packages.\n                              (\u5b89\u88c5\u5305)\ndownload                    Download packages.\n                              (\u4e0b\u8f7d\u5305)\nuninstall                   Uninstall packages.\n                              (\u5378\u8f7d\u5305)\nfreeze                      Output installed packages in requirements format.\n                              (\u4ee5`requirements`\u683c\u5f0f\u8f93\u51fa\u5df2\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305\u3002)\nlist                        List installed packages.\n                              (\u5217\u51fa\u5df2\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305\u3002)\nshow                        Show information about installed packages.\n                              (\u663e\u793a\u6709\u5173\u5df2\u5b89\u88c5\u8f6f\u4ef6\u5305\u7684\u4fe1\u606f\u3002)\ncheck                       Verify installed packages have compatible dependencies.\n                              (\u9a8c\u8bc1\u5df2\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305\u662f\u5426\u5177\u6709\u517c\u5bb9\u7684\u4f9d\u8d56\u9879\u3002)\nconfig                      Manage local and global configuration.\n                              (\u7ba1\u7406\u672c\u5730\u548c\u5168\u5c40\u914d\u7f6e\u3002)\nsearch                      Search PyPI for packages.\n                              (\u5728 PyPI \u4e2d\u641c\u7d22\u5305\u3002[\u5df2\u4e0d\u53ef\u7528])\ncache                       Inspect and manage pip's wheel cache.\n                              (\u68c0\u67e5\u548c\u7ba1\u7406 pip \u7684wheel\u7f13\u5b58\u3002)\n  index                       Inspect information available from package indexes.\n                              (\u68c0\u67e5\u5305\u7d22\u5f15\u4e2d\u7684\u53ef\u7528\u4fe1\u606f\u3002)\n  wheel                       Build wheels from your requirements.\n                              (\u6839\u636e\u60a8\u7684\u8981\u6c42\u6784\u5efa wheel)\n  hash                        Compute hashes of package archives.\n                              (\u8ba1\u7b97\u5305\u7684\u54c8\u5e0c\u503c\u3002)\n  completion                  A helper command used for command completion.\n                              (\u7528\u4e8e\u547d\u4ee4\u5b8c\u6210\u7684\u8f85\u52a9\u547d\u4ee4\u3002)\n  debug                       Show information useful for debugging.\n                              (\u663e\u793a\u5bf9\u8c03\u8bd5\u6709\u7528\u7684\u4fe1\u606f\u3002)\n  help                        Show help for commands.\n                              (\u663e\u793a\u547d\u4ee4\u5e2e\u52a9\u3002)\n\nGeneral Options:\n  -h, --help                  Show help.\n                              (\u663e\u793a\u5e2e\u52a9\u3002)\n  --debug                     Let unhandled exceptions propagate outside the main subroutine, instead of logging them to stderr.\n                              (\u8ba9\u672a\u5904\u7406\u7684\u5f02\u5e38\u4f20\u64ad\u5230\u4e3b\u5b50\u4f8b\u7a0b\u4e4b\u5916\uff0c\u800c\u4e0d\u662f\u5c06\u5b83\u4eec\u8bb0\u5f55\u5230 stderr\u3002)\n  --isolated                  Run pip in an isolated mode, ignoring environment variables and user configuration.\n                              (\u4ee5\u9694\u79bb\u6a21\u5f0f\u8fd0\u884c pip\uff0c\u5ffd\u7565\u73af\u5883\u53d8\u91cf\u548c\u7528\u6237\u914d\u7f6e\u3002)\n  --require-virtualenv        Allow pip to only run in a virtual environment; exit with an error otherwise.\n                              (\u5141\u8bb8 pip \u53ea\u5728\u865a\u62df\u73af\u5883\u4e2d\u8fd0\u884c\uff1b \u5426\u5219\u9000\u51fa\u9519\u8bef\u3002)\n  -v, --verbose               Give more output. Option is additive, and can be used up to 3 times.\n                              (\u7ed9\u66f4\u591a\u7684\u8f93\u51fa\u3002 \u9009\u9879\u662f\u9644\u52a0\u7684\uff0c\u6700\u591a\u53ef\u4f7f\u7528 3 \u6b21\u3002)\n  -V, --version               Show version and exit.\n                              (\u663e\u793a\u7248\u672c\u5e76\u9000\u51fa\u3002)\n  -q, --quiet                 Give less output. Option is additive, and can be used up to 3 times (corresponding to WARNING, ERROR, and CRITICAL logging levels).\n                              (\u51cf\u5c11\u8f93\u51fa\u3002 \u9009\u9879\u662f\u9644\u52a0\u7684\uff0c\u6700\u591a\u53ef\u4ee5\u4f7f\u7528 3 \u6b21\uff08\u5bf9\u5e94\u4e8e WARNING\u3001ERROR \u548c CRITICAL \u65e5\u5fd7\u8bb0\u5f55\u7ea7\u522b\uff09\u3002)\n  --log &lt;path&gt;                Path to a verbose appending log.\n                              (\u8be6\u7ec6\u9644\u52a0\u65e5\u5fd7\u7684\u8def\u5f84\u3002)\n  --no-input                  Disable prompting for input.\n                              (\u7981\u7528\u8f93\u5165\u63d0\u793a\u3002)\n  --proxy &lt;proxy&gt;             Specify a proxy in the form scheme://[user:passwd@]proxy.server:port.\n                              (\u4ee5 scheme://[user:passwd@]proxy.server:port \u5f62\u5f0f\u6307\u5b9a\u4ee3\u7406\u3002)\n  --retries &lt;retries&gt;         Maximum number of retries each connection should attempt (default 5 times).\n                              (\u6bcf\u4e2a\u8fde\u63a5\u5e94\u5c1d\u8bd5\u7684\u6700\u5927\u91cd\u8bd5\u6b21\u6570\uff08\u9ed8\u8ba4 5 \u6b21\uff09\u3002)\n  --timeout &lt;sec&gt;             Set the socket timeout (default 15 seconds).\n                              (\u8bbe\u7f6e\u5957\u63a5\u5b57\u8d85\u65f6\uff08\u9ed8\u8ba4 15 \u79d2\uff09\u3002)\n  --exists-action &lt;action&gt;    Default action when a path already exists: (s)witch, (i)gnore, (w)ipe, (b)ackup, (a)bort.\n                              (\u8def\u5f84\u5df2\u5b58\u5728\u65f6\u7684\u9ed8\u8ba4\u64cd\u4f5c\uff1a(s)witch\u3001(i)gnore\u3001(w)ipe\u3001(b)ackup\u3001(a)bort\u3002)\n  --trusted-host &lt;hostname&gt;   Mark this host or host:port pair as trusted, even though it does not have valid or any HTTPS.\n                              (\u5c06\u6b64\u4e3b\u673a\u6216\u4e3b\u673a\uff1a\u7aef\u53e3\u5bf9\u6807\u8bb0\u4e3a\u53d7\u4fe1\u4efb\uff0c\u5373\u4f7f\u5b83\u6ca1\u6709\u6709\u6548\u6216\u4efb\u4f55 HTTPS\u3002)\n  --cert &lt;path&gt;               Path to PEM-encoded CA certificate bundle. If provided, overrides the default. See 'SSL Certificate Verification' in pip documentation for more information.\n                              (PEM \u7f16\u7801\u7684 CA \u8bc1\u4e66\u5305\u7684\u8def\u5f84\u3002 \u5982\u679c\u63d0\u4f9b\uff0c\u8986\u76d6\u9ed8\u8ba4\u503c\u3002 \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 pip \u6587\u6863\u4e2d\u7684\u201cSSL \u8bc1\u4e66\u9a8c\u8bc1\u201d\u3002)\n  --client-cert &lt;path&gt;        Path to SSL client certificate, a single file containing the private key and the certificate in PEM format.\n                              (SSL \u5ba2\u6237\u7aef\u8bc1\u4e66\u7684\u8def\u5f84\uff0c\u5305\u542b\u79c1\u94a5\u548c PEM \u683c\u5f0f\u8bc1\u4e66\u7684\u5355\u4e2a\u6587\u4ef6\u3002)\n  --cache-dir &lt;dir&gt;           Store the cache data in &lt;dir&gt;.\n                              (\u5c06\u7f13\u5b58\u6570\u636e\u5b58\u50a8\u5728 &lt;dir&gt; \u4e2d\u3002)\n  --no-cache-dir              Disable the cache.\n                              (\u7981\u7528\u7f13\u5b58\u3002)\n  --disable-pip-version-check\n                              Don't periodically check PyPI to determine whether a new version of pip is available for download. Implied with --no-index.\n                              (\u4e0d\u8981\u5b9a\u671f\u68c0\u67e5 PyPI \u4ee5\u786e\u5b9a\u662f\u5426\u6709\u65b0\u7248\u672c\u7684 pip \u53ef\u4f9b\u4e0b\u8f7d\u3002 \u7528 --no-index \u6307\u5b9a\u3002)\n--no-color                  Suppress colored output.\n                              (\u6291\u5236\u5f69\u8272\u8f93\u51fa\u3002)\n--no-python-version-warning\n                              Silence deprecation warnings for upcoming unsupported Pythons.\n                              (\u5bf9\u5373\u5c06\u63a8\u51fa\u7684\u4e0d\u53d7\u652f\u6301\u7684 Python \u53d1\u51fa\u65e0\u58f0\u5f03\u7528\u8b66\u544a\u3002)\n--use-feature &lt;feature&gt;     Enable new functionality, that may be backward incompatible.\n                              (\u542f\u7528\u53ef\u80fd\u5411\u540e\u4e0d\u517c\u5bb9\u7684\u65b0\u529f\u80fd\u3002)\n--use-deprecated &lt;feature&gt;  Enable deprecated functionality, that will be removed in the future.\n                              (\u542f\u7528\u5df2\u5f03\u7528\u7684\u529f\u80fd\uff0c\u8be5\u529f\u80fd\u5c06\u5728\u672a\u6765\u88ab\u5220\u9664\u3002)\n</code></pre>"},{"location":"technology/python/package/pip/#_4","title":"\u5347\u7ea7","text":"<p>\u8981\u662f\u4f60\u89c9\u5f97\u81ea\u5df1\u7684pip\u7248\u672c\u6709\u70b9\u4f4e\uff0c\u60f3\u8981\u5347\u7ea7\u4e00\u4e0b\u7684\u8bdd\uff0c\u5728\u547d\u4ee4\u884c\u4e2d\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4</p> <pre><code>pip install --upgrade pip\n</code></pre> <p>\u6216\u8005\u662f</p> <pre><code>pip install -U pip\n</code></pre>"},{"location":"technology/python/package/pip/#_5","title":"\u5b89\u88c5\u67d0\u4e2a\u7248\u672c\u7684\u5305","text":"<p>\u5982\u679c\u6253\u7b97\u7528pip\u6765\u5b89\u88c5\u7b2c\u4e09\u65b9\u7684\u5305\uff0c\u7528\u7684\u662f\u4ee5\u4e0b\u7684\u547d\u4ee4\u884c</p> <pre><code>pip install package-name\n</code></pre> <p>\u4f8b\u5982\u6211\u4eec\u60f3\u8981\u5b89\u88c5\u6307\u5b9a\u7248\u672c\u7684\u7b2c\u4e09\u65b9\u7684\u5305\uff0c\u4f8b\u5982\u5b89\u88c53.4.1\u7248\u672c\u7684matplotlib\uff0c</p> <pre><code>pip install matplotlib==3.4.1\n</code></pre>"},{"location":"technology/python/package/pip/#_6","title":"\u5378\u8f7d\u6216\u8005\u662f\u66f4\u65b0\u5305","text":"<p>\u8981\u662f\u4f60\u6253\u7b97\u60f3\u8981\u5378\u8f7d\u67d0\u4e2a\u5305\uff0c\u8be5\u8981\u8f93\u5165\u7684\u547d\u4ee4\u884c\u662f</p> <pre><code>pip uninstall package_name\n</code></pre> <p>\u800c\u5982\u679c\u6253\u7b97\u66f4\u65b0\u67d0\u4e2a\u5305\uff0c\u5bf9\u5e94\u7684\u547d\u4ee4\u884c\u662f</p> <pre><code>pip install --upgrade package_name\n\n# \u6216\u8005\u662f\npip install -U package_name\n</code></pre>"},{"location":"technology/python/package/pip/#_7","title":"\u67e5\u770b\u67d0\u4e2a\u5305\u7684\u4fe1\u606f","text":"<p>\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u7684\u8fd9\u4e2a\u547d\u4ee4\u884c\u6765\u67e5\u770b\u6307\u5b9a\u5305\u7684\u4fe1\u606f\uff0c</p> <pre><code>&gt; pip show -f requests\n\nName: requests\nVersion: 2.24.0\nSummary: Python HTTP for Humans.\nHome-page: https://requests.readthedocs.io\nAuthor: Kenneth Reitz\nAuthor-email: me@kennethreitz.org\nLicense: Apache 2.0\nLocation: c:\\users\\pc120\\pycharmprojects\\pythonproject1\\venv\\lib\\site-packages\nRequires: certifi, chardet, idna, urllib3\nRequired-by: etelemetry, gTTS, pandas-datareader, pandas-profiling, pyler, pywhatkit, pyxnat, streamlit, tushare, wikipedia, yfinance\nFiles:\n  requests-2.24.0.dist-info\\DESCRIPTION.rst\n  requests-2.24.0.dist-info\\INSTALLER\n  .......\n</code></pre>"},{"location":"technology/python/package/pip/#_8","title":"\u67e5\u770b\u9700\u8981\u88ab\u5347\u7ea7\u7684\u5305","text":"<p>\u6211\u4eec\u9700\u8981\u67e5\u770b\u4e00\u4e0b\u73b0\u6709\u7684\u8fd9\u4e9b\u5305\u4e2d\uff0c\u54ea\u4e9b\u662f\u9700\u8981\u662f\u88ab\u5347\u7ea7\u7684\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u8fd9\u884c\u547d\u4ee4\u884c\u6765\u67e5\u770b\uff0c</p> <pre><code>&gt; pip list -o\n\nPackage    Version Latest Type\n---------- ------- ------ -----\ndocutils   0.15.2  0.18.1 wheel\nPyYAML     5.4.1   6.0    wheel\nrsa        4.7.2   4.8    wheel\nsetuptools 56.0.0  62.1.0 wheel\n</code></pre>"},{"location":"technology/python/package/pip/#_9","title":"\u67e5\u770b\u517c\u5bb9\u95ee\u9898","text":"<p>\u5728\u4e0b\u8f7d\u5b89\u88c5\u4e00\u4e9b\u6807\u51c6\u5e93\u7684\u65f6\u5019\uff0c\u9700\u8981\u8003\u8651\u5230\u517c\u5bb9\u95ee\u9898\uff0c\u4e00\u4e9b\u6807\u51c6\u5e93\u7684\u5b89\u88c5\u53ef\u80fd\u9700\u8981\u4f9d\u8d56\u5176\u4ed6\u7684\u6807\u51c6\u5e93\uff0c\u4f1a\u5b58\u5728\u7248\u672c\u76f8\u51b2\u7a81\u7b49\u95ee\u9898\uff0c\u6211\u4eec\u5148\u7528\u4e0b\u9762\u8fd9\u6761\u547d\u4ee4\u884c\u6765\u68c0\u67e5\u4e00\u4e0b\u662f\u5426\u4f1a\u6709\u51b2\u7a81\u7684\u95ee\u9898\u5b58\u5728</p> <pre><code>&gt; pip check package_name\n</code></pre> <p>\u5f53\u7136\u8981\u662f\u6211\u4eec\u4e0d\u6307\u5b9a\u662f\u54ea\u4e2a\u6807\u51c6\u5e93\u7684\u8bdd\uff0c\u4f1a\u68c0\u67e5\u73b0\u5728\u5df2\u7ecf\u5b89\u88c5\u7684\u6240\u6709\u5305\u4e2d\u7684\u662f\u5426\u5b58\u5728\u7248\u672c\u51b2\u7a81\u7b49\u95ee\u9898</p> <pre><code>&gt; pip check\n\nyfinance 0.1.70 has requirement requests&gt;=2.26, but you have requests 2.24.0.\nselenium 4.1.0 has requirement urllib3[secure]~=1.26, but you have urllib3 1.25.11.\n</code></pre>"},{"location":"technology/python/package/pip/#_10","title":"\u6307\u5b9a\u56fd\u5185\u6e90\u6765\u5b89\u88c5","text":"<p>\u6211\u4eec\u8981\u662f\u611f\u89c9\u5230\u5b89\u88c5\u7684\u901f\u5ea6\u6709\u70b9\u6162\uff0c\u53ef\u4ee5\u6307\u5b9a\u56fd\u5185\u7684\u6e90\u6765\u5b89\u88c5\u67d0\u4e2a\u5305\uff0c\u4f8b\u5982</p> <pre><code>&gt; pip install -i https://pypi.douban.com/simple/ package_name\n</code></pre> <p>\u56fd\u5185\u6e90\u6709</p> <pre><code>\u6e05\u534e\uff1ahttps://pypi.tuna.tsinghua.edu.cn/simple\n\u963f\u91cc\u4e91\uff1ahttp://mirrors.aliyun.com/pypi/simple/\n\u4e2d\u56fd\u79d1\u6280\u5927\u5b66 https://pypi.mirrors.ustc.edu.cn/simple/\n\u534e\u4e2d\u7406\u5de5\u5927\u5b66\uff1ahttp://pypi.hustunique.com/\n\u5c71\u4e1c\u7406\u5de5\u5927\u5b66\uff1ahttp://pypi.sdutlinux.org/ \n\u8c46\u74e3\uff1ahttp://pypi.douban.com/simple/\n</code></pre>"},{"location":"technology/python/package/pip/#_11","title":"\u4e0b\u8f7d\u5305\u4f46\u662f\u4e0d\u5b89\u88c5","text":"<p>\u8981\u662f\u6211\u4eec\u60f3\u8981\u4e0b\u8f7d\u67d0\u4e2a\u5305\u5230\u6307\u5b9a\u7684\u8def\u5f84\u4e0b\uff0c\u547d\u4ee4\u884c\u5982\u4e0b</p> <pre><code>&gt; pip download package_name -d \"\u67d0\u4e2a\u8def\u5f84\"\n</code></pre> <p>\u4f8b\u5982</p> <pre><code>&gt; pip download requests -d \".\"\n</code></pre> <p>\u5c31\u662f\u5728\u5f53\u524d\u7684\u76ee\u5f55\u4e0b\u4e0b\u8f7drequests\u6a21\u5757\u4ee5\u53ca\u5176\u4ed6\u6240\u8981\u4f9d\u8d56\u7684\u6a21\u5757</p>"},{"location":"technology/python/package/pip/#_12","title":"\u6279\u91cf\u5b89\u88c5\u8f6f\u4ef6\u5305","text":"<p>\u6211\u4eec\u4e00\u822c\u5728\u770b\u5230\u522b\u4eba\u7684\u9879\u76ee\u65f6\uff0c\u90fd\u4f1a\u5305\u542b\u4e00\u4e2a<code>requirements.txt</code>\u6587\u4ef6\uff0c\u91cc\u9762\u5305\u542b\u4e86\u4e00\u4e9bPython\u9879\u76ee\u5f53\u4e2d\u9700\u8981\u7528\u5230\u7684\u7b2c\u4e09\u65b9\u5e93</p> <pre><code>antlr4-python3-runtime==4.7.2\nclick==8.1.3\nghp-import==2.1.0\n...\n</code></pre> <p>\u8981\u751f\u6210\u8fd9\u79cdtxt\u6587\u4ef6\uff0c\u9700\u8981\u8fd9\u4e48\u6765\u505a</p> <pre><code>&gt; pip freeze &gt; requirements.txt\n</code></pre> <p>\u800c\u5982\u679c\u6211\u4eec\u9700\u8981\u6765\u6279\u91cf\u5b89\u88c5\u7b2c\u4e09\u65b9\u5e93\uff0c\u5728\u547d\u4ee4\u884c\u4e2d\u8f93\u5165\u4ee5\u4e0b\u8fd9\u4e2a\u547d\u4ee4</p> <pre><code>&gt; pip install -r requirements.txt\n</code></pre>"},{"location":"technology/python/package/pycrypto/","title":"crypto","text":""},{"location":"technology/python/package/pycrypto/#_1","title":"\u80cc\u666f\u77e5\u8bc6","text":"<ul> <li> <p>\uff081\uff09AES \u662f\u9ad8\u7ea7\u52a0\u5bc6\u6807\u51c6(Advanced Encryption Standard)\u7684\u7f29\u5199\uff0cAES \u662f\u6700\u5e38\u89c1\u7684\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u3002</p> <p>\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5 \u4e5f\u5c31\u662f<code>\u52a0\u5bc6</code>\u548c<code>\u89e3\u5bc6</code>\u7528\u76f8\u540c\u7684\u5bc6\u94a5\uff0c\u540c\u4e00\u4e2a\u79d8\u94a5\u5373\u7528\u6765\u52a0\u5bc6\uff0c\u4e5f\u7528\u6765\u89e3\u5bc6\u3002</p> <p>\u5173\u4e8e\u52a0\u5bc6\u89e3\u5bc6\u7684\u539f\u7406\u53ef\u4ee5\u641c\u7d22\u4e00\u4e0b\u76f8\u5173\u7684\u6587\u7ae0\u3002</p> <p>RSA \u662f\u4e00\u79cd\u5178\u578b\u7684<code>\u975e\u5bf9\u79f0\u5bc6\u94a5\u5bc6\u7801</code>\u4f53\u5236\uff0c\u4ece<code>\u52a0\u5bc6\u5bc6\u94a5</code>\u548c<code>\u89e3\u5bc6\u5bc6\u94a5</code>\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u63a8\u5bfc\u51fa\u53e6\u4e00\u4e2a\u5728\u8ba1\u7b97\u4e0a\u662f\u4e0d\u53ef\u884c\u7684\u3002<code>RSA</code>\u7684\u5b89\u5168\u6027\u5efa\u7acb\u5728 \u201c\u5927\u6570\u5206\u89e3\u548c\u7d20\u6027\u68c0\u6d4b\u201d \u8fd9\u4e00\u8457\u540d\u6570\u8bba\u96be\u9898\u7684\u57fa\u7840\u4e0a\u3002</p> <p>\u516c\u94a5\u5bf9\u53ef\u4ee5\u5b8c\u5168\u516c\u5f00\uff0c\u4e0d\u9700\u8981\u8fdb\u884c\u4fdd\u5bc6\uff0c\u4f46\u5fc5\u987b\u63d0\u4f9b\u5b8c\u6574\u6027\u68c0\u6d4b\u673a\u5236\u4ee5\u4fdd\u8bc1\u4e0d\u53d7\u7be1\u6539\uff1b</p> <p>\u79c1\u94a5\u7531\u7528\u6237\u81ea\u5df1\u4fdd\u5b58\u3002\u901a\u4fe1\u53cc\u65b9\u65e0\u9700\u5b9e\u73b0\u4ea4\u6362\u5bc6\u94a5\u5c31\u53ef\u4ee5\u8fdb\u884c\u4fdd\u5bc6\u901a\u4fe1\u3002</p> </li> <li> <p>\uff082\uff09RSA\u5bc6\u7801\u4f53\u5236\u7b97\u6cd5\u5982\u4e0b\uff1a</p> <p>\u7531\u7528\u6237\u9009\u62e9\u4e24\u4e2a\u4e92\u5f02\u5e76\u4e14\u8ddd\u79bb\u8f83\u8fdc\u7684\u5927\u7d20\u6570<code>p</code>\u548c<code>q</code>\uff1b</p> <p>\u8ba1\u7b97<code>n=p\u00d7q</code>\u548c<code>f(n)=(p-1)\u00d7(q-1)</code>\uff1b</p> <p>\u9009\u62e9\u6b63\u6574\u6570<code>e</code>\uff0c\u4f7f\u5176\u4e0e<code>f(n)</code>\u7684\u6700\u5927\u516c\u7ea6\u6570\u4e3a<code>1</code>\uff1b</p> <p>\u7136\u540e\u8ba1\u7b97\u6b63\u6574\u6570<code>d</code>\uff0c\u4f7f\u5f97<code>e \u00d7 d</code>\u5bf9<code>f(n)</code>\u7684\u4f59\u6570\u4e3a<code>1</code>\uff0c\u5373<code>e\u00d7d\u22611 mod f(n)</code>\uff0c\u6700\u540e\u9500\u6bc1<code>p</code>\u548c<code>q</code>\u3002</p> <p>\u7ecf\u8fc7\u4ee5\u4e0a\u6b65\u9aa4\uff0c\u5f97\u51fa\u516c\u94a5\u5bf9<code>(n,e)</code>\u548c\u79c1\u94a5\u5bf9<code>(n,d)</code>\u3002</p> <p>\u8bbe<code>M</code>\u4e3a\u660e\u6587\uff0c<code>C</code>\u4e3a\u5bf9\u5e94\u7684\u5bc6\u6587\uff0c</p> <p>\u5219\u52a0\u5bc6\u53d8\u6362\u4e3a\uff1a<code>C=M^e mod n</code>\uff1b</p> <p>\u89e3\u5bc6\u53d8\u6362\u4e3a\uff1a<code>M=C^d mod n</code>\u3002</p> </li> </ul>"},{"location":"technology/python/package/pycrypto/#pycrypto-python","title":"PyCrypto - Python \u5bc6\u7801\u5b66\u5de5\u5177\u5305","text":"<p>Python \u5bc6\u7801\u5b66\u5de5\u5177\u5305 (pycrypto)</p> <p>\u6ce8\u610f: \u8be5\u8f6f\u4ef6\u4e0d\u518d\u7ef4\u62a4\u3002\u53c2\u8003:  https://www.pycrypto.org/</p> <p>pycrypto \u5386\u53f2\u94fe\u63a5</p> <p>\u26a0\ufe0f PyCrypto 2.x \u672a\u7ef4\u62a4\u3002\u5df2\u8fc7\u65f6\u4e14\u5305\u542b\u5b89\u5168\u6f0f\u6d1e\u3002\u4ee5\u4e0b\u5185\u5bb9\u4ec5\u4f9b\u53c2\u8003\u3002</p> <ul> <li>API \u6587\u6863\uff08epydoc \u8f93\u51fa\uff09</li> <li>PyCrypto \u6982\u8ff0\uff08\u4eceDoc/pycrypto.rst \u6784\u5efa\uff09</li> <li>\u6e90\u4ee3\u7801\u5b58\u50a8\u5e93 (GitHub)</li> <li>\u53d1\u5e03\u538b\u7f29\u5305</li> <li>\u90ae\u4ef6\u5217\u8868\u5b58\u6863\uff08\u672c\u5730\u5feb\u7167\uff09</li> <li>Pypi</li> </ul> <p>\u8fd9\u662f\u5b89\u5168\u6563\u5217\u51fd\u6570\uff08\u5982 SHA256 \u548c RIPEMD160\uff09\u548c\u5404\u79cd\u52a0\u5bc6\u7b97\u6cd5\uff08AES\u3001DES\u3001RSA\u3001ElGamal \u7b49\uff09\u7684\u96c6\u5408\u3002</p> <p>\u8bf7\u9009\u62e9\u4ee5\u4e0b\u9009\u9879\u4e4b\u4e00\uff1a</p> <ul> <li>Cryptography: https://cryptography.io/</li> <li>\u63a8\u8350\u7528\u4e8e\u65b0\u5e94\u7528</li> <li>\u8f83\u65b0\u7684 API\uff0c\u9677\u9631\u8f83\u5c11\u3002</li> <li>API \u6587\u6863</li> <li>GitHub</li> <li>Pypi</li> <li>PyCryptodome: https://www.pycryptodome.org/</li> <li>\u63a8\u8350\u7528\u4e8e\u4f9d\u8d56 PyCrypto \u7684\u73b0\u6709\u8f6f\u4ef6\u3002</li> <li>PyCrypto \u7684\u5206\u53c9\u3002\u5927\u591a\u6570\u5e94\u7528\u7a0b\u5e8f\u5e94\u8be5\u5728\u672a\u7ecf\u4fee\u6539\u7684\u60c5\u51b5\u4e0b\u8fd0\u884c\u3002</li> <li>API \u6587\u6863</li> <li>GitHub</li> <li>Pypi</li> </ul>"},{"location":"technology/python/package/pycrypto/#aesecb","title":"\u8001\u7248\u672cAES\u7684ECB\u6a21\u578b\u52a0\u5bc6\u793a\u4f8b","text":"<pre><code>import base64\nfrom Crypto.Cipher import AES\n\nclass AesEncry(object):\n    key = \"U%56#o#u$jk0ffds\".encode('utf-8')  # aes\u79d8\u94a5\n    mode = AES.MODE_ECB\n    cryptos = AES.new(key, mode)\n\n    def decrypt(self, text):\n        decode_base64 = base64.decodebytes(text.encode(\"utf-8\"))\n        plain_text = self.cryptos.decrypt(decode_base64)\n        return self.uncode_chars(plain_text.decode(\"utf-8\"))\n\n    @staticmethod\n    def uncode_chars(data):\n        nCount = ord(data[-1])\n        for i in data[-nCount:]:\n            if ord(i) != nCount:\n                return data\n        return data[:-nCount]\n\n    def encrypt(self, data):\n        BLOCK_SIZE = 16\n        pad = lambda s: (\n            s\n            + (BLOCK_SIZE - len(s) % BLOCK_SIZE)\n            * chr(BLOCK_SIZE - len(s) % BLOCK_SIZE)\n        )\n        text = pad(str(data))\n        cipher_text = self.cryptos.encrypt(text.encode(\"utf-8\"))\n        # \u56e0\u4e3aAES\u52a0\u5bc6\u540e\u7684\u5b57\u7b26\u4e32\u4e0d\u4e00\u5b9a\u662fascii\u5b57\u7b26\u96c6\u7684\uff0c\u8f93\u51fa\u4fdd\u5b58\u53ef\u80fd\u5b58\u5728\u95ee\u9898\uff0c\u6240\u4ee5\u8fd9\u91cc\u8f6c\u4e3abase64\u8fdb\u5236\u5b57\u7b26\u4e32\n        return base64.encodebytes(cipher_text).decode(\"utf-8\")\n\n\n## \u5bf9\u5e94\u7684\u8f83\u65b0\u7684\u4f7f\u7528 PyCryptodome \u7684\u52a0\u5bc6\u65b9\u5f0f\n\nfrom Crypto.Util.Padding import pad, unpad\nfrom Crypto.Cipher import AES\nBLOCK_SIZE = 32 # Bytes\n\nkey = 'abcdefghijklmnop'\ncipher = AES.new(key.encode('utf8'), AES.MODE_ECB)\nmsg = cipher.encrypt(pad(b'hello', BLOCK_SIZE))\nprint(msg.hex())\n\ndecipher = AES.new(key.encode('utf8'), AES.MODE_ECB)\nmsg_dec = decipher.decrypt(msg)\nprint(unpad(msg_dec, BLOCK_SIZE))\n</code></pre>"},{"location":"technology/python/package/pycrypto/#cryptographyaes-256-ecb","title":"\u4f7f\u7528cryptography\u8fdb\u884cAES-256-ECB\u52a0\u5bc6","text":"<p>\u539f\u6587: https://gist.github.com/tcitry/df5ee377ad112d7637fe7b9211e6bc83</p> <pre><code>import base64\nfrom cryptography.hazmat.primitives.ciphers import Cipher, algorithms, modes\nfrom cryptography.hazmat.primitives import padding\nfrom cryptography.hazmat.backends import default_backend\nfrom django.utils.encoding import force_bytes, force_text\n\nSECRET_KEY = \"hellomotherfucker\"\nvalue = force_bytes(\"12345678901234567890\")\n\nbackend = default_backend()\nkey = force_bytes(base64.urlsafe_b64encode(force_bytes(SECRET_KEY))[:32])\n\n\nclass Crypto:\n\n    def __init__(self):\n        self.encryptor = Cipher(algorithms.AES(key), modes.ECB(), backend).encryptor()\n        self.decryptor = Cipher(algorithms.AES(key), modes.ECB(), backend).decryptor()\n\n    def encrypt(self):\n        padder = padding.PKCS7(algorithms.AES(key).block_size).padder()\n        padded_data = padder.update(value) + padder.finalize()\n        encrypted_text = self.encryptor.update(padded_data) + self.encryptor.finalize()\n        return encrypted_text\n\n    def decrypt(self, value):\n        padder = padding.PKCS7(algorithms.AES(key).block_size).unpadder()\n        decrypted_data = self.decryptor.update(value)\n        unpadded = padder.update(decrypted_data) + padder.finalize()\n        return unpadded\n\n\nif __name__ == '__main__':\n    print('&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;')\n    crypto = Crypto()\n    text = force_text(base64.urlsafe_b64encode(crypto.encrypt()))\n    print(text)\n    print('&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;')\n    text = force_text(crypto.decrypt(base64.urlsafe_b64decode(text)))\n    print(text)\n</code></pre>"},{"location":"technology/python/report/docx/","title":"Docx","text":"<p>\u53c2\u8003 docx_doc \u7684\u6587\u6863.</p> <p>\u5b98\u7f51: pyton-docx</p>"},{"location":"technology/python/report/excel/","title":"Excel","text":"<p>Python\u8bfb\u5199Excel\u683c\u5f0f\u7684\u6570\u636e\u53c2\u8003\uff1ahttps://www.python-excel.org/</p> <p>\u4ee5\u53ca github \u7ec4\u7ec7: python-excel</p>"},{"location":"technology/python/report/excel/#python-excel","title":"\u5728 Python \u4e2d\u5904\u7406 Excel \u6587\u4ef6","text":"<ul> <li>openpyxl: \u7528\u4e8e\u8bfb\u5199 Excel 2010 \u6587\u4ef6\u7684\u63a8\u8350\u5305</li> <li>xlsxwriter: \u7528\u4e8e\u5199\u5165\u6570\u636e, \u683c\u5f0f\u5316\u4fe1\u606f\uff0c\u7279\u522b\u662f Excel 2010 \u683c\u5f0f\uff08\u5373\uff1a.xlsx\uff09\u7684\u56fe\u8868\u7684\u66ff\u4ee3\u5305</li> <li>pyxlsb: \u8bfb\u53d6xlsb\u683c\u5f0f\u7684 Excel \u6587\u4ef6.</li> <li>pylightxl: \u8bfb\u53d6 xlsx \u548c xlsm \u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u4ee5\u53ca\u5199\u5165 xlsx \u683c\u5f0f\u6587\u4ef6\u3002</li> <li>xlrd: \u4ece\u65e7 Excel \u6587\u4ef6\uff08\u5373\uff1a.xls\uff09\u4e2d\u8bfb\u53d6\u6570\u636e\u548c\u683c\u5f0f\u4fe1\u606f</li> <li>xlwt: \u5c06\u6570\u636e\u548c\u683c\u5f0f\u4fe1\u606f\u5199\u5165\u65e7\u7248 Excel \u6587\u4ef6\uff08\u5373\uff1a.xls\uff09</li> <li>xlutils: \u6536\u96c6\u4e86\u9700\u8981xlrd\u548c\u7684\u5b9e\u7528\u7a0b\u5e8fxlwt\uff0c\u5305\u62ec\u590d\u5236\u548c\u4fee\u6539\u6216\u8fc7\u6ee4\u73b0\u6709 Excel \u6587\u4ef6\u7684\u80fd\u529b\u3002</li> <li>xlwings: xlwings \u662f\u4e00\u4e2aBSD \u8bb8\u53ef\u7684Python \u5e93\uff0c\u53ef\u4ee5\u8f7b\u677e\u5730\u4ece Excel \u8c03\u7528 Python\uff0c\u53cd\u4e4b\u4ea6\u7136:</li> <li>\u811a\u672c\uff1a\u4f7f\u7528\u63a5\u8fd1 VBA \u7684\u8bed\u6cd5\u4ece Python \u81ea\u52a8/\u4e0e Excel \u4ea4\u4e92\u3002</li> <li>\u5b8f\uff1a\u7528\u5e72\u51c0\u800c\u5f3a\u5927\u7684 Python \u4ee3\u7801\u66ff\u6362\u4f60\u51cc\u4e71\u7684 VBA \u5b8f\u3002</li> <li>UDF\uff1a\u5728 Python \u4e2d\u7f16\u5199\u7528\u6237\u5b9a\u4e49\u51fd\u6570 (UDF)\uff08\u4ec5\u9650 Windows\uff09\u3002</li> </ul>"},{"location":"technology/python/report/excel/#_1","title":"\u5e38\u89c1\u95ee\u9898","text":"<ol> <li> <p>\u8f6c\u6362Excel\u7684float\u7c7b\u578b\u7684\u65f6\u95f4</p> <p>\u53c2\u8003\uff1ahttps://stackoverflow.com/questions/32430679/how-to-read-dates-using-xlrd</p> <pre><code>import datetime\nimport xlrd\n\nbook = xlrd.open_workbook(\"myexcelfile.xls\")\nsh = book.sheet_by_index(0)\na1 = sh.cell_value(rowx=0, colx=0)\na1_as_datetime = datetime.datetime(*xlrd.xldate_as_tuple(a1, book.datemode))\n\nprint 'datetime: %s' % a1_as_datetime\n</code></pre> </li> </ol>"},{"location":"technology/rfc/oauth2/","title":"oauth2\u5b66\u4e60\u7b14\u8bb0","text":""},{"location":"technology/rfc/oauth2/#_1","title":"\u53c2\u8003\u8d44\u6599","text":"<ul> <li>\u7406\u89e3OAuth 2.0 - \u962e\u4e00\u5cf0</li> <li>\u4e00\u3001OAuth 2.0 \u7684\u4e00\u4e2a\u7b80\u5355\u89e3\u91ca - \u962e\u4e00\u5cf0</li> <li>\u4e8c\u3001OAuth 2.0 \u7684\u56db\u79cd\u65b9\u5f0f - \u962e\u4e00\u5cf0</li> <li> <p>\u4e09\u3001GitHub OAuth \u7b2c\u4e09\u65b9\u767b\u5f55\u793a\u4f8b\u6559\u7a0b - \u962e\u4e00\u5cf0</p> </li> <li> <p>RFC6749 - Oauth 2.0 RFC\u6807\u51c6</p> </li> <li> <p>RFC6749-\u4e2d\u6587\u7ffb\u8bd1 - github\u4ed3\u5e93</p> </li> <li> <p>RFC7230-7237 - HTTP/1.1 - github\u4ed3\u5e93</p> </li> <li>HTTP \u76f8\u5173\u7684 RFCs \u4e2d\u82f1\u6587\u5bf9\u7167 - github\u4ed3\u5e93 - \u63a8\u8350</li> </ul>"},{"location":"technology/rfc/oauth2/#_2","title":"\u521d\u8bc6","text":""},{"location":"technology/rfc/oauth2/#_3","title":"\u57fa\u672c\u6d41\u7a0b","text":"<p>powered by platuml(\u6d3b\u52a8\u56fe)</p>"},{"location":"technology/rfc/oauth2/#_4","title":"\u5bc6\u7801\u4e0e\u4ee4\u724c","text":"<p>\u4ee4\u724c\uff08token\uff09\u4e0e\u5bc6\u7801\uff08password\uff09\u7684\u4f5c\u7528\u662f\u4e00\u6837\u7684\uff0c\u90fd\u53ef\u4ee5\u8fdb\u5165\u7cfb\u7edf\uff0c\u4f46\u662f\u6709\u4e09\u70b9\u5dee\u5f02\u3002</p> <ol> <li>\u4ee4\u724c<code>\u662f\u77ed\u671f\u7684</code>\uff0c\u5230\u671f\u4f1a\u81ea\u52a8\u5931\u6548\uff0c\u7528\u6237\u81ea\u5df1\u65e0\u6cd5\u4fee\u6539\u3002\u5bc6\u7801\u4e00\u822c\u957f\u671f\u6709\u6548\uff0c\u7528\u6237\u4e0d\u4fee\u6539\uff0c\u5c31\u4e0d\u4f1a\u53d1\u751f\u53d8\u5316\u3002</li> <li>\u4ee4\u724c<code>\u53ef\u4ee5\u88ab\u6570\u636e\u6240\u6709\u8005\u64a4\u9500</code>\uff0c\u4f1a\u7acb\u5373\u5931\u6548\u3002\u4ee5\u4e0a\u4f8b\u800c\u8a00\uff0c\u7528\u6237\u53ef\u4ee5\u968f\u65f6\u53d6\u6d88\u7b2c\u4e09\u65b9\u7cfb\u7edf\u7684\u4ee4\u724c\u3002\u5bc6\u7801\u4e00\u822c\u4e0d\u5141\u8bb8\u88ab\u4ed6\u4eba\u64a4\u9500\u3002</li> <li>\u4ee4\u724c<code>\u6709\u6743\u9650\u8303\u56f4</code>\uff08scope\uff09\uff0c\u6bd4\u5982\u53ea\u80fd\u8fdb\u884c\u8bfb\u53d6\uff0c\u4e0d\u80fd\u5199\u5165\uff0c\u4e0d\u80fd\u64cd\u4f5c\u3002\u5bf9\u4e8e\u7f51\u7edc\u670d\u52a1\u6765\u8bf4\uff0c\u53ea\u8bfb\u4ee4\u724c\u5c31\u6bd4\u8bfb\u5199\u4ee4\u724c\u66f4\u5b89\u5168\u3002\u5bc6\u7801\u4e00\u822c\u662f\u5b8c\u6574\u6743\u9650\u3002</li> </ol> <p>\u4e0a\u9762\u8fd9\u4e9b\u8bbe\u8ba1\uff0c\u4fdd\u8bc1\u4e86\u4ee4\u724c\u65e2\u53ef\u4ee5\u8ba9\u7b2c\u4e09\u65b9\u5e94\u7528\u83b7\u5f97\u6743\u9650\uff0c\u540c\u65f6\u53c8\u968f\u65f6\u53ef\u63a7\uff0c\u4e0d\u4f1a\u5371\u53ca\u7cfb\u7edf\u5b89\u5168\u3002\u8fd9\u5c31\u662f <code>OAuth 2.0</code> \u76843\u4e2a <code>\u4f18\u70b9</code>\u3002</p>"},{"location":"technology/rfc/oauth2/#_5","title":"\u56db\u79cd\u65b9\u5f0f","text":"<p>RFC \u5b9a\u4e49:</p> <p>RFC6749</p> <p>The OAuth 2.0 authorization framework enables a third-party application to obtain limited access to an HTTP service, either on behalf of a resource owner by orchestrating an approval interaction between the resource owner and the HTTP service, or by allowing the third-party application to obtain access on its own behalf.  This specification replaces and obsoletes the OAuth 1.0 protocol described in RFC 5849.</p> <p>\u7ffb\u8bd1:</p> <p>OAuth 2.0 \u6388\u6743\u6846\u67b6 \u4f7f \u7b2c\u4e09\u65b9\u5e94\u7528\u7a0b\u5e8f \u80fd\u591f\u4ee3\u8868 \u8d44\u6e90\u6240\u6709\u8005 \u901a\u8fc7 \u534f\u8c03\u8d44\u6e90\u6240\u6709\u8005 \u548c HTTP\u670d\u52a1\u4e4b\u95f4 \u7684\u6279\u51c6\u4ea4\u4e92\uff0c\u6216\u5141\u8bb8\u7b2c\u4e09\u65b9\u5e94\u7528\u7a0b\u5e8f\u83b7\u5f97\u5bf9 HTTP \u670d\u52a1\u7684\u6709\u9650\u8bbf\u95ee \u4ee5\u81ea\u5df1\u7684\u540d\u4e49\u83b7\u53d6\u8bbf\u95ee\u6743\u9650\u3002 \u8be5\u89c4\u8303\u53d6\u4ee3\u5e76\u5e9f\u5f03\u4e86 RFC 5849 \u4e2d\u63cf\u8ff0\u7684 OAuth 1.0 \u534f\u8bae\u3002</p> <p>\u540c\u65f6 <code>RFC 6749</code> \u5b9a\u4e49\u4e86 \u56db\u79cd\u83b7\u53d6\u4ee4\u724c\u7684\u65b9\u5f0f</p> <ol> <li>\u6388\u6743\u7801\uff08authorization-code\uff09</li> <li>\u9690\u85cf\u5f0f\uff08implicit\uff09</li> <li>\u5bc6\u7801\u5f0f\uff08password\uff09</li> <li>\u5ba2\u6237\u7aef\u51ed\u8bc1\uff08client credentials\uff09</li> </ol> <p>\u540c\u65f6\u8be5\u534f\u8bae\u8fd8\u5f3a\u8c03\uff1a</p> <p>\u4e0d\u7ba1\u54ea\u4e00\u79cd\u6388\u6743\u65b9\u5f0f\uff0c\u7b2c\u4e09\u65b9\u5e94\u7528\u7533\u8bf7\u4ee4\u724c\u4e4b\u524d\uff0c\u90fd\u5fc5\u987b\u5148\u5230\u7cfb\u7edf\u5907\u6848\uff0c\u8bf4\u660e\u81ea\u5df1\u7684\u8eab\u4efd\uff0c\u7136\u540e\u4f1a\u62ff\u5230\u4e24\u4e2a\u8eab\u4efd\u8bc6\u522b\u7801\uff1a<code>\u5ba2\u6237\u7aefID</code>\uff08client ID\uff09\u548c<code>\u5ba2\u6237\u7aef\u5bc6\u94a5</code>\uff08client secret\uff09\u3002\u8fd9\u662f\u4e3a\u4e86\u9632\u6b62\u4ee4\u724c\u88ab\u6ee5\u7528\uff0c\u6ca1\u6709\u5907\u6848\u8fc7\u7684\u7b2c\u4e09\u65b9\u5e94\u7528\uff0c\u662f\u4e0d\u4f1a\u62ff\u5230\u4ee4\u724c\u7684\u3002 \u53c2\u8003: Client Registration</p>"},{"location":"technology/rfc/oauth2/#authorization-code-grant","title":"\u7b2c\u4e00\u79cd\u65b9\u5f0f: \u6388\u6743\u7801 (Authorization Code Grant)","text":"<p>\u6388\u6743\u7801\uff08<code>authorization code</code>\uff09\u65b9\u5f0f\uff0c\u6307\u7684\u662f\u7b2c\u4e09\u65b9\u5e94\u7528\u5148\u7533\u8bf7\u4e00\u4e2a\u6388\u6743\u7801\uff0c\u7136\u540e\u518d\u7528\u8be5\u7801\u83b7\u53d6\u4ee4\u724c\u3002 \u6807\u51c6\u53c2\u8003: Authorization Code Grant</p> <p>\u8fd9\u79cd\u65b9\u5f0f\u662f\u6700\u5e38\u7528\u7684\u6d41\u7a0b\uff0c<code>\u5b89\u5168\u6027</code>\u4e5f\u6700\u9ad8\uff0c\u5b83\u9002\u7528\u4e8e\u90a3\u4e9b\u6709<code>\u540e\u7aef</code>\u7684 <code>Web\u5e94\u7528</code>\u3002\u6388\u6743\u7801\u901a\u8fc7\u524d\u7aef\u4f20\u9001\uff0c\u4ee4\u724c\u5219\u662f\u50a8\u5b58\u5728\u540e\u7aef\uff0c\u800c\u4e14\u6240\u6709\u4e0e\u8d44\u6e90\u670d\u52a1\u5668\u7684\u901a\u4fe1\u90fd\u5728\u540e\u7aef\u5b8c\u6210\u3002\u8fd9\u6837\u7684\u524d\u540e\u7aef\u5206\u79bb\uff0c\u53ef\u4ee5\u907f\u514d\u4ee4\u724c\u6cc4\u6f0f\u3002</p> <p>RFC6749 - Authorization Code Grant https://datatracker.ietf.org/doc/html/rfc6749#page-13</p> <p>\u539f\u6587:</p> <p>The authorization code grant type is used to obtain both access tokens and refresh tokens and is optimized for confidential clients. Since this is a redirection-based flow, the client must be capable of interacting with the resource owner's user-agent (typically a web browser) and capable of receiving incoming requests (via redirection) from the authorization server.</p> <p>\u7ffb\u8bd1:</p> <p>\u6388\u6743\u4ee3\u7801\u6388\u4e88\u7c7b\u578b\u7528\u4e8e\u83b7\u53d6\u8bbf\u95ee\u4ee4\u724c\u548c\u5237\u65b0\u4ee4\u724c\uff0c\u5e76\u9488\u5bf9\u673a\u5bc6\u5ba2\u6237\u7aef\u8fdb\u884c\u4e86\u4f18\u5316\u3002 \u7531\u4e8e\u8fd9\u662f\u57fa\u4e8e\u91cd\u5b9a\u5411\u7684\u6d41\u7a0b\uff0c\u56e0\u6b64\u5ba2\u6237\u7aef\u5fc5\u987b\u80fd\u591f\u4e0e\u8d44\u6e90\u6240\u6709\u8005\u7684\u7528\u6237\u4ee3\u7406\uff08\u901a\u5e38\u662f Web \u6d4f\u89c8\u5668\uff09\u4ea4\u4e92\uff0c\u5e76\u80fd\u591f\u4ece\u6388\u6743\u670d\u52a1\u5668\u63a5\u6536\u4f20\u5165\u8bf7\u6c42\uff08\u901a\u8fc7\u91cd\u5b9a\u5411\uff09\u3002</p>"},{"location":"technology/rfc/oauth2/#_6","title":"\u6d41\u7a0b\u56fe","text":"<p>\u8be5\u6d41\u7a0b\u56fe\u5305\u542b\u5982\u4e0b\u6b65\u9aa4:</p> <p>\u539f\u6587:</p> <ul> <li>(A) The client initiates the flow by directing the resource owner's user-agent to the authorization endpoint.  The client includesits client identifier, requested scope, local state, and a redirection URI to which the authorization server will send the user-agent back once access is granted (or denied).</li> <li>(B) The authorization server authenticates the resource owner (via the user-agent) and establishes whether the resource owner grants or denies the client's access request.</li> <li>(C)  Assuming the resource owner grants access, the authorization server redirects the user-agent back to the client using the redirection URI provided earlier (in the request or during client registration).  The redirection URI includes an authorization code and any local state provided by the client earlier.</li> <li>(D)  The client requests an access token from the authorization server's token endpoint by including the authorization code received in the previous step.  When making the request, the client authenticates with the authorization server.  The client includes the redirection URI used to obtain the authorization code for verification.</li> <li>(E)  The authorization server authenticates the client, validates the authorization code, and ensures that the redirection URI received matches the URI used to redirect the client in step (C).  If valid, the authorization server responds back with an access token and, optionally, a refresh token.</li> </ul> <p>\u7ffb\u8bd1:</p> <ul> <li>(A) <code>\u5ba2\u6237\u7aef</code>\u901a\u8fc7\u5c06<code>\u8d44\u6e90\u62e5\u6709\u8005</code>\u7684\u7528\u6237\u4ee3\u7406\u5b9a\u5411\u5230\u6388\u6743\u7aef\u70b9\u6765\u542f\u52a8\u6d41\u7a0b\u3002 \u5ba2\u6237\u7aef\u5305\u62ec\u5176<code>\u5ba2\u6237\u7aef\u6807\u8bc6\u7b26</code>\u3001<code>\u8bf7\u6c42\u7684\u8303\u56f4</code>\u3001<code>\u672c\u5730\u72b6\u6001</code>\u548c<code>\u91cd\u5b9a\u5411 URI</code>\uff0c\u4e00\u65e6\u6388\u4e88\uff08\u6216\u62d2\u7edd\uff09\u8bbf\u95ee\u6743\u9650\uff0c<code>\u6388\u6743\u670d\u52a1\u5668</code>\u4f1a\u5c06\u7528\u6237\u4ee3\u7406\u53d1\u9001\u56de\u8be5 <code>URI</code>\u3002</li> <li>(B) <code>\u6388\u6743\u670d\u52a1\u5668</code>\u9a8c\u8bc1<code>\u8d44\u6e90\u62e5\u6709\u8005</code>\uff08\u901a\u8fc7<code>\u7528\u6237\u4ee3\u7406</code>\uff09\u5e76\u786e\u5b9a<code>\u8d44\u6e90\u62e5\u6709\u8005</code>\u662f<code>\u6388\u4e88</code>\u8fd8\u662f<code>\u62d2\u7edd</code>\u5ba2\u6237\u7aef\u7684<code>\u8bbf\u95ee\u8bf7\u6c42</code>\u3002</li> <li>(C) \u5047\u8bbe<code>\u8d44\u6e90\u62e5\u6709\u8005``\u6388\u4e88</code>\u8bbf\u95ee\u6743\u9650\uff0c<code>\u6388\u6743\u670d\u52a1\u5668</code>\u4f7f\u7528\u4e4b\u524d\u63d0\u4f9b\u7684<code>\u91cd\u5b9a\u5411 URI</code>\uff08\u5728\u8bf7\u6c42\u4e2d\u6216\u5ba2\u6237\u7aef\u6ce8\u518c\u671f\u95f4\uff09\u5c06\u7528\u6237\u4ee3\u7406\u91cd\u5b9a\u5411\u56de<code>\u5ba2\u6237\u7aef</code>\u3002 <code>\u91cd\u5b9a\u5411 URI</code>\u5305\u62ec<code>\u6388\u6743\u7801</code>\u548c<code>\u5ba2\u6237\u7aef</code>\u4e4b\u524d\u63d0\u4f9b\u7684\u4efb\u4f55<code>\u672c\u5730\u72b6\u6001</code>\u3002</li> <li>(D) \u5ba2\u6237\u7aef\u901a\u8fc7\u5305\u542b\u5728\u4e0a\u4e00\u6b65\u4e2d\u6536\u5230\u7684<code>\u6388\u6743\u7801</code>\uff0c\u4ece<code>\u6388\u6743\u670d\u52a1\u5668</code>\u7684\u4ee4\u724c\u7aef\u70b9<code>\u8bf7\u6c42``\u8bbf\u95ee\u4ee4\u724c</code>\u3002 \u53d1\u51fa\u8bf7\u6c42\u65f6\uff0c<code>\u5ba2\u6237\u7aef</code>\u5411<code>\u6388\u6743\u670d\u52a1\u5668</code>\u8fdb\u884c<code>\u8eab\u4efd\u9a8c\u8bc1</code>\u3002 <code>\u5ba2\u6237\u7aef</code>\u5305\u542b\u7528\u4e8e\u83b7\u53d6\u901a\u8fc7\u9a8c\u8bc1\u7684<code>\u6388\u6743\u7801</code>\u7684<code>\u91cd\u5b9a\u5411 URI</code>\u3002</li> <li>(E) <code>\u6388\u6743\u670d\u52a1\u5668</code>\u5bf9<code>\u5ba2\u6237\u7aef</code>\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u9a8c\u8bc1<code>\u6388\u6743\u7801</code>\uff0c\u5e76\u786e\u4fdd\u6536\u5230\u7684<code>\u91cd\u5b9a\u5411 URI</code> \u4e0e<code>\u6b65\u9aa4 (C)</code> \u4e2d\u7528\u4e8e<code>\u91cd\u5b9a\u5411\u5ba2\u6237\u7aef\u7684URI</code> \u5339\u914d\u3002 \u5982\u679c\u6709\u6548\uff0c<code>\u6388\u6743\u670d\u52a1\u5668</code>\u5c06\u4f7f\u7528\u8bbf\u95ee\u4ee4\u724c\u548c\u53ef\u9009\u7684<code>\u5237\u65b0\u4ee4\u724c</code>\u8fdb\u884c\u54cd\u5e94\u3002</li> </ul> <p>\u6982\u62ec\u6765\u8bf4\u5206\u4e3a4\u4e2a\u6b65\u9aa4\uff1a</p> <ol> <li>\u83b7\u53d6\u6388\u6743\u7801</li> <li>\u7528\u6237\u5141\u8bb8(\u6216\u62d2\u7edd)\u6388\u6743</li> <li>\u643a\u5e26\u6388\u6743\u7801\u8bf7\u6c42\u4ee4\u724c(\u62d2\u7edd\u6388\u6743\u540e\u7ed3\u675f)</li> <li>\u643a\u5e26\u4ee4\u724c\u8bf7\u6c42\u6570\u636e\u6216\u66f4\u65b0\u4ee4\u724c</li> </ol>"},{"location":"technology/rfc/oauth2/#_7","title":"\u6388\u6743\u8bf7\u6c42","text":"<p>\u539f\u6587\u53c2\u8003: RFC6749</p> <p>\u8bf7\u6c42\u793a\u4f8b:</p> <pre><code>GET /authorize?response_type=code&amp;client_id=s6BhdRkqt3&amp;state=xyz&amp;redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb HTTP/1.1\nHost: server.example.com\n</code></pre> <p>\u53c2\u6570:</p> \u540d\u79f0 \u5fc5\u987b \u63cf\u8ff0 response_type \u662f \u503c\u5fc5\u987b\u4e3a <code>code</code> client_id \u662f \u5ba2\u6237\u7aef\u6807\u8bc6, \u53c2\u8003: Client Identifier redirect_uri \u5426 \u91cd\u5b9a\u5411\u5730\u5740, \u53c2\u8003: Redirection Endpoint scope \u5426 \u8303\u56f4\u63cf\u8ff0, \u53c2\u8003: Access Token Scope state \u5426(\u63a8\u8350) \u5ba2\u6237\u7aef\u7528\u4e8e\u7ef4\u62a4\u8bf7\u6c42\u548c\u56de\u8c03\u4e4b\u95f4\u7684\u72b6\u6001\u7684\u4e0d\u900f\u660e\u503c\u3002 \u6388\u6743\u670d\u52a1\u5668\u5728\u5c06\u7528\u6237\u4ee3\u7406\u91cd\u5b9a\u5411\u56de\u5ba2\u6237\u7aef\u65f6\u5305\u542b\u6b64\u503c\u3002 \u8be5\u53c2\u6570\u5e94\u8be5\u7528\u4e8e\u9632\u6b62\u8de8\u7ad9\u70b9\u8bf7\u6c42\u4f2a\u9020\uff0c\u53c2\u8003: Cross-Site Request Forgery"},{"location":"technology/rfc/oauth2/#_8","title":"\u6388\u6743\u54cd\u5e94","text":"<p>\u539f\u6587\u53c2\u8003: RFC6749</p> <p>\u54cd\u5e94\u793a\u4f8b:</p> <pre><code>HTTP/1.1 302 Found\nLocation: https://client.example.com/cb?code=SplxlOBeZQQYbYS6WxSbIA&amp;state=xyz\n</code></pre> <p>\u53c2\u6570:</p> \u540d\u79f0 \u5fc5\u987b \u63cf\u8ff0 code \u662f \u6388\u6743\u670d\u52a1\u5668\u751f\u6210\u7684\u6388\u6743\u7801\u3002 \u6388\u6743\u4ee3\u7801\u5fc5\u987b\u5728\u53d1\u5e03\u540e\u4e0d\u4e45\u5230\u671f\uff0c\u4ee5\u964d\u4f4e\u6cc4\u6f0f\u98ce\u9669\u3002 \u63a8\u8350\u7684\u6700\u957f\u6388\u6743\u4ee3\u7801\u751f\u547d\u5468\u671f\u4e3a 10 \u5206\u949f\u3002 \u5ba2\u6237\u7aef\u4e0d\u5f97\u591a\u6b21\u4f7f\u7528\u6388\u6743\u7801\u3002 \u5982\u679c\u4e00\u4e2a\u6388\u6743\u7801\u88ab\u591a\u6b21\u4f7f\u7528\uff0c\u6388\u6743\u670d\u52a1\u5668\u5fc5\u987b\u62d2\u7edd\u8be5\u8bf7\u6c42\u5e76\u4e14\u5e94\u8be5\u64a4\u9500\uff08\u5982\u679c\u53ef\u80fd\uff09\u4e4b\u524d\u57fa\u4e8e\u8be5\u6388\u6743\u7801\u53d1\u51fa\u7684\u6240\u6709\u4ee4\u724c\u3002 \u6388\u6743\u7801\u7ed1\u5b9a\u5230\u5ba2\u6237\u7aef\u6807\u8bc6\u7b26\u548c\u91cd\u5b9a\u5411 URI\u3002 state \u662f \u5982\u679c\u5ba2\u6237\u7aef\u6388\u6743\u8bf7\u6c42\u4e2d\u5b58\u5728\u201cstate\u201d\u53c2\u6570\u3002 \u4ece\u5ba2\u6237\u7aef\u6536\u5230\u7684\u786e\u5207\u503c\u3002"},{"location":"technology/rfc/oauth2/#_9","title":"\u6388\u6743\u5f02\u5e38\u54cd\u5e94","text":"<p>\u539f\u6587\u53c2\u8003: RFC6749</p> <p>\u54cd\u5e94\u793a\u4f8b:</p> <pre><code>HTTP/1.1 302 Found\nLocation: https://client.example.com/cb?error=access_denied&amp;state=xyz\n</code></pre> <p>\u54cd\u5e94\u4f53\u5305\u542b:</p> \u540d\u79f0 \u5fc5\u987b \u63cf\u8ff0 error \u662f \u4e00\u4e2a\u5355\u72ec\u7684 ASCII\u7f16\u7801\u7684\u9519\u8bef\u7801\uff0c\u53ef\u9009\u503c: <code>invalid_request</code> \u3001<code>unauthorized_client</code> \u3001<code>access_denied</code> \u3001<code>unsupported_response_type</code> \u3001<code>invalid_scope</code> \u3001<code>server_error</code> \u3001<code>temporarily_unavailable</code> error_description \u53ef\u9009 \u53ef\u8bfb\u7684\u9519\u8bef\u63cf\u8ff0\uff0c\u7528\u4e8e\u534f\u52a9\u5ba2\u6237\u7aef\u5f00\u53d1\u4eba\u5458\u4e86\u89e3\u53d1\u751f\u7684\u9519\u8bef\u3002 error_uri \u53ef\u9009 \u53ef\u8bfb\u7684\u7f51\u9875\u9519\u8bef\u8be6\u7ec6\u63cf\u8ff0\uff0c\u7528\u4e8e\u5411\u5ba2\u6237\u7aef\u63d0\u4f9b\u5f00\u53d1\u4eba\u5458\u63d0\u4f9b\u6709\u5173\u9519\u8bef\u7684\u5176\u4ed6\u4fe1\u606f\u3002 state \u53ef\u9009 \u5982\u679c\u5ba2\u6237\u7aef\u8bf7\u6c42\u5b58\u5728<code>state</code>\u53c2\u6570\uff0c\u5e76\u4e14\u88ab\u670d\u52a1\u5668\u6536\u5230\u3002"},{"location":"technology/rfc/oauth2/#_10","title":"\u8bbf\u95ee\u4ee4\u724c\u8bf7\u6c42","text":"<p>\u539f\u6587\u53c2\u8003: RFC6749</p> <p>\u8bf7\u6c42\u793a\u4f8b:</p> <pre><code>POST /token HTTP/1.1\nHost: server.example.com\nAuthorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW\nContent-Type: application/x-www-form-urlencoded\n\ngrant_type=authorization_code&amp;code=SplxlOBeZQQYbYS6WxSbIA\n&amp;redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb\n</code></pre> <p>\u8bf7\u6c42\u4f53\u5305\u542b:</p> \u540d\u79f0 \u5fc5\u987b \u63cf\u8ff0 grant_type \u662f \u503c\u5fc5\u987b\u662f <code>authorization_code</code> code \u662f \u4ece\u6388\u6743\u670d\u52a1\u5668\u6536\u5230\u7684\u6388\u6743\u7801\u3002 redirect_uri \u662f \u5982\u679c<code>redirect_uri</code>\u53c2\u6570\u5305\u542b\u5728<code>\u6388\u6743\u8bf7\u6c42</code>\u4e2d\uff0c\u5e76\u4e14\u5b83\u4eec\u7684\u503c\u5fc5\u987b\u76f8\u540c\u3002 client_id \u662f \u5982\u679c\u5ba2\u6237\u7aef\u6ca1\u6709\u4f7f\u7528\u6388\u6743\u670d\u52a1\u5668\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u65f6\u63d0\u4f9b\u3002"},{"location":"technology/rfc/oauth2/#_11","title":"\u8bbf\u95ee\u4ee4\u724c\u54cd\u5e94","text":"<p>\u539f\u6587\u53c2\u8003: RFC6749</p> <p>\u54cd\u5e94\u793a\u4f8b:</p> <pre><code>HTTP/1.1 200 OK\nContent-Type: application/json;charset=UTF-8\nCache-Control: no-store\nPragma: no-cache\n\n{\n\"access_token\":\"2YotnFZFEjr1zCsicMWpAA\",\n  \"token_type\":\"example\",\n  \"expires_in\":3600,\n  \"refresh_token\":\"tGzv3JOkF0XG5Qx2TlKWIA\",\n  \"example_parameter\":\"example_value\"\n}\n</code></pre> <p>\u8bf7\u6c42\u4f53\u5305\u542b:</p> \u540d\u79f0 \u5fc5\u987b \u63cf\u8ff0 access_token \u662f \u6388\u6743\u670d\u52a1\u5668\u9881\u53d1\u7684\u8bbf\u95ee\u4ee4\u724c\u3002 token_type \u662f \u53d1\u884c\u7684\u4ee4\u724c\u7c7b\u578b\uff0c\u503c\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u3002\u53c2\u8003:  Access Token Types expires_in \u662f(\u63a8\u8350) \u8bbf\u95ee\u4ee4\u724c\u7684\u751f\u547d\u5468\u671f\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 \u4f8b\u5982\uff0c\u503c\u201c3600\u201d\u8868\u793a\u8bbf\u95ee\u4ee4\u724c\u5c06\u5728\u54cd\u5e94\u751f\u6210\u540e\u7684\u4e00\u5c0f\u65f6\u5185\u5230\u671f\u3002 \u5982\u679c\u7701\u7565\uff0c\u6388\u6743\u670d\u52a1\u5668\u5e94\u8be5\u901a\u8fc7\u5176\u4ed6\u65b9\u5f0f\u63d0\u4f9b\u8fc7\u671f\u65f6\u95f4\u6216\u8bb0\u5f55\u9ed8\u8ba4\u503c\u3002 refresh_token \u662f \u5237\u65b0\u4ee4\u724c\uff0c\u53ef\u4f7f\u7528\u4e8e\u76f8\u540c\u6388\u6743\u7684\u83b7\u53d6\u65b0\u7684\u8bbf\u95ee\u4ee4\u724c\u3002 \u53c2\u8003: Refreshing an Access Token scope \u53ef\u9009 \u5982\u679c\u4e0e\u5ba2\u6237\u8981\u6c42\u7684\u8303\u56f4\u76f8\u540c\uff1b \u5426\u5219\uff0c\u9700\u8981\u3002 \u53c2\u8003: Access Token Scope"},{"location":"technology/rfc/oauth2/#_12","title":"\u8bbf\u95ee\u4ee4\u724c\u5f02\u5e38\u54cd\u5e94","text":"<p>\u539f\u6587\u53c2\u8003: Error Response</p> <p>\u54cd\u5e94\u793a\u4f8b:</p> <pre><code>HTTP/1.1 400 Bad Request\nContent-Type: application/json;charset=UTF-8\nCache-Control: no-store\nPragma: no-cache\n\n{\n\"error\":\"invalid_request\"\n}\n</code></pre> <p>\u54cd\u5e94\u4f53\u5305\u542b:</p> \u540d\u79f0 \u5fc5\u987b \u63cf\u8ff0 error \u662f \u4e00\u4e2a\u5355\u72ec\u7684 ASCII\u7f16\u7801\u7684\u9519\u8bef\u7801\uff0c\u53ef\u9009\u503c: <code>invalid_request</code> \u3001<code>invalid_client</code> \u3001<code>invalid_grant</code> \u3001<code>unauthorized_client</code> \u3001<code>unsupported_grant_type</code> \u3001<code>invalid_scope</code> error_description \u53ef\u9009 \u53ef\u8bfb\u7684\u9519\u8bef\u63cf\u8ff0\uff0c\u7528\u4e8e\u534f\u52a9\u5ba2\u6237\u7aef\u5f00\u53d1\u4eba\u5458\u4e86\u89e3\u53d1\u751f\u7684\u9519\u8bef\u3002 error_uri \u53ef\u9009 \u53ef\u8bfb\u7684\u7f51\u9875\u9519\u8bef\u8be6\u7ec6\u63cf\u8ff0\uff0c\u7528\u4e8e\u5411\u5ba2\u6237\u7aef\u63d0\u4f9b\u5f00\u53d1\u4eba\u5458\u63d0\u4f9b\u6709\u5173\u9519\u8bef\u7684\u5176\u4ed6\u4fe1\u606f\u3002 state \u53ef\u9009 \u5982\u679c\u5ba2\u6237\u7aef\u8bf7\u6c42\u5b58\u5728<code>state</code>\u53c2\u6570\uff0c\u5e76\u4e14\u88ab\u670d\u52a1\u5668\u6536\u5230\u3002 <p>https://www.ruanyifeng.com/blog/2019/04/oauth-grant-types.html</p>"},{"location":"technology/rfc/oauth2/#implicit-grant","title":"\u7b2c\u4e8c\u79cd\u65b9\u5f0f: \u9690\u85cf\u5f0f (Implicit Grant)","text":"<p>\u6709\u4e9b Web \u5e94\u7528\u662f\u7eaf\u524d\u7aef\u5e94\u7528\uff0c\u6ca1\u6709\u540e\u7aef\u3002\u8fd9\u65f6\u5c31\u4e0d\u80fd\u7528\u4e0a\u9762\u7684\u65b9\u5f0f\u4e86\uff0c\u5fc5\u987b\u5c06\u4ee4\u724c\u50a8\u5b58\u5728\u524d\u7aef\u3002<code>RFC 6749</code> \u5c31\u89c4\u5b9a\u4e86\u7b2c\u4e8c\u79cd\u65b9\u5f0f\uff0c\u5141\u8bb8\u76f4\u63a5\u5411\u524d\u7aef\u9881\u53d1\u4ee4\u724c\u3002\u8fd9\u79cd\u65b9\u5f0f\u6ca1\u6709\u6388\u6743\u7801\u8fd9\u4e2a\u4e2d\u95f4\u6b65\u9aa4\uff0c\u6240\u4ee5\u79f0\u4e3a\uff08\u6388\u6743\u7801\uff09\"\u9690\u85cf\u5f0f\"\uff08<code>implicit</code>\uff09\u3002</p> <p>@RFC6749 - Authorization Code Grant https://datatracker.ietf.org/doc/html/rfc6749#page-13</p> <p>\u539f\u6587:</p> <p>The implicit grant type is used to obtain access tokens (it does notsupport the issuance of refresh tokens) and is optimized for publicclients known to operate a particular redirection URI.  These clientsare typically implemented in a browser using a scripting languagesuch as JavaScript.</p> <p>Since this is a redirection-based flow, the client must be capable ofinteracting with the resource owner's user-agent (typically a webbrowser) and capable of receiving incoming requests (via redirection)from the authorization server.</p> <p>Unlike the authorization code grant type, in which the client makesseparate requests for authorization and for an access token, theclient receives the access token as the result of the authorizationrequest.</p> <p>The implicit grant type does not include client authentication, andrelies on the presence of the resource owner and the registration ofthe redirection URI.  Because the access token is encoded into theredirection URI, it may be exposed to the resource owner and otherapplications residing on the same device.</p> <p>\u7ffb\u8bd1:</p> <p>\u9690\u5f0f\u6388\u6743\u7c7b\u578b\u7528\u4e8e\u83b7\u53d6\u8bbf\u95ee\u4ee4\u724c\uff08\u5b83\u4e0d\u652f\u6301\u53d1\u5e03\u5237\u65b0\u4ee4\u724c\uff09\uff0c\u5e76\u9488\u5bf9\u5df2\u77e5\u64cd\u4f5c\u7279\u5b9a\u91cd\u5b9a\u5411 URI \u7684\u516c\u5171\u5ba2\u6237\u7aef\u8fdb\u884c\u4e86\u4f18\u5316\u3002 \u8fd9\u4e9b\u5ba2\u6237\u7aef\u901a\u5e38\u4f7f\u7528 JavaScript \u7b49\u811a\u672c\u8bed\u8a00\u5728\u6d4f\u89c8\u5668\u4e2d\u5b9e\u73b0\u3002</p> <p>\u7531\u4e8e\u8fd9\u662f\u57fa\u4e8e\u91cd\u5b9a\u5411\u7684\u6d41\u7a0b\uff0c\u56e0\u6b64\u5ba2\u6237\u7aef\u5fc5\u987b\u80fd\u591f\u4e0e\u8d44\u6e90\u6240\u6709\u8005\u7684\u7528\u6237\u4ee3\u7406\uff08\u901a\u5e38\u662f Web \u6d4f\u89c8\u5668\uff09\u4ea4\u4e92\uff0c\u5e76\u80fd\u591f\u4ece\u6388\u6743\u670d\u52a1\u5668\u63a5\u6536\u4f20\u5165\u8bf7\u6c42\uff08\u901a\u8fc7\u91cd\u5b9a\u5411\uff09\u3002</p> <p>\u4e0e\u5ba2\u6237\u7aef\u53d1\u51fa\u5355\u72ec\u7684\u6388\u6743\u8bf7\u6c42\u548c\u8bbf\u95ee\u4ee4\u724c\u8bf7\u6c42\u7684\u6388\u6743\u4ee3\u7801\u6388\u4e88\u7c7b\u578b\u4e0d\u540c\uff0c\u5ba2\u6237\u7aef\u63a5\u6536\u8bbf\u95ee\u4ee4\u724c\u4f5c\u4e3a\u6388\u6743\u8bf7\u6c42\u7684\u7ed3\u679c\u3002</p> <p>\u9690\u5f0f\u6388\u6743\u7c7b\u578b\u4e0d\u5305\u62ec\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5e76\u4e14\u4f9d\u8d56\u4e8e\u8d44\u6e90\u6240\u6709\u8005\u7684\u5b58\u5728\u548c\u91cd\u5b9a\u5411 URI \u7684\u6ce8\u518c\u3002 \u7531\u4e8e\u8bbf\u95ee\u4ee4\u724c\u88ab\u7f16\u7801\u5230\u91cd\u5b9a\u5411 URI \u4e2d\uff0c\u56e0\u6b64\u5b83\u53ef\u80fd\u4f1a\u66b4\u9732\u7ed9\u8d44\u6e90\u6240\u6709\u8005\u548c\u9a7b\u7559\u5728\u540c\u4e00\u8bbe\u5907\u4e0a\u7684\u5176\u4ed6\u5e94\u7528\u7a0b\u5e8f\u3002</p>"},{"location":"technology/rfc/oauth2/#_13","title":"\u6d41\u7a0b\u56fe","text":"<p>\u8be5\u6d41\u7a0b\u56fe\u5305\u542b\u5982\u4e0b\u6b65\u9aa4:</p> <p>\u539f\u6587:</p> <ul> <li>(A)  The client initiates the flow by directing the resource owner'suser-agent to the authorization endpoint.  The client includesits client identifier, requested scope, local state, and aredirection URI to which the authorization server will send theuser-agent back once access is granted (or denied).</li> <li>(B)  The authorization server authenticates the resource owner (viathe user-agent) and establishes whether the resource ownergrants or denies the client's access request.</li> <li>(C)  Assuming the resource owner grants access, the authorizationserver redirects the user-agent back to the client using theredirection URI provided earlier.  The redirection URI includesthe access token in the URI fragment.</li> <li>(D)  The user-agent follows the redirection instructions by making arequest to the web-hosted client resource (which does notinclude the fragment per RFC2616).  The user-agent retains thefragment information locally.</li> <li>(E)  The web-hosted client resource returns a web page (typically anHTML document with an embedded script) capable of accessing thefull redirection URI including the fragment retained by theuser-agent, and extracting the access token (and otherparameters) contained in the fragment.</li> <li>(F)  The user-agent executes the script provided by the web-hostedclient resource locally, which extracts the access token.</li> <li>(G)  The user-agent passes the access token to the client.</li> </ul> <p>\u7ffb\u8bd1:</p> <ul> <li>(A) \u5ba2\u6237\u7aef\u901a\u8fc7\u5c06\u8d44\u6e90\u6240\u6709\u8005\u7684\u7528\u6237\u4ee3\u7406\u5b9a\u5411\u5230\u6388\u6743\u7aef\u70b9\u6765\u542f\u52a8\u6d41\u7a0b\u3002 \u5ba2\u6237\u7aef\u5305\u62ec\u5176\u5ba2\u6237\u7aef\u6807\u8bc6\u7b26\u3001\u8bf7\u6c42\u7684\u8303\u56f4\u3001\u672c\u5730\u72b6\u6001\u4ee5\u53ca\u6388\u6743\u670d\u52a1\u5668\u5c06\u5728\u8bbf\u95ee\u88ab\u6388\u4e88\uff08\u6216\u62d2\u7edd\uff09\u540e\u5c06\u7528\u6237\u4ee3\u7406\u53d1\u9001\u56de\u7684\u65b9\u5411 URI\u3002</li> <li>(B) \u6388\u6743\u670d\u52a1\u5668\u9a8c\u8bc1\u8d44\u6e90\u6240\u6709\u8005\uff08\u901a\u8fc7\u7528\u6237\u4ee3\u7406\uff09\u5e76\u786e\u5b9a\u8d44\u6e90\u6240\u6709\u8005\u662f\u6388\u4e88\u8fd8\u662f\u62d2\u7edd\u5ba2\u6237\u7aef\u7684\u8bbf\u95ee\u8bf7\u6c42\u3002</li> <li>(C) \u5047\u8bbe\u8d44\u6e90\u6240\u6709\u8005\u6388\u4e88\u8bbf\u95ee\u6743\u9650\uff0c\u6388\u6743\u670d\u52a1\u5668\u4f7f\u7528\u4e4b\u524d\u63d0\u4f9b\u7684\u91cd\u5b9a\u5411 URI \u5c06\u7528\u6237\u4ee3\u7406\u91cd\u5b9a\u5411\u56de\u5ba2\u6237\u7aef\u3002 \u91cd\u5b9a\u5411 URI \u5305\u62ec URI \u7247\u6bb5\u4e2d\u7684\u8bbf\u95ee\u4ee4\u724c\u3002</li> <li>(D) \u7528\u6237\u4ee3\u7406\u901a\u8fc7\u5411 Web \u6258\u7ba1\u7684\u5ba2\u6237\u7aef\u8d44\u6e90\uff08\u4e0d\u5305\u62ec\u6bcf\u4e2a RFC2616 \u7684\u7247\u6bb5\uff09\u53d1\u51fa\u8bf7\u6c42\u6765\u9075\u5faa\u91cd\u5b9a\u5411\u6307\u4ee4\u3002 \u7528\u6237\u4ee3\u7406\u5728\u672c\u5730\u4fdd\u7559\u7247\u6bb5\u4fe1\u606f\u3002</li> <li>(E) <code>\u6388\u6743\u670d\u52a1\u5668</code>\u5bf9<code>\u5ba2\u6237\u7aef</code>\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u9a8c\u8bc1<code>\u6388\u6743\u7801</code>\uff0c\u5e76\u786e\u4fdd\u6536\u5230\u7684<code>\u91cd\u5b9a\u5411 URI</code> \u4e0e<code>\u6b65\u9aa4 (C)</code> \u4e2d\u7528\u4e8e<code>\u91cd\u5b9a\u5411\u5ba2\u6237\u7aef\u7684URI</code> \u5339\u914d\u3002 \u5982\u679c\u6709\u6548\uff0c<code>\u6388\u6743\u670d\u52a1\u5668</code>\u5c06\u4f7f\u7528\u8bbf\u95ee\u4ee4\u724c\u548c\u53ef\u9009\u7684<code>\u5237\u65b0\u4ee4\u724c</code>\u8fdb\u884c\u54cd\u5e94\u3002</li> <li>(F) \u7528\u6237\u4ee3\u7406\u5728\u672c\u5730\u6267\u884c\u7531 Web \u6258\u7ba1\u5ba2\u6237\u7aef\u8d44\u6e90\u63d0\u4f9b\u7684\u811a\u672c\uff0c\u8be5\u811a\u672c\u63d0\u53d6\u8bbf\u95ee\u4ee4\u724c\u3002</li> <li>(G) \u7528\u6237\u4ee3\u7406\u5c06\u8bbf\u95ee\u4ee4\u724c\u4f20\u9012\u7ed9\u5ba2\u6237\u7aef\u3002</li> </ul>"},{"location":"technology/rfc/oauth2/#_14","title":"\u6388\u6743\u8bf7\u6c42","text":"<p>\u539f\u6587\u53c2\u8003: RFC6749</p> <p>\u8bf7\u6c42\u793a\u4f8b:</p> <pre><code>GET /authorize?response_type=token&amp;client_id=s6BhdRkqt3&amp;state=xyz&amp;redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb HTTP/1.1\nHost: server.example.com\n</code></pre> <p>\u53c2\u6570:</p> \u540d\u79f0 \u5fc5\u987b \u63cf\u8ff0 response_type \u662f \u503c\u5fc5\u987b\u4e3a <code>token</code> client_id \u662f \u5ba2\u6237\u7aef\u6807\u8bc6, \u53c2\u8003: Client Identifier redirect_uri \u5426 \u91cd\u5b9a\u5411\u5730\u5740, \u53c2\u8003: Redirection Endpoint scope \u5426 \u8303\u56f4\u63cf\u8ff0, \u53c2\u8003: Access Token Scope state \u5426(\u63a8\u8350) \u5ba2\u6237\u7aef\u7528\u4e8e\u7ef4\u62a4\u8bf7\u6c42\u548c\u56de\u8c03\u4e4b\u95f4\u7684\u72b6\u6001\u7684\u4e0d\u900f\u660e\u503c\u3002 \u6388\u6743\u670d\u52a1\u5668\u5728\u5c06\u7528\u6237\u4ee3\u7406\u91cd\u5b9a\u5411\u56de\u5ba2\u6237\u7aef\u65f6\u5305\u542b\u6b64\u503c\u3002 \u8be5\u53c2\u6570\u5e94\u8be5\u7528\u4e8e\u9632\u6b62\u8de8\u7ad9\u70b9\u8bf7\u6c42\u4f2a\u9020\uff0c\u53c2\u8003: Cross-Site Request Forgery"},{"location":"technology/rfc/oauth2/#_15","title":"\u8bf7\u6c42\u4ee4\u724c\u54cd\u5e94","text":"<p>\u539f\u6587\u53c2\u8003: RFC6749 - 4.2.2</p> <p>\u8bf7\u6c42\u793a\u4f8b:</p> <pre><code>GET /authorize?response_type=token&amp;client_id=s6BhdRkqt3&amp;state=xyz&amp;redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb HTTP/1.1\nHost: server.example.com\n</code></pre> <p>\u53c2\u6570:</p> \u540d\u79f0 \u5fc5\u987b \u63cf\u8ff0 access_token \u662f \u6388\u6743\u670d\u52a1\u5668\u9881\u53d1\u7684\u8bbf\u95ee\u4ee4\u724c\u3002 token_type \u662f \u53d1\u884c\u7684\u4ee4\u724c\u7c7b\u578b\uff0c\u503c\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u3002 \u53c2\u8003: Client Identifier expires_in \u53ef\u9009(\u63a8\u8350\u8fd4\u56de) \u8bbf\u95ee\u4ee4\u724c\u7684\u751f\u547d\u5468\u671f\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 \u4f8b\u5982\uff0c\u503c\u201c3600\u201d\u8868\u793a\u8bbf\u95ee\u4ee4\u724c\u5c06\u5728\u54cd\u5e94\u751f\u6210\u540e\u7684\u4e00\u5c0f\u65f6\u5185\u5230\u671f\u3002 \u5982\u679c\u7701\u7565\uff0c\u6388\u6743\u670d\u52a1\u5668\u5e94\u8be5\u901a\u8fc7\u5176\u4ed6\u65b9\u5f0f\u63d0\u4f9b\u8fc7\u671f\u65f6\u95f4\u6216\u8bb0\u5f55\u9ed8\u8ba4\u503c\u3002 scope \u53ef\u9009 \u5982\u679c\u4e0e\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u8303\u56f4\u76f8\u540c\uff0c\u5219\u5fc5\u987b\u8fd4\u56de\u3002 \u53c2\u8003: Access Token Scope state \u662f(\u63a8\u8350) \u5982\u679c\u5ba2\u6237\u7aef\u6388\u6743\u8bf7\u6c42\u4e2d\u5b58\u5728\u201c\u72b6\u6001\u201d\u53c2\u6570\u3002 \u4ece\u5ba2\u6237\u7aef\u6536\u5230\u7684\u786e\u5207\u503c\u3002 <p>\u6388\u6743\u670d\u52a1\u5668\u4e0d\u5f97\u53d1\u51fa\u5237\u65b0\u4ee4\u724c\u3002</p>"},{"location":"technology/rfc/oauth2/#_16","title":"\u9519\u8bef\u54cd\u5e94","text":"<p>\u539f\u6587\u53c2\u8003: RFC6749 - 4.2.2.1</p> <p>\u54cd\u5e94\u793a\u4f8b:</p> <pre><code>HTTP/1.1 302 Found\nLocation: https://client.example.com/cb#error=access_denied&amp;state=xyz\n</code></pre> <p>\u54cd\u5e94\u4f53\u5305\u542b:</p> \u540d\u79f0 \u5fc5\u987b \u63cf\u8ff0 error \u662f \u4e00\u4e2a\u5355\u72ec\u7684 ASCII\u7f16\u7801\u7684\u9519\u8bef\u7801\uff0c\u53ef\u9009\u503c: <code>invalid_request</code> \u3001<code>unauthorized_client</code> \u3001<code>access_denied</code> \u3001<code>unsupported_response_type</code> \u3001<code>invalid_scope</code> \u3001<code>server_error</code> \u3001<code>temporarily_unavailable</code> error_description \u53ef\u9009 \u53ef\u8bfb\u7684\u9519\u8bef\u63cf\u8ff0\uff0c\u7528\u4e8e\u534f\u52a9\u5ba2\u6237\u7aef\u5f00\u53d1\u4eba\u5458\u4e86\u89e3\u53d1\u751f\u7684\u9519\u8bef\u3002 error_uri \u53ef\u9009 \u53ef\u8bfb\u7684\u7f51\u9875\u9519\u8bef\u8be6\u7ec6\u63cf\u8ff0\uff0c\u7528\u4e8e\u5411\u5ba2\u6237\u7aef\u63d0\u4f9b\u5f00\u53d1\u4eba\u5458\u63d0\u4f9b\u6709\u5173\u9519\u8bef\u7684\u5176\u4ed6\u4fe1\u606f\u3002 state \u53ef\u9009 \u5982\u679c\u5ba2\u6237\u7aef\u8bf7\u6c42\u5b58\u5728<code>state</code>\u53c2\u6570\uff0c\u5e76\u4e14\u88ab\u670d\u52a1\u5668\u6536\u5230\u3002"},{"location":"technology/rfc/oauth2/#_17","title":"\u7b2c\u4e09\u65b9\u793a\u4f8b","text":"<p>http://www.ruanyifeng.com/blog/2019/04/github-oauth.html</p>"},{"location":"technology/rfc/oauth2/#oauth-20","title":"\u7406\u89e3oauth 2.0","text":"<p>https://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html</p>"},{"location":"technology/security/sqlmap/","title":"sqlmap \u6570\u636e\u5e93\u6ce8\u5165\u68c0\u6d4b","text":"<ul> <li>\u521b\u5efa\u65f6\u95f4: 2022\u5e7408\u670803\u65e512:08:35</li> <li>github: https://github.com/sqlmapproject/sqlmap</li> <li>\u539f\u6587: https://github.com/sqlmapproject/sqlmap/blob/master/README.md</li> <li>\u4e2d\u6587\u7ffb\u8bd1: https://github.com/sqlmapproject/sqlmap/blob/master/doc/translations/README-zh-CN.md</li> </ul>"},{"location":"technology/security/sqlmap/#_1","title":"\u7b80\u4ecb","text":"<p>sqlmap \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u6e17\u900f\u6d4b\u8bd5\u5de5\u5177\uff0c\u53ef\u4ee5\u7528\u6765\u81ea\u52a8\u5316\u7684\u68c0\u6d4b\uff0c\u5229\u7528SQL\u6ce8\u5165\u6f0f\u6d1e\uff0c\u83b7\u53d6\u6570\u636e\u5e93\u670d\u52a1\u5668\u7684\u6743\u9650\u3002\u5b83\u5177\u6709\u529f\u80fd\u5f3a\u5927\u7684\u68c0\u6d4b\u5f15\u64ce,\u9488\u5bf9\u5404\u79cd\u4e0d\u540c\u7c7b\u578b\u6570\u636e\u5e93\u7684\u6e17\u900f\u6d4b\u8bd5\u7684\u529f\u80fd\u9009\u9879\uff0c\u5305\u62ec\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5b58\u50a8\u7684\u6570\u636e\uff0c\u8bbf\u95ee\u64cd\u4f5c\u7cfb\u7edf\u6587\u4ef6\u751a\u81f3\u53ef\u4ee5\u901a\u8fc7\u5e26\u5916\u6570\u636e\u8fde\u63a5\u7684\u65b9\u5f0f\u6267\u884c\u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4\u3002</p>"},{"location":"technology/security/sqlmap/#_2","title":"\u6f14\u793a\u622a\u56fe","text":"<p>\u4f60\u53ef\u4ee5\u8bbf\u95ee wiki\u4e0a\u7684 \u622a\u56fe \u67e5\u770b\u5404\u79cd\u7528\u6cd5\u7684\u6f14\u793a</p>"},{"location":"technology/security/sqlmap/#_3","title":"\u5b89\u88c5\u65b9\u6cd5","text":"<p>\u4f60\u53ef\u4ee5\u70b9\u51fb \u8fd9\u91cc \u4e0b\u8f7d\u6700\u65b0\u7684 tar \u6253\u5305\u7684\u6e90\u4ee3\u7801 \u6216\u8005\u70b9\u51fb\u8fd9\u91cc\u4e0b\u8f7d\u6700\u65b0\u7684 zip \u6253\u5305\u7684\u6e90\u4ee3\u7801.</p> <p>\u63a8\u8350\u4f60\u4ece Git \u4ed3\u5e93\u83b7\u53d6\u6700\u65b0\u7684\u6e90\u4ee3\u7801:</p> <pre><code>git clone --depth 1 https://github.com/sqlmapproject/sqlmap.git sqlmap-dev\n</code></pre> <p>sqlmap \u53ef\u4ee5\u8fd0\u884c\u5728 Python 2.6, 2.7 \u548c 3.x \u7248\u672c\u7684\u4efb\u4f55\u5e73\u53f0\u4e0a</p>"},{"location":"technology/security/sqlmap/#_4","title":"\u4f7f\u7528\u65b9\u6cd5","text":"<p>\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u57fa\u672c\u7684\u7528\u6cd5\u53ca\u547d\u4ee4\u884c\u53c2\u6570:</p> <pre><code>python sqlmap.py -h\n</code></pre> <p>\u901a\u8fc7\u5982\u4e0b\u7684\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u6240\u6709\u7684\u7528\u6cd5\u53ca\u547d\u4ee4\u884c\u53c2\u6570:</p> <pre><code>python sqlmap.py -hh\n</code></pre> <p>\u4f60\u53ef\u4ee5\u4ece \u8fd9\u91cc \u770b\u5230\u4e00\u4e2asqlmap \u7684\u4f7f\u7528\u6837\u4f8b\u3002\u9664\u6b64\u4ee5\u5916\uff0c\u4f60\u8fd8\u53ef\u4ee5\u67e5\u770b \u4f7f\u7528\u624b\u518c\u3002\u83b7\u53d6sqlmap\u6240\u6709\u652f\u6301\u7684\u7279\u6027\u3001\u53c2\u6570\u3001\u547d\u4ee4\u884c\u9009\u9879\u5f00\u5173\u53ca\u8bf4\u660e\u7684\u4f7f\u7528\u5e2e\u52a9\u3002</p>"},{"location":"technology/security/sqlmap/#_5","title":"\u94fe\u63a5","text":"<ul> <li>\u9879\u76ee\u4e3b\u9875: https://sqlmap.org</li> <li>\u6e90\u4ee3\u7801\u4e0b\u8f7d: .tar.gz or .zip</li> <li>RSS \u8ba2\u9605: https://github.com/sqlmapproject/sqlmap/commits/master.atom</li> <li>Issue tracker: https://github.com/sqlmapproject/sqlmap/issues</li> <li>\u4f7f\u7528\u624b\u518c: https://github.com/sqlmapproject/sqlmap/wiki</li> <li>\u5e38\u89c1\u95ee\u9898 (FAQ): https://github.com/sqlmapproject/sqlmap/wiki/FAQ</li> <li>Twitter: @sqlmap</li> <li>\u6559\u7a0b: https://www.youtube.com/user/inquisb/videos</li> <li>\u622a\u56fe: https://github.com/sqlmapproject/sqlmap/wiki/Screenshots</li> </ul>"},{"location":"technology/security/sqlmap/#rest-api","title":"rest API","text":"<p>\u53c2\u8003: https://github.com/sqlmapproject/sqlmap/wiki/Usage#api-rest-json</p> <p>\u4e2d\u6587\u6587\u6863: https://sqlmap.kvko.live/usage/api</p> <p>\u4ee5\u53ca\u6e90\u7801: https://github.com/sqlmapproject/sqlmap/blob/master/sqlmapapi.py</p> <p>\u4ee5\u53caAPIyaml: https://github.com/sqlmapproject/sqlmap/blob/master/sqlmapapi.yaml</p> <p>yaml\u6e90\u6587\u4ef6\u5730\u5740: https://raw.githubusercontent.com/sqlmapproject/sqlmap/master/sqlmapapi.yaml</p> <p>\u4f7f\u7528swagger UI \u67e5\u770bapi\u6587\u6863\uff0c\u6253\u5f00: https://petstore.swagger.io/ \u7136\u540e\u5728\u5730\u5740\u680f\u4e2d\u8f93\u5165 yaml \u6e90\u6587\u4ef6\u5730\u5740\u5373\u53ef\u67e5\u770b\u6587\u6863\u7684UI\u8be6\u60c5</p> <p>\u53ef\u4f7f\u7528 https://www.convertjson.com/yaml-to-json.htm yaml \u8f6c json, \u5c06yaml\u683c\u5f0f\u7684api\u8f6c\u5316\u4e3aJson\u683c\u5f0f\u3002</p>"},{"location":"technology/security/thc-hydra/","title":"Hydra \u4e5d\u5934\u86c7","text":"<ul> <li>\u521b\u5efa\u65f6\u95f4: 2022\u5e7408\u670803\u65e512:08:35</li> <li>github: https://github.com/vanhauser-thc/thc-hydra</li> <li>\u539f\u6587: https://github.com/vanhauser-thc/thc-hydra/blob/master/README</li> </ul> <pre><code>                                H Y D R A\n\n                      (c) 2001-2022 by van Hauser / THC\n             &lt;vh@thc.org&gt; https://github.com/vanhauser-thc/thc-hydra\n       many modules were written by David (dot) Maciejak @ gmail (dot) com\n                 BFG code by Jan Dlabal &lt;dlabaljan@gmail.com&gt;\n\n        Licensed under AGPLv3 (see LICENSE file)\n\n           Please do not use in military or secret service organizations,\n                          or for illegal purposes.\n      (This is the wish of the author and non-binding. Many people working\n       in these organizations do not care for laws and ethics anyways.\n            You are not one of the \"good\" ones if you ignore this.)\n\n           note: no this is not meant to be a markdown doc! old school!\n</code></pre> <p>\u53ef\u4ee5\u901a\u8fc7docker\u76f4\u63a5\u4e0b\u8f7d\u6700\u65b0github\u72b6\u6001\u7684Hydra\uff1a</p> <pre><code>docker pull vanhauser/hydra\n</code></pre>"},{"location":"technology/security/thc-hydra/#_1","title":"\u7b80\u4ecb","text":"<p>\u6b63\u5982\u6bcf\u9879\u5bc6\u7801\u5b89\u5168\u7814\u7a76\u6240\u663e\u793a\u7684\u90a3\u6837\uff0c\u6700\u5927\u7684\u5b89\u5168\u6f0f\u6d1e\u4e4b\u4e00\u662f\u5bc6\u7801\u3002</p> <p>\u8fd9\u4e2a\u5de5\u5177\u662f\u4e00\u4e2a\u6982\u5ff5\u9a8c\u8bc1\u4ee3\u7801\uff0c\u8ba9\u7814\u7a76\u4eba\u5458\u548c\u5b89\u5168\u987e\u95ee\u6709\u53ef\u80fd\u5c55\u793a\u4ece\u8fdc\u7a0b\u7cfb\u7edf\u83b7\u5f97\u672a\u7ecf\u6388\u6743\u7684\u8bbf\u95ee\u662f\u591a\u4e48\u5bb9\u6613\u3002</p> <p>\u6b64\u5de5\u5177\u4ec5\u7528\u4e8e\u6cd5\u5f8b\u76ee\u7684\uff01</p> <p>\u5df2\u7ecf\u6709\u51e0\u79cd\u767b\u5f55\u9ed1\u5ba2\u5de5\u5177\u53ef\u7528\uff0c\u4f46\u662f\uff0c\u6ca1\u6709\u4e00\u79cd\u5de5\u5177\u65e2\u4e0d\u652f\u6301\u4e00\u79cd\u4ee5\u4e0a\u7684\u653b\u51fb\u534f\u8bae\uff0c\u4e5f\u4e0d\u652f\u6301\u5e76\u884c\u8fde\u63a5\u3002</p> <p>\u5b83\u7ecf\u8fc7\u6d4b\u8bd5\u53ef\u4ee5\u5728 Linux\u3001Windows/Cygwin\u3001Solaris\u3001FreeBSD/OpenBSD\u3001QNX (Blackberry 10) \u548c MacOS \u4e0a\u8fdb\u884c\u672c\u5730\u7f16\u8bd1\u3002</p> <p>\u76ee\u524d\u8be5\u5de5\u5177\u652f\u6301\u4ee5\u4e0b\u534f\u8bae\uff1a</p> <p>Asterisk, AFP, Cisco AAA, Cisco auth, Cisco enable, CVS, Firebird, FTP, HTTP-FORM-GET, HTTP-FORM-POST, HTTP-GET, HTTP-HEAD, HTTP-POST, HTTP-PROXY, HTTPS-FORM-GET, HTTPS-FORM-POST, HTTPS-GET, HTTPS-HEAD, HTTPS-POST, HTTP-Proxy, ICQ, IMAP, IRC, LDAP, MEMCACHED, MONGODB, MS-SQL, MYSQL, NCP, NNTP, Oracle Listener, Oracle SID, Oracle, PC-Anywhere, PCNFS, POP3, POSTGRES, Radmin, RDP, Rexec, Rlogin, Rsh, RTSP, SAP/R3, SIP, SMB, SMTP, SMTP Enum, SNMP v1+v2+v3, SOCKS5, SSH (v1 and v2), SSHKEY, Subversion, Teamspeak (TS2), Telnet, VMware-Auth, VNC and XMPP.</p> <p>\u4f46\u662f\uff0c\u65b0\u670d\u52a1\u7684\u6a21\u5757\u5f15\u64ce\u975e\u5e38\u7b80\u5355\uff0c\u56e0\u6b64\u5728\u652f\u6301\u66f4\u591a\u670d\u52a1\u4e4b\u524d\u4e0d\u4f1a\u82b1\u8d39\u5f88\u957f\u65f6\u95f4\u3002 \u975e\u5e38\u611f\u8c22\u60a8\u5728\u7f16\u5199\u3001\u589e\u5f3a\u6216\u4fee\u590d\u6a21\u5757\u65b9\u9762\u7684\u5e2e\u52a9\uff01\uff01 :-)</p>"},{"location":"technology/security/thc-hydra/#_2","title":"\u4ece\u54ea\u513f\u83b7\u53d6","text":"<p>\u60a8\u59cb\u7ec8\u53ef\u4ee5\u5728https://github.com/vanhauser-thc/thc-hydra/releases\u7684\u9879\u76ee\u9875\u9762\u4e0a\u627e\u5230 hydra \u7684\u6700\u65b0\u53d1\u5e03/\u751f\u4ea7\u7248\u672c</p> <p>\u5982\u679c\u60a8\u5bf9\u5f53\u524d\u7684\u5f00\u53d1\u72b6\u6001\u611f\u5174\u8da3\uff0c\u516c\u5171\u5f00\u53d1\u5b58\u50a8\u5e93\u4f4d\u4e8e Github\uff1a</p> <p><code>svn co https://github.com/vanhauser-thc/thc-hydra</code></p> <p>\u6216\u8005</p> <p><code>git clone https://github.com/vanhauser-thc/thc-hydra</code></p> <p>\u4f7f\u7528\u5f00\u53d1\u7248\u672c\u9700\u8981\u60a8\u81ea\u62c5\u98ce\u9669\u3002 \u5b83\u5305\u542b\u65b0\u529f\u80fd\u548c\u65b0\u9519\u8bef\u3002 \u4e8b\u60c5\u53ef\u80fd\u884c\u4e0d\u901a\uff01</p> <p>\u6216\u8005\uff08\u4e5f\u66f4\u5bb9\u6613\uff09\u53ef\u4ee5\u5c06\u5176\u4f5c\u4e3a docker \u5bb9\u5668\u62c9\u53d6\uff1a</p> <pre><code>docker pull vanhauser/hydra\n</code></pre>"},{"location":"technology/security/thc-hydra/#_3","title":"\u5982\u4f55\u7f16\u8bd1","text":"<p>\u8981\u914d\u7f6e\u3001\u7f16\u8bd1\u548c\u5b89\u88c5 hydra\uff0c\u53ea\u9700\u8f93\u5165\uff1a</p> <pre><code>./configure\nmake\nmake install\n</code></pre> <p>\u5982\u679c\u4f60\u60f3\u8981 ssh \u6a21\u5757\uff0c\u4f60\u5fc5\u987b\u5728\u4f60\u7684\u7cfb\u7edf\u4e0a\u8bbe\u7f6e libssh\uff08\u4e0d\u662f libssh2\uff01\uff09\uff0c\u4ece https://www.libssh.org \u83b7\u53d6\u5b83\uff0c\u5bf9\u4e8e ssh v1 \u652f\u6301\uff0c\u4f60\u8fd8\u9700\u8981\u5728 cmake \u547d\u4ee4\u884c\u4e2d\u7684\u9009\u9879\u4e2d\u6dfb\u52a0\u201c-DWITH_SSH1=On \" \u3002</p> <p>\u91cd\u8981: \u5982\u679c\u4f60\u5728 MacOS \u4e0a\u7f16\u8bd1\uff0c\u90a3\u4e48\u4f60\u5fc5\u987b\u8fd9\u6837\u505a\u2014\u2014\u4e0d\u8981\u901a\u8fc7 brew \u5b89\u88c5 libssh\uff01</p> <p>\u5982\u679c\u60a8\u4f7f\u7528 Ubuntu/Debian\uff0c\u8fd9\u5c06\u5b89\u88c5\u4e00\u4e9b\u53ef\u9009\u6a21\u5757\u6240\u9700\u7684\u8865\u5145\u5e93\uff08\u8bf7\u6ce8\u610f\uff0c\u6709\u4e9b\u53ef\u80fd\u5728\u60a8\u7684\u53d1\u884c\u7248\u4e2d\u4e0d\u53ef\u7528\uff09\uff1a</p> <pre><code>apt-get install libssl-dev libssh-dev libidn11-dev libpcre3-dev \\\nlibgtk2.0-dev libmysqlclient-dev libpq-dev libsvn-dev \\\nfirebird-dev libmemcached-dev libgpg-error-dev \\\nlibgcrypt11-dev libgcrypt20-dev\n</code></pre> <p>\u8fd9\u5c06\u542f\u7528\u9664 Oracle\u3001SAP R/3\u3001NCP \u548c\u82f9\u679c\u5f52\u6863\u534f\u8bae\u4e4b\u5916\u7684\u6240\u6709\u53ef\u9009\u6a21\u5757\u548c\u529f\u80fd - \u60a8\u9700\u8981\u4ece\u4f9b\u5e94\u5546\u7684\u7f51\u7ad9\u4e0b\u8f7d\u548c\u5b89\u88c5\u5b83\u4eec\u3002</p> <p>\u5bf9\u4e8e\u6240\u6709\u5176\u4ed6 Linux \u884d\u751f\u4ea7\u54c1\u548c\u57fa\u4e8e BSD \u7684\u7cfb\u7edf\uff0c\u8bf7\u4f7f\u7528\u7cfb\u7edf\u8f6f\u4ef6\u5b89\u88c5\u7a0b\u5e8f\u5e76\u67e5\u627e\u4e0e\u4e0a\u8ff0\u547d\u4ee4\u7c7b\u4f3c\u7684\u540d\u79f0\u5e93\u3002 \u5728\u6240\u6709\u5176\u4ed6\u60c5\u51b5\u4e0b\uff0c\u60a8\u5fc5\u987b\u4e0b\u8f7d\u6240\u6709\u6e90\u5e93\u5e76\u624b\u52a8\u7f16\u8bd1\u5b83\u4eec\u3002</p>"},{"location":"technology/security/thc-hydra/#_4","title":"\u652f\u6301\u7684\u5e73\u53f0","text":"<ul> <li>\u6240\u6709 UNIX \u5e73\u53f0 (Linux, *BSD, Solaris, etc.)</li> <li>MacOS (\u57fa\u672c\u4e0a\u662f\u4e00\u4e2a BSD \u514b\u9686)</li> <li>\u5e26\u6709 Cygwin \u7684 Windows\uff08IPv4 \u548c IPv6\uff09</li> <li>\u57fa\u4e8e Linux\u3001MacOS \u6216 QNX \u7684\u79fb\u52a8\u7cfb\u7edf\uff08\u4f8b\u5982 Android\u3001iPhone\u3001Blackberry 10\u3001Zaurus\u3001iPaq\uff09</li> </ul>"},{"location":"technology/security/thc-hydra/#_5","title":"\u5982\u4f55\u4f7f\u7528","text":"<p>\u5982\u679c\u60a8\u53ea\u8f93\u5165 <code>hydra</code>\uff0c\u60a8\u5c06\u770b\u5230\u53ef\u7528\u91cd\u8981\u9009\u9879\u7684\u7b80\u77ed\u6458\u8981\u3002</p> <p>\u952e\u5165 <code>./hydra -h</code> \u4ee5\u67e5\u770b\u6240\u6709\u53ef\u7528\u7684\u547d\u4ee4\u884c\u9009\u9879\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c\u4e0d\u5305\u542b\u767b\u5f55\u540d/\u5bc6\u7801\u6587\u4ef6\u3002 \u5de5\u5177\u4f1a\u81ea\u5df1\u751f\u6210\u5b83\u4eec\u3002</p> <p>\u4f46\u662f\u5b58\u5728\u9ed8\u8ba4\u5bc6\u7801\u5217\u8868\uff0c\u8bf7\u4f7f\u7528\u201cdpl4hydra.sh\u201d\u751f\u6210\u5217\u8868\u3002</p> <p>\u5bf9\u4e8e Linux \u7528\u6237\uff0c\u53ef\u4ee5\u4f7f\u7528 GTK GUI\uff0c\u8bd5\u8bd5 <code>./xhydra</code></p> <p>\u5bf9\u4e8e\u547d\u4ee4\u884c\u7528\u6cd5\uff0c\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>\u5bf9\u4e8e\u653b\u51fb\u4e00\u4e2a\u76ee\u6807\u6216\u7f51\u7edc\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u65b0\u7684 \"://\" \u6837\u5f0f\uff1a\n\n`hydra [some command line options] PROTOCOL://TARGET:PORT/MODULE-OPTIONS`\n\n\u65e7\u6a21\u5f0f\u4e5f\u53ef\u4ee5\u7528\u4e8e\u8fd9\u4e9b\uff0c\u6b64\u5916\uff0c\u5982\u679c\u60a8\u60f3\u4ece\u6587\u672c\u6587\u4ef6\u4e2d\u6307\u5b9a\u76ee\u6807\uff0c\u60a8 *\u5fc5\u987b* \u4f7f\u7528\u8fd9\u4e2a\uff1a\n\n`hydra [some command line options] [-s PORT] TARGET PROTOCOL [MODULE-OPTIONS]`\n</code></pre> <p>\u901a\u8fc7\u547d\u4ee4\u884c\u9009\u9879\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u8981\u5c1d\u8bd5\u7684\u767b\u5f55\u540d\u3001\u5bc6\u7801\u3001\u662f\u5426\u5e94\u4f7f\u7528 SSL\u3001\u7528\u4e8e\u653b\u51fb\u7684\u5e76\u884c\u4efb\u52a1\u6570\u91cf\u7b49\u3002</p> <p>PROTOCOL \u662f\u60a8\u8981\u7528\u4e8e\u653b\u51fb\u7684\u534f\u8bae\uff0c\u4f8b\u5982 ftp\u3001smtp\u3001http-get \u6216\u8bb8\u591a\u5176\u4ed6\u53ef\u7528 TARGET \u662f\u60a8\u8981\u653b\u51fb\u7684\u76ee\u6807 MODULE-OPTIONS \u662f\u53ef\u9009\u503c\uff0c\u6bcf\u4e2a PROTOCOL \u6a21\u5757\u90fd\u662f\u7279\u6b8a\u7684</p> <p>\u7b2c\u4e00\u6b65 - \u9009\u62e9\u4f60\u7684\u76ee\u6807\u4f60\u6709\u4e09\u4e2a\u9009\u9879\u6765\u6307\u5b9a\u4f60\u60f3\u8981\u653b\u51fb\u7684\u76ee\u6807\uff1a</p> <ol> <li>\u547d\u4ee4\u884c\u4e0a\u7684\u5355\u4e2a\u76ee\u6807\uff1a\u53ea\u9700\u5c06 IP \u6216 DNS \u5730\u5740\u8f93\u5165</li> <li>\u547d\u4ee4\u884c\u4e0a\u7684\u7f51\u7edc\u8303\u56f4\uff1aCIDR \u89c4\u8303\uff0c\u5982\u201c192.168.0.0/24\u201d</li> <li>\u6587\u672c\u6587\u4ef6\u4e2d\u7684\u4e3b\u673a\u5217\u8868\uff1a\u6bcf\u4e2a\u6761\u76ee\u4e00\u884c\uff08\u89c1\u4e0b\u6587\uff09</li> </ol> <p>\u7b2c\u4e8c\u6b65 - \u9009\u62e9\u60a8\u7684\u534f\u8bae</p> <p>\u5c3d\u91cf\u907f\u514d\u4f7f\u7528 telnet\uff0c\u56e0\u4e3a\u68c0\u6d4b\u6b63\u786e\u6216\u9519\u8bef\u7684\u767b\u5f55\u5c1d\u8bd5\u662f\u4e0d\u53ef\u9760\u7684\u3002</p> <p>\u4f7f\u7528\u7aef\u53e3\u626b\u63cf\u5668\u67e5\u770b\u76ee\u6807\u4e0a\u542f\u7528\u4e86\u54ea\u4e9b\u534f\u8bae\u3002</p> <p>\u7b2c\u4e09\u6b65 - \u68c0\u67e5\u6a21\u5757\u662f\u5426\u6709\u53ef\u9009\u53c2\u6570</p> <p><code>hydra -U PROTOCOL</code></p> <p>\u4f8b\u5982: <code>hydra -U smtp</code></p> <p>\u7b2c\u56db\u6b65 - \u76ee\u6807\u7aef\u53e3</p> <p>\u8fd9\u662f\u53ef\u9009\u7684\uff0c\u5982\u679c\u6ca1\u6709\u63d0\u4f9b\u7aef\u53e3\uff0c\u5219\u4f7f\u7528\u534f\u8bae\u7684\u9ed8\u8ba4\u516c\u5171\u7aef\u53e3\u3002</p> <p>\u5982\u679c\u60a8\u6307\u5b9a\u4f7f\u7528 SSL\uff08\u201c-S\u201d\u9009\u9879\uff09\uff0c\u5219\u9ed8\u8ba4\u4f7f\u7528 SSL \u516c\u5171\u7aef\u53e3\u3002</p> <p>\u5982\u679c\u4f7f\u7528 \u201c://\u201d \u8868\u793a\u6cd5\uff0c\u5982\u679c\u8981\u63d0\u4f9b IPv6 \u5730\u5740\u6216 CIDR\uff08\u201c192.168.0.0/24\u201d\uff09\u8868\u793a\u6cd5\u8fdb\u884c\u653b\u51fb\uff0c\u5219\u5fc5\u987b\u4f7f\u7528\u201c[\u201d \u548c \u201c]\u201d\u62ec\u53f7\uff1a</p> <pre><code>  hydra [some command line options] &lt;ftp://[192.168.0.0/24&gt;]/\n  hydra [some command line options] -6 smtps://[2001:db8::1]/NTLM\n</code></pre> <p>\u8bf7\u6ce8\u610f\uff0chydra \u6240\u505a\u7684\u4e00\u5207\u90fd\u53ea\u662f IPv4\uff01</p> <p>\u5982\u679c\u8981\u653b\u51fb IPv6 \u5730\u5740\uff0c\u5fc5\u987b\u6dfb\u52a0\u201c-6\u201d\u547d\u4ee4\u884c\u9009\u9879\u3002</p> <p>\u90a3\u4e48\u6240\u6709\u7684\u653b\u51fb\u90fd\u53ea\u662f IPv6\uff01</p> <p>\u5982\u679c\u60a8\u60f3\u901a\u8fc7\u6587\u672c\u6587\u4ef6\u63d0\u4f9b\u76ee\u6807\uff0c\u5219\u4e0d\u80fd\u4f7f\u7528 :// \u7b26\u53f7\uff0c\u800c\u662f\u4f7f\u7528\u65e7\u6837\u5f0f\u5e76\u4ec5\u63d0\u4f9b\u534f\u8bae\uff08\u548c\u6a21\u5757\u9009\u9879\uff09\uff1a</p> <p><code>hydra [some command line options] -M targets.txt ftp</code></p> <p>\u60a8\u8fd8\u53ef\u4ee5\u901a\u8fc7\u5728\u6587\u4ef6\u4e2d\u7684\u76ee\u6807\u6761\u76ee\u540e\u6dfb\u52a0 <code>:&lt;port&gt;</code> \u6765\u4e3a\u6bcf\u4e2a\u76ee\u6807\u6761\u76ee\u63d0\u4f9b\u7aef\u53e3\uff0c\u4f8b\u5982\uff1a</p> <pre><code>foo.bar.com\ntarget.com:21\nunusual.port.com:2121\ndefault.used.here.com\n127.0.0.1\n127.0.0.1:2121\n</code></pre> <p>\u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u8981\u9644\u52a0 IPv6 \u76ee\u6807\uff0c\u5219\u5fc5\u987b\u63d0\u4f9b -6 \u9009\u9879\u5e76\u4e14 \u5fc5\u987b \u5c06 IPv6 \u5730\u5740\u653e\u5728\u6587\u4ef6\u4e2d\u7684\u4e2d\u62ec\u53f7\u4e2d\uff01\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>foo.bar.com\ntarget.com:21\n[fe80::1%eth0]\n[2001::1]\n[2002::2]:8080\n[2a01:24a:133:0:00:123:ff:1a]\n</code></pre>"},{"location":"technology/security/thc-hydra/#_6","title":"\u767b\u5f55\u548c\u5bc6\u7801","text":"<p>\u5bf9\u4e8e\u5982\u4f55\u4f7f\u7528\u767b\u5f55\u540d\u548c\u5bc6\u7801\u8fdb\u884c\u653b\u51fb\uff0c\u60a8\u6709\u5f88\u591a\u9009\u62e9\u4f7f\u7528 -l \u767b\u5f55\u540d\u548c -p \u5bc6\u7801\uff0c\u60a8\u544a\u8bc9 hydra \u8fd9\u662f\u552f\u4e00\u53ef\u4ee5\u5c1d\u8bd5\u7684\u767b\u5f55\u540d\u548c/\u6216\u5bc6\u7801\u3002</p> <p>\u4f7f\u7528 -L \u767b\u5f55\u540d \u548c -P \u5bc6\u7801\uff0c\u60a8\u53ef\u4ee5\u4e3a\u6587\u672c\u6587\u4ef6\u63d0\u4f9b\u6761\u76ee\u3002 \u4f8b\u5982\u3002\uff1a</p> <pre><code>hydra -l admin -p password ftp://localhost/\nhydra -L default_logins.txt -p test ftp://localhost/\nhydra -l admin -P common_passwords.txt ftp://localhost/\nhydra -L logins.txt -P passwords.txt ftp://localhost/\n</code></pre> <p>\u6b64\u5916\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7 \u201c-e\u201d \u9009\u9879\u5c1d\u8bd5\u57fa\u4e8e\u767b\u5f55\u7684\u5bc6\u7801\u3002</p> <p>\u201c-e\u201d \u9009\u9879\u6709\u4e09\u4e2a\u53c2\u6570\uff1a</p> <pre><code>s - \u5c1d\u8bd5\u4f7f\u7528\u5bc6\u7801\u767b\u5f55\nn - \u5c1d\u8bd5\u7a7a\u5bc6\u7801\nr - \u53cd\u8f6c\u767b\u5f55\u5e76\u5c1d\u8bd5\u5c06\u5176\u4f5c\u4e3a\u5bc6\u7801\n</code></pre> <p>\u5982\u679c\u4f60\u60f3\uff0c\u4f8b\u5982 \u5c1d\u8bd5\u201c\u5c1d\u8bd5\u4f7f\u7528\u5bc6\u7801\u767b\u5f55\u201d\u548c\u201c\u7a7a\u5bc6\u7801\u201d\uff0c\u5728\u547d\u4ee4\u884c\u4e2d\u6307\u5b9a\u201c-e sn\u201d\u3002</p> <p>\u4f46\u9664\u4e86 -p/-P \u4e4b\u5916\uff0c\u8fd8\u6709\u4e24\u79cd\u5c1d\u8bd5\u5bc6\u7801\u7684\u6a21\u5f0f\uff1a</p> <p>\u60a8\u53ef\u4ee5\u4f7f\u7528\u6587\u672c\u6587\u4ef6\uff0c\u5176\u4e2d\u767b\u5f55\u540d\u548c\u5bc6\u7801\u5bf9\u7531\u5192\u53f7\u5206\u9694\uff0c\u4f8b\u5982\uff1a</p> <pre><code>admin:password\ntest:test\nfoo:bar\n</code></pre> <p>\u8fd9\u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u9ed8\u8ba4\u5e10\u6237\u6837\u5f0f\u5217\u8868\uff0c\u5b83\u4e5f\u662f\u7531 hydra \u63d0\u4f9b\u7684 dpl4hydra.sh \u9ed8\u8ba4\u5e10\u6237\u6587\u4ef6\u751f\u6210\u5668\u751f\u6210\u7684\u3002</p> <p>\u60a8\u53ef\u4ee5\u4f7f\u7528\u5e26\u6709 -C \u9009\u9879\u7684\u6587\u672c\u6587\u4ef6 - \u8bf7\u6ce8\u610f\uff0c\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0c\u60a8\u4e0d\u80fd\u4f7f\u7528 -l/-L/-p/-P \u9009\u9879\uff08\u4f46\u53ef\u4ee5\u4f7f\u7528 -e nsr\uff09\u3002 \u4f8b\u5b50\uff1a</p> <pre><code>hydra -C default_accounts.txt ftp://localhost/\n</code></pre> <p>\u6700\u540e\uff0c\u6709\u4e00\u4e2a\u5e26\u6709 -x \u9009\u9879\u7684\u86ee\u529b\u6a21\u5f0f\uff08\u4e0d\u80fd\u4e0e -p/-P/-C \u4e00\u8d77\u4f7f\u7528\uff09\uff1a</p> <pre><code>-x minimum_length:maximum_length:charset\n</code></pre> <p>\u5b57\u7b26\u96c6\u5b9a\u4e49\u662f <code>a</code> \u8868\u793a\u5c0f\u5199\u5b57\u6bcd\uff0c<code>A</code> \u8868\u793a\u5927\u5199\u5b57\u6bcd\uff0c<code>1</code> \u8868\u793a\u6570\u5b57\uff0c\u5bf9\u4e8e\u60a8\u63d0\u4f9b\u7684\u4efb\u4f55\u5176\u4ed6\u5185\u5bb9\uff0c\u5b83\u90fd\u662f\u5b83\u4eec\u7684\u771f\u5b9e\u8868\u793a\u3002 \u4f8b\u5b50\uff1a</p> <pre><code>-x 1:3:a \u751f\u6210\u957f\u5ea6\u4e3a 1 \u5230 3 \u7684\u6240\u6709\u5c0f\u5199\u5b57\u6bcd\u7684\u5bc6\u7801\n-x 2:5:/ \u751f\u6210\u957f\u5ea6\u4e3a 2 \u5230 5 \u7684\u5bc6\u7801\uff0c\u4ec5\u5305\u542b\u659c\u6760\n-x 5:8:A1 \u4f7f\u7528\u5927\u5199\u548c\u6570\u5b57\u751f\u6210\u957f\u5ea6\u4e3a 5 \u5230 8 \u7684\u5bc6\u7801\n</code></pre> <p>\u4f8b\u5b50\uff1a</p> <pre><code>hydra -l ftp -x 3:3:a ftp://localhost/\n</code></pre>"},{"location":"technology/security/thc-hydra/#_7","title":"\u7279\u6b8a\u6a21\u5757\u548c\u9009\u9879","text":"<p>\u901a\u8fc7\u7b2c\u4e09\u4e2a\u547d\u4ee4\u884c\u53c2\u6570 (TARGET SERVICE OPTIONAL) \u6216 -m \u547d\u4ee4\u884c\u9009\u9879\uff0c\u60a8\u53ef\u4ee5\u5c06\u4e00\u4e2a\u9009\u9879\u4f20\u9012\u7ed9\u6a21\u5757\u3002</p> <p>\u8bb8\u591a\u6a21\u5757\u4f7f\u7528\u5b83\uff0c\u5c11\u6570\u9700\u8981\u5b83\uff01</p> <p>\u8981\u67e5\u770b\u6a21\u5757\u7684\u7279\u6b8a\u9009\u9879\uff0c\u8bf7\u952e\u5165\uff1a</p> <p><code>hydra -U &lt;module&gt;</code></p> <p>\u4f8b\u5982:</p> <p><code>./hydra -U http-post-form</code></p> <p>\u7279\u6b8a\u9009\u9879\u53ef\u4ee5\u901a\u8fc7 -m \u53c2\u6570\u4f5c\u4e3a\u7b2c\u4e09\u4e2a\u547d\u4ee4\u884c\u9009\u9879\u6216 service://target/option \u683c\u5f0f\u4f20\u9012\u3002</p> <p>\u793a\u4f8b\uff08\u5b83\u4eec\u90fd\u662f\u4e00\u6837\u7684\uff09\uff1a</p> <pre><code>./hydra -l test -p test -m PLAIN 127.0.0.1 imap\n./hydra -l test -p test 127.0.0.1 imap PLAIN\n./hydra -l test -p test imap://127.0.0.1/PLAIN\n</code></pre>"},{"location":"technology/security/thc-hydra/#_8","title":"\u6062\u590d\u4e2d\u6b62/\u5d29\u6e83\u7684\u4f1a\u8bdd","text":"<p>\u5f53 hydra \u88ab Control-C \u4e2d\u6b62\u3001\u6740\u6b7b\u6216\u5d29\u6e83\u65f6\uff0c\u5b83\u4f1a\u7559\u4e0b\u4e00\u4e2a\u201chydra.restore\u201d\u6587\u4ef6\uff0c\u5176\u4e2d\u5305\u542b\u6062\u590d\u4f1a\u8bdd\u6240\u9700\u7684\u6240\u6709\u4fe1\u606f\u3002 \u6b64\u4f1a\u8bdd\u6587\u4ef6\u6bcf 5 \u5206\u949f\u5199\u5165\u4e00\u6b21\u3002</p> <p>\u6ce8\u610f\uff1a\u4e0d\u80fd\u5c06 hydra.restore \u6587\u4ef6\u590d\u5236\u5230\u4e0d\u540c\u7684\u5e73\u53f0\uff08\u4f8b\u5982\uff0c\u4ece\u5c0f\u7aef\u5230\u5927\u7aef\uff0c\u6216\u4ece Solaris \u5230 AIX\uff09</p>"},{"location":"technology/security/thc-hydra/#_9","title":"\u5982\u4f55\u626b\u63cf/\u7834\u89e3\u4ee3\u7406","text":"<p>\u73af\u5883\u53d8\u91cf HYDRA_PROXY_HTTP \u5b9a\u4e49\u4e86 Web \u4ee3\u7406\uff08\u8fd9\u4ec5\u9002\u7528\u4e8e http \u670d\u52a1\uff01\uff09\u3002 \u4ee5\u4e0b\u8bed\u6cd5\u662f\u6709\u6548\u7684\uff1a</p> <pre><code>HYDRA_PROXY_HTTP=\"http://123.45.67.89:8080/\"\nHYDRA_PROXY_HTTP=\"http://login:password@123.45.67.89:8080/\"\nHYDRA_PROXY_HTTP=\"proxylist.txt\"\n</code></pre> <p>\u6700\u540e\u4e00\u4e2a\u793a\u4f8b\u662f\u4e00\u4e2a\u5305\u542b\u591a\u8fbe 64 \u4e2a\u4ee3\u7406\u7684\u6587\u672c\u6587\u4ef6\uff08\u683c\u5f0f\u5b9a\u4e49\u4e0e\u5176\u4ed6\u793a\u4f8b\u76f8\u540c\uff09\u3002</p> <p>\u5bf9\u4e8e\u6240\u6709\u5176\u4ed6\u670d\u52a1\uff0c\u4f7f\u7528 HYDRA_PROXY \u53d8\u91cf\u6765\u626b\u63cf/\u7834\u89e3\u3002 \u5b83\u4f7f\u7528\u76f8\u540c\u7684\u8bed\u6cd5\u3002 \u4f8b\u5982\uff1a</p> <pre><code>HYDRA_PROXY=[connect|socks4|socks5]://[login:password@]proxy_addr:proxy_port\n</code></pre> <p>\u4f8b\u5982\uff1a</p> <pre><code>HYDRA_PROXY=connect://proxy.anonymizer.com:8000\nHYDRA_PROXY=socks4://auth:pw@127.0.0.1:1080\nHYDRA_PROXY=socksproxylist.txt\n</code></pre>"},{"location":"technology/security/thc-hydra/#_10","title":"\u5176\u4ed6\u63d0\u793a","text":"<ul> <li>\u6309\u53ef\u80fd\u6027\u5bf9\u5bc6\u7801\u6587\u4ef6\u8fdb\u884c\u6392\u5e8f\uff0c\u5e76\u4f7f\u7528 -u \u9009\u9879\u66f4\u5feb\u5730\u627e\u5230\u5bc6\u7801\uff01</li> <li>\u552f\u4e00\u5316\u4f60\u7684\u5b57\u5178\u6587\u4ef6\uff01 \u8fd9\u53ef\u4ee5\u4e3a\u60a8\u8282\u7701\u5927\u91cf\u65f6\u95f4: -)</li> <li><code>cat words.txt | sort | uniq &gt; dictionary.txt</code></li> <li>\u5982\u679c\u60a8\u77e5\u9053\u76ee\u6807\u6b63\u5728\u4f7f\u7528\u5bc6\u7801\u7b56\u7565\uff08\u53ea\u5141\u8bb8\u7528\u6237\u9009\u62e9\u6700\u5c0f\u957f\u5ea6\u4e3a 6\u3001\u81f3\u5c11\u5305\u542b\u4e00\u4e2a\u5b57\u6bcd\u548c\u4e00\u4e2a\u6570\u5b57\u7b49\u7684\u5bc6\u7801\uff09\uff0c\u8bf7\u4f7f\u7528 hydra \u8f6f\u4ef6\u5305\u9644\u5e26\u7684\u5de5\u5177 pw-inspector \u51cf\u5c11\u5bc6\u7801\u5217\u8868\uff1a</li> <li><code>cat dictionary.txt | pw-inspector -m 6 -c 2 -n &gt; passlist.txt</code></li> </ul>"},{"location":"technology/security/thc-hydra/#_11","title":"\u8f93\u51fa\u7ed3\u679c","text":"<p>\u7ed3\u679c\u4e0e\u5176\u4ed6\u4fe1\u606f\u4e00\u8d77\u8f93\u51fa\u5230 stdio\u3002 \u901a\u8fc7 -o \u547d\u4ee4\u884c\u9009\u9879\uff0c\u4e5f\u53ef\u4ee5\u5c06\u7ed3\u679c\u5199\u5165\u6587\u4ef6\u3002 \u4f7f\u7528 -b\uff0c\u53ef\u4ee5\u6307\u5b9a\u8f93\u51fa\u7684\u683c\u5f0f\u3002 \u76ee\u524d\uff0c\u652f\u6301\u8fd9\u4e9b\uff1a</p> <ul> <li><code>text</code>   - \u7eaf\u6587\u672c\u683c\u5f0f</li> <li><code>jsonv1</code> - \u4f7f\u7528 1.x \u7248\u6a21\u5f0f\u7684 JSON \u6570\u636e\uff08\u5b9a\u4e49\u5982\u4e0b\uff09\u3002</li> <li><code>json</code>   - JSON \u6570\u636e\u4f7f\u7528\u6700\u65b0\u7248\u672c\u7684 schema\uff0c\u76ee\u524d\u53ea\u6709\u7248\u672c 1\u3002</li> </ul> <p>\u5982\u679c\u4f7f\u7528 JSON \u8f93\u51fa\uff0c\u5982\u679c\u5728\u5f15\u5bfc Hydra \u65f6\u51fa\u73b0\u4e25\u91cd\u9519\u8bef\uff0c\u7ed3\u679c\u6587\u4ef6\u53ef\u80fd\u4e0d\u662f\u6709\u6548\u7684JSON\u3002</p>"},{"location":"technology/security/thc-hydra/#json","title":"JSON\u683c\u5f0f","text":"<p>\u8fd9\u662f JSON \u8f93\u51fa\u7684\u793a\u4f8b\u3002 \u4e00\u4e9b\u5b57\u6bb5\u7684\u6ce8\u91ca\uff1a</p> <ul> <li><code>errormessages</code> - \u4e00\u4e2a\u7531\u96f6\u4e2a\u6216\u591a\u4e2a\u5b57\u7b26\u4e32\u7ec4\u6210\u7684\u6570\u7ec4\uff0c\u901a\u5e38\u5728 Hydra \u8fd0\u884c\u7ed3\u675f\u65f6\u6253\u5370\u5230 stderr\u3002 \u6587\u672c\u662f\u975e\u5e38\u81ea\u7531\u7684\u5f62\u5f0f\u3002</li> <li><code>success</code> - \u6307\u793a Hydra \u662f\u5426\u6b63\u786e\u8fd0\u884c\u4e14\u6ca1\u6709\u9519\u8bef\uff08NOT \u5982\u679c\u68c0\u6d4b\u5230\u5bc6\u7801\uff09\u3002 \u6b64\u53c2\u6570\u662f JSON \u503c <code>true</code> \u6216 <code>false</code> \u53d6\u51b3\u4e8e\u5b8c\u6210\u3002</li> <li><code>quantityfound</code> - \u53d1\u73b0\u4e86\u591a\u5c11\u4e2a\u7528\u6237\u540d+\u5bc6\u7801\u7ec4\u5408\u3002</li> <li><code>jsonoutputversion</code> - \u6a21\u5f0f\u7684\u7248\u672c\uff0c1.00\u30011.01\u30011.11\u30012.00\u30012.03 \u7b49\u3002Hydra \u5c06\u4f7f\u7248\u672c\u7684\u7b2c\u4e8c\u4e2a\u5143\u7ec4\u59cb\u7ec8\u4e3a\u4e24\u4f4d\u6570\uff0c\u4ee5\u4f7f\u4e0b\u6e38\u5904\u7406\u5668\u66f4\u5bb9\u6613\uff08\u76f8\u5bf9\u4e8e v1.1 \u4e0e v1.10\uff09\u3002 \u6b21\u8981\u7248\u672c\u662f\u9644\u52a0\u7684\uff0c\u56e0\u6b64 1.02 \u5c06\u5305\u542b\u6bd4 1.00 \u66f4\u591a\u7684\u5b57\u6bb5\uff0c\u5e76\u4e14\u5c06\u5411\u540e\u517c\u5bb9\u3002 2.x \u7248\u4f1a\u7834\u574f 1.x \u7248\u8f93\u51fa\u7684\u67d0\u4e9b\u5185\u5bb9\u3002</li> </ul> <p>\u7248\u672c 1.00 \u793a\u4f8b\uff1a</p> <pre><code>{\n\"errormessages\": [\n\"[ERROR] Error Message of Something\",\n\"[ERROR] Another Message\",\n\"These are very free form\"\n],\n\"generator\": {\n\"built\": \"2021-03-01 14:44:22\",\n\"commandline\": \"hydra -b jsonv1 -o results.json ... ...\",\n\"jsonoutputversion\": \"1.00\",\n\"server\": \"127.0.0.1\",\n\"service\": \"http-post-form\",\n\"software\": \"Hydra\",\n\"version\": \"v8.5\"\n},\n\"quantityfound\": 2,\n\"results\": [\n{\n\"host\": \"127.0.0.1\",\n\"login\": \"bill@example.com\",\n\"password\": \"bill\",\n\"port\": 9999,\n\"service\": \"http-post-form\"\n},\n{\n\"host\": \"127.0.0.1\",\n\"login\": \"joe@example.com\",\n\"password\": \"joe\",\n\"port\": 9999,\n\"service\": \"http-post-form\"\n}\n],\n\"success\": false\n}\n</code></pre>"},{"location":"technology/security/thc-hydra/#_12","title":"\u901f\u7387","text":"<p>\u901a\u8fc7\u5e76\u884c\u5316\u529f\u80fd\uff0c\u8fd9\u4e2a\u5bc6\u7801\u7834\u89e3\u5de5\u5177\u53ef\u4ee5\u975e\u5e38\u5feb\uff0c\u4f46\u662f\u5b83\u53d6\u51b3\u4e8e\u534f\u8bae\u3002 \u6700\u5feb\u7684\u4e00\u822c\u662f POP3 \u548c FTP\u3002</p> <p>\u5c1d\u8bd5\u4f7f\u7528\u4efb\u52a1\u9009\u9879 (-t) \u6765\u52a0\u5feb\u901f\u5ea6\uff01 \u8d8a\u9ad8 - \u8d8a\u5feb ;-) \uff08\u4f46\u592a\u9ad8 - \u5b83\u4f1a\u7981\u7528\u670d\u52a1\uff09</p>"},{"location":"technology/security/thc-hydra/#_13","title":"\u5206\u6790","text":"<p>\u4f7f\u7528\u5305\u542b 295 \u4e2a\u6761\u76ee\u7684\u201c-C FILE\u201d\u5728 localhost \u4e0a\u9488\u5bf9 SuSE Linux 7.2 \u8fd0\u884c\uff08294 \u6b21\u5c1d\u8bd5\u65e0\u6548\u767b\u5f55\uff0c1 \u6b21\u6709\u6548\uff09\u3002 \u6bcf\u4e2a\u6d4b\u8bd5\u90fd\u8fd0\u884c\u4e86 3 \u6b21\uff08\u4ec5\u9488\u5bf9\u201c1 \u9879\u4efb\u52a1\u201d\u4e00\u6b21\uff09\uff0c\u5e73\u5747\u503c\u8bb0\u4e0b\u3002</p> <pre><code>                         P A R A L L E L    T A S K S\nSERVICE 1        4       8       16      32      50      64      100     128\n------- --------------------------------------------------------------------\ntelnet  23:20    5:58    2:58    1:34    1:05    0:33    0:45*   0:25*   0:55*\nftp     45:54    11:51   5:54    3:06    1:25    0:58    0:46    0:29    0:32\npop3    92:10    27:16   13:56   6:42    2:55    1:57    1:24    1:14    0:50\nimap    31:05    7:41    3:51    1:58    1:01    0:39    0:32    0:25    0:21\n</code></pre> <p>(*)</p> <p>\u6ce8\u610f: 64 \u5230 128 \u4e2a\u4efb\u52a1\u7684 telnet \u65f6\u95f4\u53ef\u80fd\u975e\u5e38\u4e0d\u540c\uff01 \u4f8b\u5982 \u6709 128 \u4e2a\u4efb\u52a1\uff0c\u8fd0\u884c\u56db\u6b21\u5bfc\u81f4\u65f6\u95f4\u5728 28 \u5230 97 \u79d2\u4e4b\u95f4\uff01 \u539f\u56e0\u4e0d\u660e\u2026\u2026</p> <p>\u6bcf\u4e2a\u4efb\u52a1\u7684\u731c\u6d4b\uff08\u56db\u820d\u4e94\u5165\uff09\uff1a</p> <p><code>295    74    38    19    10    6    5    3    3</code></p> <p>\u6bcf\u6b21\u8fde\u63a5\u53ef\u80fd\u7684\u731c\u6d4b\uff08\u53d6\u51b3\u4e8e\u670d\u52a1\u5668\u8f6f\u4ef6\u548c\u914d\u7f6e\uff09\uff1a</p> <pre><code>telnet    4\n   ftp    6\n  pop3    1\n  imap    3\n</code></pre>"},{"location":"technology/security/thc-hydra/#bugs","title":"bugs\u548c\u529f\u80fd","text":"<p>Hydra:</p> <p>\u5982\u679c\u60a8\u53d1\u73b0\u9519\u8bef\u6216\u7f16\u5199\u4e86\u65b0\u6a21\u5757\uff0c\u8bf7\u7ed9\u6211\u6216 David \u53d1\u9001\u7535\u5b50\u90ae\u4ef6\u3002 vh@thc.org\uff08\u5e76\u5728\u4e3b\u9898\u884c\u4e2d\u8f93\u5165\u201c\u53cd\u5783\u573e\u90ae\u4ef6\u201d\uff09</p> <p>\u60a8\u5e94\u8be5\u4f7f\u7528 PGP \u52a0\u5bc6\u53d1\u5f80 vh@thc.org \u7684\u7535\u5b50\u90ae\u4ef6\uff1a</p> <pre><code>-----BEGIN PGP PUBLIC KEY BLOCK-----\nVersion: GnuPG v3.3.3 (vh@thc.org)\n\nmQINBFIp+7QBEADQcJctjohuYjBxq7MELAlFDvXRTeIqqh8kqHPOR018xKL09pZT\nKiBWFBkU48xlR3EtV5fC1yEt8gDEULe5o0qtK1aFlYBtAWkflVNjDrs+Y2BpjITQ\nFnAPHw0SOOT/jfcvmhNOZMzMU8lIubAVC4cVWoSWJbLTv6e0DRIPiYgXNT5Quh6c\nvqhnI1C39pEo/W/nh3hSa16oTc5dtTLbi5kEbdzml78TnT0OASmWLI+xtYKnP+5k\nXv4xrXRMVk4L1Bv9WpCY/Jb6J8K8SJYdXPtbaIi4VjgVr5gvg9QC/d/QP2etmw3p\nlJ1Ldv63x6nXsxnPq6MSOOw8+QqKc1dAgIA43k6SU4wLq9TB3x0uTKnnB8pA3ACI\nzPeRN9LFkr7v1KUMeKKEdu8jUut5iKUJVu63lVYxuM5ODb6Owt3+UXgsSaQLu9nI\nDZqnp/M6YTCJTJ+cJANN+uQzESI4Z2m9ITg/U/cuccN/LIDg8/eDXW3VsCqJz8Bf\nlBSwMItMhs/Qwzqc1QCKfY3xcNGc4aFlJz4Bq3zSdw3mUjHYJYv1UkKntCtvvTCN\nDiomxyBEKB9J7KNsOLI/CSst3MQWSG794r9ZjcfA0EWZ9u6929F2pGDZ3LiS7Jx5\nn+gdBDMe0PuuonLIGXzyIuMrkfoBeW/WdnOxh+27eemcdpCb68XtQCw6UQARAQAB\ntB52YW4gSGF1c2VyICgyMDEzKSA8dmhAdGhjLm9yZz6JAjkEEwECACMCGwMCHgEC\nF4AFAlIp/QcGCwkIAwcCBhUKCQgLAgUWAwIBAAAKCRDI8AEqhCFiv2R9D/9qTCJJ\nxCH4BUbWIUhw1zRkn9iCVSwZMmfaAhz5PdVTjeTelimMh5qwK2MNAjpR7vCCd3BH\nZ2VLB2Eoz9MOgSCxcMOnCDJjtCdCOeaxiASJt8qLeRMwdMOtznM8MnKCIO8X4oo4\nqH8eNj83KgpI50ERBCj/EMsgg07vSyZ9i1UXjFofFnbHRWSW9yZO16qD4F6r4SGz\ndsfXARcO3QRI5lbjdGqm+g+HOPj1EFLAOxJAQOygz7ZN5fj+vPp+G/drONxNyVKp\nQFtENpvqPdU9CqYh8ssazXTWeBi/TIs0q0EXkzqo7CQjfNb6tlRsg18FxnJDK/ga\nV/1umTg41bQuVP9gGmycsiNI8Atr5DWqaF+O4uDmQxcxS0kX2YXQ4CSQJFi0pml5\nslAGL8HaAUbV7UnQEqpayPyyTEx1i0wK5ZCHYjLBfJRZCbmHX7SbviSAzKdo5JIl\nAtuk+atgW3vC3hDTrBu5qlsFCZvbxS21PJ+9zmK7ySjAEFH/NKFmx4B8kb7rPAOM\n0qCTv0pD/e4ogJCxVrqQ2XcCSJWxJL31FNAMnBZpVzidudNURG2v61h3ckkSB/fP\nJnkRy/yxYWrdFBYkURImxD8iFD1atj1n3EI5HBL7p/9mHxf1DVJWz7rYQk+3czvs\nIhBz7xGBz4nhpCi87VDEYttghYlJanbiRfNh3okCOAQTAQIAIgUCUin7tAIbAwYL\nCQgHAwIGFQgCCQoLBBYCAwECHgECF4AACgkQyPABKoQhYr8OIA//cvkhoKay88yS\nAjMQypach8C5CvP7eFCT11pkCt1DMAO/8Dt6Y/Ts10dPjohGdIX4PkoLTkQDwBDJ\nHoLO75oqj0CYLlqDI4oHgf2uzd0Zv8f/11CQQCtut5oEK72mGNzv3GgVqg60z2KR\n2vpxvGQmDwpDOPP620tf/LuRQgBpks7uazcbkAE2Br09YrUQSCBNHy8kirHW5m5C\nnupMrcvuFx7mHKW1z3FuhM8ijG7oRmcBWfVoneQgIT3l2WBniXg1mKFhuUSV8Erc\nXIcc11qsKshyqh0GWb2JfeXbAcTW8/4IwrCP+VfAyLO9F9khP6SnCmcNF9EVJyR6\nAw+JMNRin7PgvsqbFhpkq9N+gVBAufz3DZoMTEbsMTtW4lYG6HMWhza2+8G9XyaL\nARAWhkNVsmQQ5T6qGkI19thB6E/T6ZorTxqeopNVA7VNK3RVlKpkmUu07w5bTD6V\nl3Ti6XfcSQqzt6YX2/WUE8ekEG3rSesuJ5fqjuTnIIOjBxr+pPxkzdoazlu2zJ9F\nn24fHvlU20TccEWXteXj9VFzV/zbPEQbEqmE16lV+bO8U7UHqCOdE83OMrbNKszl\n7LSCbFhCDtflUsyClBt/OPnlLEHgEE1j9QkqdFFy90l4HqGwKvx7lUFDnuF8LYsb\n/hcP4XhqjiGcjTPYBDK254iYrpOSMZSIRgQQEQIABgUCUioGfQAKCRBDlBVOdiii\ntuddAJ4zMrge4qzajScIQcXYgIWMXVenCQCfYTNQPGkHVyp3dMhJ0NR21TYoYMC5\nAg0EUin7tAEQAK5/AEIBLlA/TTgjUF3im6nu/rkWTM7/gs5H4W0a04kF4UPhaJUR\ngCNlDfUnBFA0QD7Jja5LHYgLdoHXiFelPhGrbZel/Sw6sH2gkGCBtFMrVkm3u7tt\nx3AZlprqqRH68Y5xTCEjGRncCAmaDgd2apgisJqXpu0dRDroFYpJFNH3vw9N2a62\n0ShNakYP4ykVG3jTDC4MSl2q3BO5dzn8GYFHU0CNz6nf3gZR+48BG+zmAT77peTS\n+C4Mbd6LmMmB0cuS2kYiFRwE2B69UWguLHjpXFcu9/85JJVCl2CIab7l5hpqGmgw\nG/yW8HFK04Yhew7ZJOXJfUYlv1EZzR5bOsZ8Z9inC6hvFmxuCYCFnvkiEI+pOxPA\noeNOkMaT/W4W+au0ZVt3Hx+oD0pkJb5if0jrCaoAD4gpWOte6LZA8mAbKTxkHPBr\nrA9/JFis5CVNI688O6eDiJqCCJjPOQA+COJI+0V+tFa6XyHPB4LxA46RxtumUZMC\nv/06sDJlXMNpZbSd5Fq95YfZd4l9Vr9VrvKXfbomn+akwUymP8RDyc6Z8BzjF4Y5\n02m6Ts0J0MnSYfEDqJPPZbMGB+GAgAqLs7FrZJQzOZTiOXOSIJsKMYsPIDWE8lXv\ns77rs0rGvgvQfWzPsJlMIx6ryrMnAsfOkzM2GChGNX9+pABpgOdYII4bABEBAAGJ\nAh8EGAECAAkFAlIp+7QCGwwACgkQyPABKoQhYr+hrg/9Er0+HN78y6UWGFHu/KVK\nd8M6ekaqjQndQXmzQaPQwsOHOvWdC+EtBoTdR3VIjAtX96uvzCRV3sb0XPB9S9eP\ngRrO/t5+qTVTtjua1zzjZsMOr1SxhBgZ5+0U2aoY1vMhyIjUuwpKKNqj2uf+uj5Y\nZQbCNklghf7EVDHsYQ4goB9gsNT7rnmrzSc6UUuJOYI2jjtHp5BPMBHh2WtUVfYP\n8JqDfQ+eJQr5NCFB24xMW8OxMJit3MGckUbcZlUa1wKiTb0b76fOjt0y/+9u1ykd\nX+i27DAM6PniFG8BfqPq/E3iU20IZGYtaAFBuhhDWR3vGY4+r3OxdlFAJfBG9XDD\naEDTzv1XF+tEBo69GFaxXZGdk9//7qxcgiya4LL9Kltuvs82+ZzQhC09p8d3YSQN\ncfaYObm4EwbINdKP7cr4anGFXvsLC9urhow/RNBLiMbRX/5qBzx2DayXtxEnDlSC\nMh7wCkNDYkSIZOrPVUFOCGxu7lloRgPxEetM5x608HRa3hDHoe5KvUBmmtavB/aR\nzlGuZP1S6Y7S13ytiULSzTfUxJmyGYgNo+4ygh0i6Dudf9NLmV+i9aEIbLbd6bni\n1B/y8hBSx3SVb4sQVRe3clBkfS1/mYjlldtYjzOwcd02x599KJlcChf8HnWFB7qT\nzB3yrr+vYBT0uDWmxwPjiJs=\n=ytEf\n-----END PGP PUBLIC KEY BLOCK-----\n</code></pre>"},{"location":"technology/unheadchrome/build_env/","title":"\u65e0\u5934\u6d4f\u89c8\u5668\u73af\u5883\u642d\u5efa","text":""},{"location":"technology/unheadchrome/build_env/#centos-7-chromium","title":"CentOS 7 \u4e0a\u5b89\u88c5 Chromium","text":"<p>1\u3001 \u9996\u5148\u8ba9\u786e\u4fdd\u60a8\u7684\u7cfb\u7edf\u662f\u6700\u65b0\u7684\u3002</p> <pre><code>yum clean all\nyum install -y epel-release\nyum -y update\n</code></pre> <p>2\u3001\u5728 CentOS 7 \u4e0a\u5b89\u88c5 Chromium\u3002</p> <p>\u8981\u5728 CentOS 7 \u4e0a\u5b89\u88c5 Chromium\uff0c\u53ea\u9700\u4f7f\u7528 yum install \u547d\u4ee4\u5373\u53ef\uff1a</p> <pre><code>yum install -y chromium\n</code></pre> <p>3\u3001\u8bbf\u95ee Google Chrome \u7f51\u7edc\u6d4f\u89c8\u5668\u3002</p> <p>Chromium \u6d4f\u89c8\u5668\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u60a8\u53ef\u4ee5\u4ece GNU \u5e94\u7528\u7a0b\u5e8f\u83dc\u5355\u6216\u547d\u4ee4\u884c\u7ec8\u7aef\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u542f\u52a8 Chromium\uff1a</p> <pre><code>chromium\n# chromium-browser\n</code></pre> <p>\u66f4\u591a\u4fe1\u606f\u53c2\u8003chromium \u5b98\u65b9\u7f51\u7ad9\u3002</p> <ul> <li>Testing in Chromium</li> <li>Running in headless mode with --ozone-platform or xvfb</li> </ul>"},{"location":"technology/unheadchrome/build_env/#chromedriver","title":"\u5b89\u88c5chromedriver","text":"<pre><code>yum install chromedriver\n</code></pre>"},{"location":"technology/unheadchrome/openchrome/","title":"OpenChrome","text":"<p>\u539f\u6587: &lt;https://www.freedesktop.org/wiki/Openchrome</p>"},{"location":"technology/unheadchrome/openchrome/#openchrome_1","title":"\u5173\u4e8e Openchrome","text":"<p>Openchrome \u9879\u76ee\u81f4\u529b\u4e8e\u63d0\u4f9b\u548c\u652f\u6301\u5b8c\u5168\u514d\u8d39\u7684\u5f00\u6e90\u9a71\u52a8\u7a0b\u5e8f\uff0c\u5145\u5206\u5229\u7528\u5a01\u76db UniChrome\u3001UniChrome Pro \u548c Chrome9 \u96c6\u6210\u56fe\u5f62\u5904\u7406\u5668\u7684\u5a01\u76db\u82af\u7247\u7ec4\u7684\u786c\u4ef6\u52a0\u901f\u3002</p>"},{"location":"technology/unheadchrome/openchrome/#_1","title":"\u6587\u6863","text":"<ul> <li>\u786c\u4ef6\u652f\u6301</li> <li>\u7ec4\u6210</li> <li>\u5b89\u88c5</li> <li>\u914d\u7f6e</li> <li>\u6545\u969c\u6392\u9664</li> <li>\u5f00\u53d1\u8005</li> <li>\u8054\u7cfb</li> </ul>"},{"location":"technology/web/flask/","title":"flask","text":"<p>\u8fd9\u91cc\u662f\u548cflask\u76f8\u5173\u7684\u95ee\u9898\u5b66\u4e60\u8bb0\u5f55\u3002</p> <ul> <li><code>1.1.x</code> \u7248\u672c\u7684\u6587\u6863\uff1ahttps://flask.palletsprojects.com/en/1.1.x/</li> <li><code>2.0.x</code> \u7248\u672c\u7684\u6587\u6863\uff1ahttps://flask.palletsprojects.com/en/2.0.x/</li> <li>\u8f83\u65b0\u7684\u7248\u672c\u7684\u4e2d\u6587\u6587\u6863: https://flask-zh.readthedocs.io/</li> </ul>"},{"location":"technology/web/flask/#falsk","title":"falsk \u4e2d\u6587\u5b66\u4e60\u7f51","text":"<p>\u8bbf\u95ee: http://flask123.sinaapp.com/flatpage/flask-docs/</p>"},{"location":"technology/web/flask/#flask_1","title":"flask \u4e4b\u65c5","text":"<p>\u672c\u4e66\u65e8\u5728\u5c55\u793a\u4f7f\u7528 Flask \u7684\u6700\u4f73\u5b9e\u8df5\u3002 \u5f00\u53d1\u4e00\u4e2a\u666e\u901a\u7684 Flask \u5e94\u7528\u9700\u8981\u8ddf\u5f62\u5f62\u8272\u8272\u7684\u9886\u57df\u6253\u4ea4\u9053\u3002\u6bd4\u5982\uff0c\u4f60\u7ecf\u5e38\u9700\u8981\u64cd\u4f5c\u6570\u636e\u5e93\uff0c\u9a8c\u8bc1\u7528\u6237\u3002 \u5728\u63a5\u4e0b\u6765\u7684\u51e0\u9875\u91cc\u6211\u5c06\u5c3d\u6211\u6240\u80fd\u6765\u4ecb\u7ecd\u5904\u7406\u8fd9\u4e9b\u4e8b\u60c5\u65f6\u7684\u201c\u6b63\u786e\u4e4b\u9053\u201d\u3002 \u6211\u7684\u5efa\u8bae\u5e76\u4e0d\u603b\u80fd\u6709\u7528\uff0c\u4f46\u6211\u5e0c\u671b\u5b83\u4eec\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u90fd\u662f\u4e00\u4e2a\u597d\u9009\u62e9\u3002</p> <p>\u8bbf\u95ee: https://hellowac.github.io/explore-flask-zh/</p>"},{"location":"technology/web/flask/#flask_2","title":"flask \u4e2d\u6587\u7248","text":"<p>\u6b22\u8fce\u9605\u8bfb Flask \u7684\u6587\u6863\u3002\u63a8\u8350\u60a8\u5148\u9605\u8bfb\u300a \u5b89\u88c5 \u300b\uff0c\u7136\u540e\u9605\u8bfb \u300a \u5feb\u901f\u4e0a\u624b \u300b\u3002\u300a \u6559\u7a0b \u300b\u6bd4\u5feb\u901f\u4e0a\u624b\u6587\u6863\u66f4\u8be6\u7ec6\u4e00\u70b9\uff0c\u8be5 \u6587\u6863\u4ecb\u7ecd\u4e86\u5982\u4f55\u521b\u5efa\u4e00\u4e2a\u5b8c\u6574\uff08\u5c3d\u7ba1\u5f88\u5c0f\uff09\u7684 Flask \u5e94\u7528\u3002 \u300a Flask \u65b9\u6848 \u300b \u4e2d\u4ecb\u7ecd\u4e86\u4e00\u4e9b\u5e38\u7528\u7684\u89e3\u51b3\u65b9\u6848\u3002\u5176\u4f59\u7684\u6587\u6863\u8be6\u7ec6\u4ecb\u7ecd\u4e86 Flask \u7684\u6bcf\u4e00\u4e2a\u7ec4\u4ef6\u3002 \u300a API \u300b\u63d0\u4f9b\u4e86\u6700\u8be6\u7ec6\u7684\u53c2\u8003\u3002</p> <p>Flask \u4f9d\u8d56 Jinja \u6a21\u677f\u5f15\u64ce\u548c Werkzeug WSGI \u5957\u4ef6\u3002\u8fd9\u4e24\u4e2a\u5e93\u7684\u6587\u6863\u8bf7\u79fb\u6b65\uff1a</p> <ul> <li>Jinja \u6587\u6863</li> <li>Werkzeug \u6587\u6863 </li> </ul> <p>\u8bbf\u95ee: https://flask.net.cn/api.html</p>"},{"location":"technology/web/flask/#_1","title":"\u6587\u4ef6","text":"<p>flask 1.1.x \u7248\u672c\u4e0a\u4f20\u7684\u6587\u4ef6\u5bf9\u8c61 file \u7684\u7c7b\u4e3a <code>werkzeug.datastructures.FileStorage</code>, \u53c2\u8003: FileStorage</p>"},{"location":"tools/repos/","title":"\u4ed3\u5e93\u5408\u96c6","text":""},{"location":"tools/repos/#best-of","title":"best-of","text":"<p>\ud83c\udfc6 \u53d1\u73b0\u5173\u4e8e\u5404\u79cd\u4e3b\u9898\u7684\u4f18\u79c0\u5f00\u6e90\u9879\u76ee\u7684\u6700\u4f73\u5217\u8868\u3002</p> <ul> <li>gihub\u5730\u5740: https://github.com/best-of-lists/best-of</li> </ul>"},{"location":"tools/repos/#awesome-minimalist","title":"awesome-minimalist","text":"<p>\u7cbe\u9009\u7684\u6781\u7b80\u4e3b\u4e49\u6846\u67b6\u5217\u8868\uff08\u7b80\u5355\u4e14\u8f7b\u91cf\u7ea7\uff09\u3002</p> <ul> <li>github\u5730\u5740: https://github.com/neiesc/awesome-minimalist</li> </ul>"},{"location":"tools/repos/#_2","title":"\u7b97\u6cd5","text":"<p>Python \u4e2d\u6570\u636e\u7ed3\u6784\u548c\u7b97\u6cd5\u7684\u6700\u5c0f\u793a\u4f8b</p> <ul> <li>github\u5730\u5740: https://github.com/keon/algorithms</li> </ul>"},{"location":"tools/repos/#mindmaps","title":"mindmaps","text":"<p>\u4e00\u4e2a\u5229\u7528 HTML5 \u6280\u672f\u7684\u5f00\u6e90\u3001\u8131\u673a\u7684\u601d\u7ef4\u5bfc\u56fe\u5e94\u7528\u7a0b\u5e8f</p> <ul> <li>github\u5730\u5740: https://github.com/drichard/mindmaps</li> <li>\u5728\u7ebf\u5e94\u7528\u7a0b\u5e8f: https://www.mindmaps.app/</li> </ul>"}]}